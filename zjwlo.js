// ==UserScript==
// @name         zjwLovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.raoh.space
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/zjwlo.js
// @downloadURL  https://co.taotile.ltd/zjwlo.js
// ==/UserScript==
function _0x570f(){const _0x388136=['tm-mgmt-next-link','log','mousemove','now','[验证]\x20前缀\x20\x22','body','163632TQCbhL','innerHTML','searchParams','getElementById','checkEmail','pathname','GET','.0)\x20Gecko/20100101\x20Firefox/','div.bottom-left-user-position\x20img[alt]','right','下一账户','filter','remoteRulesUrl','floor','match','验证通过,\x20点击继续...','replace','激活失败/超时:\x20','href','根页面，随机跳转...','按钮已定位,\x20直接调用函数...','无(等待手动输入)','13_5','错误:\x20按钮无点击函数','#tm-mgmt-title','14_4_1','238KqjGRU','top','获取链接失败:\x20','set','target','tagName','forEach','错误:\x2010秒内未找到DesignNow','responseText','getAttribute','User-Agent','grabbing','tm-mgmt-clear-storage','57212LYeuMD','some','textContent','header\x20div,\x20header\x20button','主页,\x20尝试调用函数...','[验证]\x20因发生错误或验证失败，最终返回:\x20false','所有存储的账户和链接信息已清除，页面将刷新。','last_used_account_lovart','NEXT_REFERRAL_LINK','__reactProps$','prototype','headers','includes','delete','已保存接力链接!','div','error','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','addEventListener','preventDefault','bottom','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:','clientY','none','true','错误:\x20未找到继续按钮','https://co.taotile.ltd/akl.txt','activate','open','mouseup','input[placeholder=\x22Email\x22]','85YAgPWf','loginModal','4027788RtRzPe','find','alt','call','querySelectorAll','section[role=\x22dialog\x22]\x20span.truncate','\x20Safari/537.36','stopPropagation','map',',\x20等待手动登出...','homepage',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','3742077TWWwUr','left','backendApiUrl','20JpKSYL','reload','click','Check\x20your\x20email\x20to\x20continue','disconnect','BUTTON','[验证]\x20开始验证前缀:\x20\x22','@hawedu.com','keys','ENABLED','onClick','错误:\x20DesignNow无点击函数','application/json','toLowerCase','random','button,\x20a,\x20div','link','mousedown','loggedIn','LOCAL_BACKUP_LIST','replaceState','stringify','LAST_ACCOUNT','未知服务器错误','warn','cxianyu','then','34430568VktaFj','精确定位引荐按钮...','8nFrOOS','div,\x20p,\x20h1,\x20h2','send','错误:\x20未找到引荐链接','clientX','success','next_account','split','auto','closest','https://lhou.raoh.space/','next_referral_link_lovart','function','endsWith','button','https://co.taotile.ltd/dizhi.txt','验证前缀:\x20','status','value','错误:\x20未找到引荐按钮','input','grab','/home','成功获取链接,\x20跳转中...','tm-mgmt-next-user','header\x20img[alt][class*=\x22rounded-full\x22]','startsWith','lovart.ai','_tampermonkeyUrl','XMLHttpRequest','tm-mgmt-status','guest','search','userSelect','Design\x20Now','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apply','removeEventListener','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','appendChild','disabled','tm-mgmt-panel','\x20次尝试失败:','主页,\x20等待\x20\x27Design\x20Now\x27...','109648GKePZf','hostname','[data-testid=\x22user-profile-logout\x22]','change','Lovart','[验证]\x20验证前缀时发生网络或未知错误:','获取登录链接第\x20','7875960tAqgGv','REMOTE_URL','automationAttached','user','11HkpZnJ','.0.','POST','length','接力链接','\x22\x20的验证结果为:\x20','cursor','错误:\x20非React按钮','已登录:\x20','trim','referralCode=','logicExecuted','getOwnPropertyDescriptor','location','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','已在目标页面','等待服务器获取登录链接...','querySelector','parse','get','createElement','Worker网络错误,\x20已达最大重试次数','substring','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','已进入登录/注册弹窗','dataset','style'];_0x570f=function(){return _0x388136;};return _0x570f();}function _0x29e7(_0x429ce6,_0x46829b){const _0x570f5b=_0x570f();return _0x29e7=function(_0x29e720,_0x4fb4b1){_0x29e720=_0x29e720-0x16f;let _0x438a2e=_0x570f5b[_0x29e720];return _0x438a2e;},_0x29e7(_0x429ce6,_0x46829b);}(function(_0x56a87d,_0xa822d5){const _0x5d1109=_0x29e7,_0x883c12=_0x56a87d();while(!![]){try{const _0x1e72e0=parseInt(_0x5d1109(0x1ad))/0x1*(-parseInt(_0x5d1109(0x1d9))/0x2)+-parseInt(_0x5d1109(0x18d))/0x3+parseInt(_0x5d1109(0x22c))/0x4*(-parseInt(_0x5d1109(0x17f))/0x5)+parseInt(_0x5d1109(0x1e0))/0x6+parseInt(_0x5d1109(0x21f))/0x7*(-parseInt(_0x5d1109(0x205))/0x8)+-parseInt(_0x5d1109(0x181))/0x9*(parseInt(_0x5d1109(0x190))/0xa)+parseInt(_0x5d1109(0x1e4))/0xb*(parseInt(_0x5d1109(0x1ab))/0xc);if(_0x1e72e0===_0xa822d5)break;else _0x883c12['push'](_0x883c12['shift']());}catch(_0x46c304){_0x883c12['push'](_0x883c12['shift']());}}}(_0x570f,0xa1b00),(function(){'use strict';const _0x4d52c6=_0x29e7;if(window[_0x4d52c6(0x220)]!==window['self'])return;const _0x10e4a0={'ENABLED':!0x0,'REMOTE_URL':_0x4d52c6(0x1bc),'LOCAL_BACKUP_LIST':['']},_0x156ec0={'NEXT_REFERRAL_LINK':_0x4d52c6(0x1b8),'LAST_ACCOUNT':_0x4d52c6(0x233)},_0x26db26={'emailSuffix':_0x4d52c6(0x197),'remoteRulesUrl':_0x4d52c6(0x17a),'backendApiUrl':_0x4d52c6(0x1b7)},_0x4bea6c=[_0x4d52c6(0x1cc),_0x4d52c6(0x1e3),'avatar',''];_0x415510(),document[_0x4d52c6(0x172)]('DOMContentLoaded',_0x136779);async function _0x136779(){const _0x5cf4ef=_0x4d52c6;_0xef5dd3(),await _0x52139e(0x32);const _0x5c1cf4=window['location'][_0x5cf4ef(0x20a)],_0x110bd4=window['location'][_0x5cf4ef(0x1cd)];if(_0x5c1cf4[_0x5cf4ef(0x1c7)](_0x5cf4ef(0x1c3))||_0x5c1cf4[_0x5cf4ef(0x1c7)]('/canvas')||_0x110bd4[_0x5cf4ef(0x238)](_0x5cf4ef(0x1ee)))_0x1aeef9('状态',_0x5cf4ef(0x1f3));else{const _0x5b12a4=await GM_getValue(_0x156ec0['NEXT_REFERRAL_LINK'],null);if(_0x5b12a4){await GM_setValue(_0x156ec0[_0x5cf4ef(0x234)],null),_0x1aeef9('状态','检测到接力链接...'),window[_0x5cf4ef(0x1f1)][_0x5cf4ef(0x217)]=_0x5b12a4;return;}const _0x40a8cf=_0x5c1cf4==='/'&&!_0x110bd4;if(_0x40a8cf&&_0x10e4a0[_0x5cf4ef(0x199)]){_0x1aeef9('状态',_0x5cf4ef(0x218));const _0x28510d=await _0x1d2d8c()||_0x10e4a0[_0x5cf4ef(0x1a3)];if(_0x28510d&&_0x28510d['length']>0x0){const _0x1f6220=_0x28510d[Math[_0x5cf4ef(0x212)](Math['random']()*_0x28510d[_0x5cf4ef(0x1e7)])];window['location'][_0x5cf4ef(0x217)]=_0x1f6220;return;}}}_0x3a4b62(),_0x1d96e7();}const _0x1f83a5=(_0x415cd5,_0x355fac=0x1388)=>new Promise(_0xcdd540=>{const _0x28a7cf=setInterval(()=>{const _0x16412b=_0x29e7,_0x5d7603=document[_0x16412b(0x1f5)](_0x415cd5);_0x5d7603&&(clearInterval(_0x28a7cf),_0xcdd540(_0x5d7603));},0x64);setTimeout(()=>{clearInterval(_0x28a7cf),_0xcdd540(null);},_0x355fac);}),_0x52139e=_0xc9b18f=>new Promise(_0x192dbe=>setTimeout(_0x192dbe,_0xc9b18f));function _0x2ac71a(_0x243d8b,_0x4da5c3,_0x329f41=![]){const _0x1c2810=_0x4d52c6,_0x3f5634=document[_0x1c2810(0x185)](_0x243d8b);for(const _0x508937 of _0x3f5634){const _0x466301=_0x508937[_0x1c2810(0x22e)][_0x1c2810(0x1ed)]()[_0x1c2810(0x19d)]();if(_0x508937['offsetParent']!==null&&(_0x329f41?_0x466301===_0x4da5c3['toLowerCase']():_0x466301[_0x1c2810(0x238)](_0x4da5c3['toLowerCase']())))return _0x508937;}return null;}async function _0x1d2d8c(){const _0x920273=_0x4d52c6;if(!_0x10e4a0[_0x920273(0x1e1)])return null;const _0x194ffc=_0x10e4a0[_0x920273(0x1e1)]+'?t='+Date['now']();return new Promise(_0x4a9990=>{const _0x26fb8a=_0x920273;GM_xmlhttpRequest({'method':_0x26fb8a(0x20b),'url':_0x194ffc,'onload':function(_0x2a9547){const _0x809549=_0x26fb8a;0xc8===_0x2a9547['status']?_0x4a9990(_0x2a9547[_0x809549(0x227)][_0x809549(0x213)](/^(https?:\/\/\S+)/gm)||[]):_0x4a9990(null);},'onerror':function(){_0x4a9990(null);}});});}function _0x415510(){const _0xb47c63=_0x4d52c6,_0x1bd12f=()=>{const _0x7b524e=_0x29e7,_0x1d1a21=Math[_0x7b524e(0x19e)]();if(_0x1d1a21<0.6){const _0x1bca44=0x7e+Math[_0x7b524e(0x212)](0x5*Math[_0x7b524e(0x19e)]()),_0x1158fe=0x1388+Math[_0x7b524e(0x212)](0xbb8*Math[_0x7b524e(0x19e)]()),_0x4e1eb5=Math[_0x7b524e(0x212)](0x96*Math[_0x7b524e(0x19e)]()),_0x4bd6aa=_0x1bca44+_0x7b524e(0x1e5)+_0x1158fe+'.'+_0x4e1eb5,_0x1fc0c6=Math[_0x7b524e(0x19e)]();return _0x1fc0c6<0.6?'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x4bd6aa+_0x7b524e(0x187):_0x1fc0c6<0.9?_0x7b524e(0x171)+_0x4bd6aa+'\x20Safari/537.36':_0x7b524e(0x1d3)+_0x4bd6aa+'\x20Safari/537.36\x20Edg/'+_0x4bd6aa;}if(_0x1d1a21<0.9){const _0x199cdc=0x7f+Math[_0x7b524e(0x212)](0x5*Math[_0x7b524e(0x19e)]());return Math[_0x7b524e(0x19e)]()<0.65?_0x7b524e(0x175)+_0x199cdc+_0x7b524e(0x20c)+_0x199cdc+'.0':_0x7b524e(0x1f2)+_0x199cdc+_0x7b524e(0x20c)+_0x199cdc+'.0';}{const _0x3f190c={'18.0':'15_0','17.5':'14_5','17.4.1':_0x7b524e(0x21e),'16.6':_0x7b524e(0x21b)},_0x4e5581=Object[_0x7b524e(0x198)](_0x3f190c),_0x3f7a3f=_0x4e5581[Math['floor'](Math['random']()*_0x4e5581[_0x7b524e(0x1e7)])],_0x677fc6=_0x3f190c[_0x3f7a3f];return'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_'+_0x677fc6[_0x7b524e(0x215)](/\./g,'_')+_0x7b524e(0x18c)+_0x3f7a3f+'\x20Safari/605.1.15';}},_0x5a023d=_0x1bd12f(),_0x16bcc9=unsafeWindow['fetch'];unsafeWindow['fetch']=function(_0x1e7ad3,_0x4ed6a1){const _0x2aa6c6=_0x29e7;let _0x246a78={..._0x4ed6a1};try{if(new URL(_0x1e7ad3,window[_0x2aa6c6(0x1f1)][_0x2aa6c6(0x217)])[_0x2aa6c6(0x1da)][_0x2aa6c6(0x1ba)](_0x2aa6c6(0x1c8))){const _0x7044bd=new Headers(_0x246a78[_0x2aa6c6(0x237)]);_0x7044bd['set'](_0x2aa6c6(0x229),_0x5a023d),_0x246a78['headers']=_0x7044bd;}}catch(_0x572ee4){console[_0x2aa6c6(0x1a8)]('[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:',_0x572ee4,_0x4ed6a1);}return _0x16bcc9[_0x2aa6c6(0x184)](this,_0x1e7ad3,_0x246a78);};const _0x5ee0d8=unsafeWindow['XMLHttpRequest']['prototype'][_0xb47c63(0x17c)],_0x2fcc7c=unsafeWindow[_0xb47c63(0x1ca)][_0xb47c63(0x236)]['send'];unsafeWindow[_0xb47c63(0x1ca)][_0xb47c63(0x236)][_0xb47c63(0x17c)]=function(_0x1d290,_0x53a505,..._0x149994){const _0x4378c3=_0xb47c63;return this[_0x4378c3(0x1c9)]=_0x53a505,_0x5ee0d8[_0x4378c3(0x1d1)](this,[_0x1d290,_0x53a505,..._0x149994]);},unsafeWindow[_0xb47c63(0x1ca)][_0xb47c63(0x236)][_0xb47c63(0x1af)]=function(..._0x2398b2){const _0xc861e4=_0xb47c63;try{this[_0xc861e4(0x1c9)]&&new URL(this[_0xc861e4(0x1c9)],window[_0xc861e4(0x1f1)][_0xc861e4(0x217)])[_0xc861e4(0x1da)][_0xc861e4(0x1ba)](_0xc861e4(0x1c8))&&this['setRequestHeader'](_0xc861e4(0x229),_0x5a023d);}catch(_0x2958ba){console[_0xc861e4(0x1a8)]('[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:',this[_0xc861e4(0x1c9)],_0x2958ba);}return _0x2fcc7c['apply'](this,_0x2398b2);};}function _0x1b3143(_0xf4d338,_0x5c6ae7){const _0x4ab055=_0x4d52c6;let _0x20c603,_0x10797e,_0x3a9dd4=![];_0x5c6ae7['addEventListener'](_0x4ab055(0x1a1),_0x3e0edf=>{const _0x4e3720=_0x4ab055;if(_0x3e0edf[_0x4e3720(0x223)][_0x4e3720(0x224)]===_0x4e3720(0x195))return;_0x3a9dd4=!![],_0x3e0edf['preventDefault']();const _0x3400c8=_0xf4d338['getBoundingClientRect']();_0x20c603=_0x3e0edf[_0x4e3720(0x1b1)]-_0x3400c8[_0x4e3720(0x18e)],_0x10797e=_0x3e0edf[_0x4e3720(0x176)]-_0x3400c8[_0x4e3720(0x220)],_0x5c6ae7[_0x4e3720(0x1fe)][_0x4e3720(0x1ea)]=_0x4e3720(0x22a),document[_0x4e3720(0x204)]['style'][_0x4e3720(0x1ce)]=_0x4e3720(0x177),_0xf4d338[_0x4e3720(0x1fe)][_0x4e3720(0x20e)]=_0x4e3720(0x1b5),_0xf4d338[_0x4e3720(0x1fe)][_0x4e3720(0x174)]=_0x4e3720(0x1b5),document['addEventListener']('mousemove',_0x56e71a),document['addEventListener'](_0x4e3720(0x17d),_0xdb9fcb,{'once':!![]});});function _0x56e71a(_0xb8fa58){const _0xd01bad=_0x4ab055;if(!_0x3a9dd4)return;_0xf4d338[_0xd01bad(0x1fe)]['left']=_0xb8fa58[_0xd01bad(0x1b1)]-_0x20c603+'px',_0xf4d338[_0xd01bad(0x1fe)][_0xd01bad(0x220)]=_0xb8fa58['clientY']-_0x10797e+'px';}function _0xdb9fcb(){const _0x258cb8=_0x4ab055;_0x3a9dd4=![],_0x5c6ae7[_0x258cb8(0x1fe)][_0x258cb8(0x1ea)]=_0x258cb8(0x1c2),document[_0x258cb8(0x204)][_0x258cb8(0x1fe)][_0x258cb8(0x1ce)]=_0x258cb8(0x1b5),document[_0x258cb8(0x1d2)](_0x258cb8(0x201),_0x56e71a);}_0x5c6ae7[_0x4ab055(0x1fe)][_0x4ab055(0x1ea)]=_0x4ab055(0x1c2);}function _0xef5dd3(){const _0x369f37=_0x4d52c6;if(document[_0x369f37(0x208)](_0x369f37(0x1d6)))return;const _0x211223=document[_0x369f37(0x1f8)](_0x369f37(0x16f));_0x211223['id']=_0x369f37(0x1d6),_0x211223[_0x369f37(0x206)]='<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>';const _0x4fd4fd=_0x211223['querySelector'](_0x369f37(0x21d));_0x1b3143(_0x211223,_0x4fd4fd),document[_0x369f37(0x204)][_0x369f37(0x1d4)](_0x211223),GM_addStyle(_0x369f37(0x1d0)),document[_0x369f37(0x208)](_0x369f37(0x22b))[_0x369f37(0x172)](_0x369f37(0x192),async()=>{const _0x473600=_0x369f37;await GM_setValue(_0x156ec0['LAST_ACCOUNT'],null),await GM_setValue(_0x156ec0[_0x473600(0x234)],null),alert(_0x473600(0x232)),location['reload']();});}function _0x1aeef9(_0x5ac2ea,_0x190e96){const _0x185415=_0x4d52c6,_0x3cc6dd={'状态':_0x185415(0x1cb),'下一账户':_0x185415(0x1c5),'接力链接':_0x185415(0x1ff)}[_0x5ac2ea];if(_0x3cc6dd){const _0x4260c9=document[_0x185415(0x208)](_0x3cc6dd);if(_0x4260c9)_0x4260c9[_0x185415(0x22e)]=_0x190e96;}}async function _0x52c814(){const _0x44faf0=_0x4d52c6;_0x1aeef9('状态',_0x44faf0(0x1ac));let _0x3c6a9c=null;const _0xa0bbd9=document['querySelectorAll'](_0x44faf0(0x22f));for(const _0x235dc0 of _0xa0bbd9){if('Invite\x20Friends'===_0x235dc0[_0x44faf0(0x22e)][_0x44faf0(0x1ed)]()&&null!==_0x235dc0['offsetParent']){_0x3c6a9c=_0x235dc0;break;}}if(!_0x3c6a9c)return void _0x1aeef9('状态',_0x44faf0(0x1c0));_0x1aeef9('状态',_0x44faf0(0x219));const _0x2c853a=Object[_0x44faf0(0x198)](_0x3c6a9c)[_0x44faf0(0x182)](_0x4edbfd=>_0x4edbfd[_0x44faf0(0x1c7)](_0x44faf0(0x235)));if(_0x2c853a){const _0x4a16a1=_0x3c6a9c[_0x2c853a];_0x4a16a1&&_0x44faf0(0x1b9)==typeof _0x4a16a1['onClick']?_0x4a16a1[_0x44faf0(0x19a)]():_0x1aeef9('状态',_0x44faf0(0x21c));}else _0x1aeef9('状态',_0x44faf0(0x1eb));const _0x5eb141=await _0x1f83a5(_0x44faf0(0x186));if(!_0x5eb141){_0x1aeef9('状态',_0x44faf0(0x1b0));const _0x124ee2=await _0x1f83a5('section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]',0x3e8);return void(_0x124ee2&&_0x124ee2['click']());}const _0x38b2c3=_0x5eb141[_0x44faf0(0x22e)][_0x44faf0(0x1ed)]();if(_0x38b2c3&&_0x38b2c3[_0x44faf0(0x238)](_0x44faf0(0x1ee))){await GM_setValue(_0x156ec0['NEXT_REFERRAL_LINK'],_0x38b2c3);const _0x2fb7d0=_0x38b2c3[_0x44faf0(0x213)](/referralCode=([^&]+)/);_0x2fb7d0&&_0x2fb7d0[0x1]&&_0x1aeef9(_0x44faf0(0x1e8),_0x2fb7d0[0x1][_0x44faf0(0x1fa)](0x0,0x7)),_0x1aeef9('状态',_0x44faf0(0x23a));}const _0xd3d383=await _0x1f83a5('section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]');_0xd3d383&&_0xd3d383[_0x44faf0(0x192)]();}async function _0x5e25dc(_0xdc284a){const _0x27ba4c=_0x4d52c6,_0x19555e=(_0xdc284a[_0x27ba4c(0x228)]('alt')||'')[_0x27ba4c(0x1ed)]();if(!_0x19555e||document[_0x27ba4c(0x204)][_0x27ba4c(0x1fd)][_0x27ba4c(0x1ef)])return;document[_0x27ba4c(0x204)][_0x27ba4c(0x1fd)][_0x27ba4c(0x1ef)]=_0x27ba4c(0x178),_0x1aeef9('状态',_0x27ba4c(0x1ec)+_0x19555e),_0x1aeef9('接力链接','N/A'),await _0x52139e(0x5dc),await _0x52c814();const {base:_0x47ec1e,num:_0xf36ce5}=_0x1cf15a(_0x19555e),_0x4e8e7c=''+_0x47ec1e+(_0xf36ce5+0x1);await GM_setValue(_0x156ec0['LAST_ACCOUNT'],_0x4e8e7c),_0x1aeef9(_0x27ba4c(0x20f),_0x4e8e7c),_0x1aeef9('状态','已登录:\x20'+_0x19555e+_0x27ba4c(0x18a)),await _0x52139e(0xfa),document[_0x27ba4c(0x204)][_0x27ba4c(0x172)]('click',_0x19c6c4=>{const _0x35d5c2=_0x27ba4c,_0x50bedd=_0x19c6c4[_0x35d5c2(0x223)][_0x35d5c2(0x1b6)](_0x35d5c2(0x1db));_0x50bedd&&(_0x19c6c4[_0x35d5c2(0x173)](),_0x19c6c4[_0x35d5c2(0x188)](),window[_0x35d5c2(0x1f1)][_0x35d5c2(0x191)]());},{'capture':!0x0});}async function _0x2d2b79(){const _0x418762=_0x4d52c6;_0x1aeef9('状态',_0x418762(0x1d8));let _0x4a1d41=null;for(let _0x219e93=0x0;_0x219e93<0x14;_0x219e93++){if(_0x4a1d41=_0x2ac71a(_0x418762(0x1bb),'Design\x20Now',!0x1))break;await _0x52139e(0x1f4);}if(!_0x4a1d41)return void _0x1aeef9('状态',_0x418762(0x226));_0x1aeef9('状态',_0x418762(0x230));const _0x1578e0=Object[_0x418762(0x198)](_0x4a1d41)['find'](_0x5f477f=>_0x5f477f[_0x418762(0x1c7)](_0x418762(0x235)));if(_0x1578e0){const _0x309de9=_0x4a1d41[_0x1578e0];_0x309de9&&_0x418762(0x1b9)==typeof _0x309de9['onClick']?_0x309de9[_0x418762(0x19a)]():_0x1aeef9('状态',_0x418762(0x19b));}else _0x1aeef9('状态','主页,\x20尝试常规点击...'),_0x4a1d41[_0x418762(0x192)]();}function _0x1d96e7(){let _0x2c9eee=null;setInterval(()=>{const _0x4033d5=_0x29e7,_0x1ca96d=document[_0x4033d5(0x1f5)](_0x4033d5(0x1c6))||document[_0x4033d5(0x1f5)](_0x4033d5(0x20d));if(_0x1ca96d){const _0x526fcf=_0x1ca96d[_0x4033d5(0x228)](_0x4033d5(0x183))||'';if(!_0x4bea6c[_0x4033d5(0x238)](_0x526fcf['toLowerCase']()[_0x4033d5(0x1ed)]()))return void(_0x4033d5(0x1a2)!==_0x2c9eee&&(_0x2c9eee=_0x4033d5(0x1a2),_0x5e25dc(_0x1ca96d)));}if(_0x2ac71a(_0x4033d5(0x1ae),_0x4033d5(0x193)))return void(_0x4033d5(0x209)!==_0x2c9eee&&(_0x2c9eee='checkEmail',_0x1aeef9('状态',_0x4033d5(0x1f4))));if(document[_0x4033d5(0x1f5)]('input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]'))return void('loginModal'!==_0x2c9eee&&(_0x2c9eee=_0x4033d5(0x180),_0x28387f()));const _0x4babf1=_0x2ac71a(_0x4033d5(0x19f),_0x4033d5(0x1cf));if(_0x4babf1)return void(_0x4033d5(0x18b)!==_0x2c9eee&&(_0x2c9eee=_0x4033d5(0x18b),_0x2d2b79()));_0x2c9eee=null;},0x2ee);}function _0x1cf15a(_0x4b1c66){const _0x53ee7d=_0x4d52c6,_0x533de5=_0x4b1c66[_0x53ee7d(0x213)](/^(.*?)(\d*)$/);if(!_0x533de5)return{'base':_0x4b1c66,'num':0x0};const _0x5bdecd=_0x533de5[0x1],_0x15a14f=_0x533de5[0x2]?parseInt(_0x533de5[0x2],0xa):0x0;return{'base':_0x5bdecd,'num':_0x15a14f};}async function _0x28387f(){const _0x3681bb=_0x4d52c6,_0x438407=await _0x1f83a5(_0x3681bb(0x17e));if(!_0x438407||_0x438407[_0x3681bb(0x1fd)][_0x3681bb(0x1e2)])return;_0x438407[_0x3681bb(0x1fd)][_0x3681bb(0x1e2)]=_0x3681bb(0x178),_0x1aeef9('状态',_0x3681bb(0x1fc));const _0xcc06fa=await GM_getValue(_0x156ec0['LAST_ACCOUNT']);if(_0x1aeef9(_0x3681bb(0x20f),_0xcc06fa||_0x3681bb(0x21a)),_0xcc06fa)await _0x157cfe(_0xcc06fa,_0x438407);else _0x1aeef9('状态','等待手动输入...'),_0x438407[_0x3681bb(0x172)]('blur',async()=>{const _0x4d20d1=_0x3681bb,_0x33ca68=_0x438407['value'][_0x4d20d1(0x1ed)]()[_0x4d20d1(0x1b4)]('@')[0x0];_0x33ca68&&await _0x157cfe(_0x33ca68,_0x438407);},{'once':!0x0});}async function _0x157cfe(_0x249a82,_0x5a3af5){const _0x9ccd23=_0x4d52c6;if(_0x1aeef9('状态',_0x9ccd23(0x1bd)+_0x249a82),!await _0x415537(_0x249a82))return void _0x1aeef9('状态','前缀无效:\x20'+_0x249a82);if(!await _0x5ae13e(_0x249a82))return void _0x1aeef9('状态',_0x9ccd23(0x216)+_0x249a82);const _0x1f3db8=_0x249a82+_0x9ccd23(0x197);_0x5a3af5[_0x9ccd23(0x1bf)]!==_0x1f3db8&&_0x158634(_0x5a3af5,_0x1f3db8),_0x1aeef9('状态','已填充:\x20'+_0x1f3db8),_0x1aeef9('状态','等待CF验证...');const _0x5b4e3c=await _0x1f83a5('#emailLogin');if(!_0x5b4e3c)return void _0x1aeef9('状态',_0x9ccd23(0x179));const _0x2752d7=new MutationObserver(async _0x4dc900=>{const _0x3edac4=_0x9ccd23;!_0x5b4e3c[_0x3edac4(0x1d5)]&&(_0x2752d7[_0x3edac4(0x194)](),_0x1aeef9('状态',_0x3edac4(0x214)),await _0x52139e(0xfa),_0x5b4e3c['click'](),await _0x573513(_0x249a82,_0x3edac4(0x1dd)));});_0x5b4e3c[_0x9ccd23(0x1d5)]?_0x2752d7['observe'](_0x5b4e3c,{'attributes':!0x0,'attributeFilter':[_0x9ccd23(0x1d5)]}):(_0x1aeef9('状态',_0x9ccd23(0x214)),await _0x52139e(0xfa),_0x5b4e3c['click'](),await _0x573513(_0x249a82,_0x9ccd23(0x1dd)));}async function _0x415537(_0x8449a1){const _0x3f8fa7=_0x4d52c6;console[_0x3f8fa7(0x200)](_0x3f8fa7(0x196)+_0x8449a1+'\x22');try{const _0x3a7d32=await new Promise((_0x5aaa2c,_0x52daf8)=>{const _0x2af162=_0x3f8fa7;GM_xmlhttpRequest({'method':'GET','url':_0x26db26[_0x2af162(0x211)]+'?t='+Date[_0x2af162(0x202)](),'onload':_0x5aaa2c,'onerror':_0x52daf8});});if(0xc8===_0x3a7d32[_0x3f8fa7(0x1be)]){const _0x1a4b93=_0x3a7d32[_0x3f8fa7(0x227)][_0x3f8fa7(0x1b4)]('\x0a')[_0x3f8fa7(0x189)](_0x2615b7=>_0x2615b7[_0x3f8fa7(0x1ed)]())[_0x3f8fa7(0x210)](_0x2d329d=>_0x2d329d&&_0x2d329d[_0x3f8fa7(0x1e7)]>0x0);0x0===_0x1a4b93[_0x3f8fa7(0x1e7)]&&console['error'](_0x3f8fa7(0x1fb));const _0x34c783=_0x1a4b93[_0x3f8fa7(0x22d)](_0x5bc9e7=>_0x5bc9e7[_0x3f8fa7(0x1c7)]('chh')||_0x5bc9e7['startsWith'](_0x3f8fa7(0x1a9))?_0x8449a1===_0x5bc9e7:_0x8449a1[_0x3f8fa7(0x1c7)](_0x5bc9e7));return console[_0x3f8fa7(0x200)](_0x3f8fa7(0x203)+_0x8449a1+_0x3f8fa7(0x1e9)+_0x34c783),_0x34c783;}console[_0x3f8fa7(0x170)]('[验证]\x20获取规则文件失败，服务器状态码:\x20'+_0x3a7d32[_0x3f8fa7(0x1be)]);}catch(_0x2ea789){console[_0x3f8fa7(0x170)](_0x3f8fa7(0x1de),_0x2ea789);}return console[_0x3f8fa7(0x200)](_0x3f8fa7(0x231)),!0x1;}function _0x5ae13e(_0x4f6988){return new Promise(_0xf11315=>{const _0x1511bc=_0x29e7;GM_xmlhttpRequest({'method':_0x1511bc(0x1e6),'url':_0x26db26['backendApiUrl'],'headers':{'Content-Type':'application/json'},'data':JSON[_0x1511bc(0x1a5)]({'mode':_0x1511bc(0x17b),'emailPrefix':_0x4f6988}),'timeout':0x4e20,'onload':function(_0x7fad18){const _0x3df3b8=_0x1511bc;try{_0xf11315(!0x0===JSON['parse'](_0x7fad18[_0x3df3b8(0x227)])[_0x3df3b8(0x1b2)]);}catch(_0x585ef1){_0xf11315(!0x1);}},'onerror':function(_0x2c57e9){_0xf11315(!0x1);},'ontimeout':function(){_0xf11315(!0x1);}});});}async function _0x573513(_0x5b197d,_0x40dc85,_0x2b0b9c=0x3){const _0x40d330=_0x4d52c6;for(let _0x4f053d=0x1;_0x4f053d<=_0x2b0b9c;_0x4f053d++)if(_0x1aeef9('状态','第\x20'+_0x4f053d+'/'+_0x2b0b9c+'\x20次尝试获取登录链接...'),await(async function(){const _0x559034=_0x29e7;try{const _0x1fae66=await new Promise((_0x33562f,_0x4ac1a1)=>{const _0xe9b58c=_0x29e7;GM_xmlhttpRequest({'method':_0xe9b58c(0x1e6),'url':_0x26db26[_0xe9b58c(0x18f)],'headers':{'Content-Type':_0xe9b58c(0x19c)},'data':JSON[_0xe9b58c(0x1a5)]({'mode':'getLink','emailPrefix':_0x5b197d,'source':_0x40dc85}),'timeout':0x3a98,'onload':_0x33562f,'onerror':_0x4ac1a1,'ontimeout':_0x4ac1a1});}),_0x44ac49=JSON[_0x559034(0x1f6)](_0x1fae66[_0x559034(0x227)]);if(_0x44ac49[_0x559034(0x1b2)]&&_0x44ac49['link'])return _0x1aeef9('状态',_0x559034(0x1c4)),void(window[_0x559034(0x1f1)][_0x559034(0x217)]=_0x44ac49[_0x559034(0x1a0)]);_0x1aeef9('状态',_0x559034(0x221)+(_0x44ac49[_0x559034(0x170)]||_0x559034(0x1a7)));}catch(_0x327c7a){throw console[_0x559034(0x170)](_0x559034(0x1df)+_0x4f053d+_0x559034(0x1d7),_0x327c7a),_0x327c7a;}}()))return;else{if(_0x4f053d===_0x2b0b9c)return void _0x1aeef9('状态',_0x40d330(0x1f9));await _0x52139e(0x7d0);}}function _0x158634(_0x5b15b5,_0x5ccdc5){const _0x3d936f=_0x4d52c6;try{return Object[_0x3d936f(0x1f0)](HTMLInputElement[_0x3d936f(0x236)],'value')[_0x3d936f(0x222)][_0x3d936f(0x184)](_0x5b15b5,_0x5ccdc5),[_0x3d936f(0x1c1),_0x3d936f(0x1dc),'blur'][_0x3d936f(0x225)](_0x4ae1aa=>_0x5b15b5['dispatchEvent'](new Event(_0x4ae1aa,{'bubbles':!0x0}))),!0x0;}catch(_0x10fc92){return!0x1;}}function _0x3a4b62(){const _0x46a5f5=_0x4d52c6,_0x580583=new URL(window['location'][_0x46a5f5(0x217)]),_0xafae71=_0x580583[_0x46a5f5(0x207)][_0x46a5f5(0x1f7)](_0x46a5f5(0x1b3));_0xafae71&&GM_setValue(_0x156ec0[_0x46a5f5(0x1a6)],_0xafae71)[_0x46a5f5(0x1aa)](()=>{const _0x18fc03=_0x46a5f5;_0x580583['searchParams'][_0x18fc03(0x239)](_0x18fc03(0x1b3)),history[_0x18fc03(0x1a4)](null,'',_0x580583['toString']());});}}()));

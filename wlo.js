// ==UserScript==
// @name         wLovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.264
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.raoh.space
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/wlo.js
// @downloadURL  https://co.taotile.ltd/wlo.js
// ==/UserScript==
(function(_0x3c5a84,_0x5ab612){const _0x5a0913=_0x733e,_0x3de9e3=_0x3c5a84();while(!![]){try{const _0x5f170d=-parseInt(_0x5a0913(0x165))/0x1*(parseInt(_0x5a0913(0x141))/0x2)+parseInt(_0x5a0913(0x16b))/0x3*(-parseInt(_0x5a0913(0xb0))/0x4)+-parseInt(_0x5a0913(0xd3))/0x5+parseInt(_0x5a0913(0xc6))/0x6*(-parseInt(_0x5a0913(0x10b))/0x7)+-parseInt(_0x5a0913(0xbb))/0x8+-parseInt(_0x5a0913(0x155))/0x9*(parseInt(_0x5a0913(0x15e))/0xa)+parseInt(_0x5a0913(0xbd))/0xb;if(_0x5f170d===_0x5ab612)break;else _0x3de9e3['push'](_0x3de9e3['shift']());}catch(_0x562429){_0x3de9e3['push'](_0x3de9e3['shift']());}}}(_0x4a13,0x7a7e3),(function(){'use strict';const _0x11281b=_0x733e;if(window[_0x11281b(0x146)]!==window[_0x11281b(0xdf)])return;const _0xddc6a8={'ENABLED':!0x0,'REMOTE_URL':_0x11281b(0xe5),'LOCAL_BACKUP_LIST':['']},_0x565318={'NEXT_REFERRAL_LINK':_0x11281b(0x10f),'LAST_ACCOUNT':_0x11281b(0x175)},_0x37b82e={'emailSuffix':_0x11281b(0xd1),'remoteRulesUrl':'https://co.taotile.ltd/akl.txt','backendApiUrl':_0x11281b(0x10c)},_0x5611ad=['guest',_0x11281b(0xdb),_0x11281b(0x127),''];_0x386747(),document['addEventListener'](_0x11281b(0xfd),_0x1f566f);async function _0x1f566f(){const _0x4e40b5=_0x11281b;_0x1b8f56(),await _0x5badb7(0x32);const _0x31d4b0=window[_0x4e40b5(0xec)][_0x4e40b5(0x139)],_0x11f0b6=window[_0x4e40b5(0xec)][_0x4e40b5(0x10e)];if(_0x31d4b0['startsWith'](_0x4e40b5(0x14e))||_0x31d4b0[_0x4e40b5(0xc8)](_0x4e40b5(0x107))||_0x11f0b6[_0x4e40b5(0x132)](_0x4e40b5(0x138)))_0x63301a('状态',_0x4e40b5(0x11b));else{const _0x2dc26d=await GM_getValue(_0x565318[_0x4e40b5(0xc2)],null);if(_0x2dc26d){await GM_setValue(_0x565318[_0x4e40b5(0xc2)],null),_0x63301a('状态',_0x4e40b5(0x15a)),window[_0x4e40b5(0xec)][_0x4e40b5(0x10d)]=_0x2dc26d;return;}const _0x503909=_0x31d4b0==='/'&&!_0x11f0b6;if(_0x503909&&_0xddc6a8[_0x4e40b5(0xeb)]){_0x63301a('状态','根页面，随机跳转...');const _0x1e4472=await _0x256004()||_0xddc6a8[_0x4e40b5(0xcc)];if(_0x1e4472&&_0x1e4472[_0x4e40b5(0xd8)]>0x0){const _0x599125=_0x1e4472[Math['floor'](Math[_0x4e40b5(0xe2)]()*_0x1e4472[_0x4e40b5(0xd8)])];window[_0x4e40b5(0xec)][_0x4e40b5(0x10d)]=_0x599125;return;}}}_0x26a9de(),_0x456141();}const _0x348929=(_0x47dad3,_0x42067a=0x1388)=>new Promise(_0x396957=>{const _0x16fbd9=setInterval(()=>{const _0x4ae28c=_0x733e,_0x4eb530=document[_0x4ae28c(0xfb)](_0x47dad3);_0x4eb530&&(clearInterval(_0x16fbd9),_0x396957(_0x4eb530));},0x64);setTimeout(()=>{clearInterval(_0x16fbd9),_0x396957(null);},_0x42067a);}),_0x5badb7=_0x48b1eb=>new Promise(_0x47e538=>setTimeout(_0x47e538,_0x48b1eb));function _0x1b3ea3(_0x23cc4a,_0x216c85,_0x11519a=![]){const _0x38a89f=_0x11281b,_0x2e3433=document[_0x38a89f(0x122)](_0x23cc4a);for(const _0x4c9833 of _0x2e3433){const _0x2b9fcd=_0x4c9833[_0x38a89f(0x134)][_0x38a89f(0x177)]()[_0x38a89f(0x160)]();if(_0x4c9833[_0x38a89f(0xea)]!==null&&(_0x11519a?_0x2b9fcd===_0x216c85[_0x38a89f(0x160)]():_0x2b9fcd[_0x38a89f(0x132)](_0x216c85[_0x38a89f(0x160)]())))return _0x4c9833;}return null;}async function _0x256004(){const _0x5d9290=_0x11281b;if(!_0xddc6a8[_0x5d9290(0x173)])return null;const _0x739b2a=_0xddc6a8[_0x5d9290(0x173)]+_0x5d9290(0x136)+Date['now']();return new Promise(_0x5b9c8e=>{GM_xmlhttpRequest({'method':'GET','url':_0x739b2a,'onload':function(_0x5275aa){const _0x566ffd=_0x733e;0xc8===_0x5275aa['status']?_0x5b9c8e(_0x5275aa[_0x566ffd(0x105)][_0x566ffd(0xf9)](/^(https?:\/\/\S+)/gm)||[]):_0x5b9c8e(null);},'onerror':function(){_0x5b9c8e(null);}});});}function _0x386747(){const _0x5ed4f2=_0x11281b,_0x2fb2f3=()=>{const _0x131d26=_0x733e,_0x30d280=Math[_0x131d26(0xe2)]();if(_0x30d280<0.6){const _0xda22f3=0x7e+Math['floor'](0x5*Math[_0x131d26(0xe2)]()),_0x4dd137=0x1388+Math[_0x131d26(0x131)](0xbb8*Math[_0x131d26(0xe2)]()),_0x48d643=Math[_0x131d26(0x131)](0x96*Math['random']()),_0x2888aa=_0xda22f3+_0x131d26(0x130)+_0x4dd137+'.'+_0x48d643,_0x1adf6e=Math[_0x131d26(0xe2)]();return _0x1adf6e<0.6?_0x131d26(0x16d)+_0x2888aa+'\x20Safari/537.36':_0x1adf6e<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x2888aa+'\x20Safari/537.36':_0x131d26(0x16d)+_0x2888aa+_0x131d26(0xce)+_0x2888aa;}if(_0x30d280<0.9){const _0x5f9222=0x7f+Math['floor'](0x5*Math[_0x131d26(0xe2)]());return Math['random']()<0.65?_0x131d26(0xcf)+_0x5f9222+_0x131d26(0xfc)+_0x5f9222+'.0':_0x131d26(0x14c)+_0x5f9222+_0x131d26(0xfc)+_0x5f9222+'.0';}{const _0x2c3d09={'18.0':'15_0','17.5':_0x131d26(0x16c),'17.4.1':_0x131d26(0xfa),'16.6':_0x131d26(0xe1)},_0x3cf53a=Object[_0x131d26(0xfe)](_0x2c3d09),_0x55b4bc=_0x3cf53a[Math['floor'](Math[_0x131d26(0xe2)]()*_0x3cf53a['length'])],_0x4108a1=_0x2c3d09[_0x55b4bc];return'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_'+_0x4108a1[_0x131d26(0xd6)](/\./g,'_')+_0x131d26(0xaf)+_0x55b4bc+_0x131d26(0x168);}},_0x252260=_0x2fb2f3(),_0x5ad7c2=unsafeWindow['fetch'];unsafeWindow[_0x5ed4f2(0xb7)]=function(_0x5691ba,_0x56c8dd){const _0x1a0097=_0x5ed4f2;let _0x3c4d58={..._0x56c8dd};try{if(new URL(_0x5691ba,window[_0x1a0097(0xec)]['href'])[_0x1a0097(0xee)][_0x1a0097(0xff)](_0x1a0097(0x174))){const _0xcf5d93=new Headers(_0x3c4d58['headers']);_0xcf5d93[_0x1a0097(0x14b)]('User-Agent',_0x252260),_0x3c4d58[_0x1a0097(0x14f)]=_0xcf5d93;}}catch(_0x28048a){console[_0x1a0097(0xe9)](_0x1a0097(0xef),_0x28048a,_0x56c8dd);}return _0x5ad7c2['call'](this,_0x5691ba,_0x3c4d58);};const _0x211da4=unsafeWindow['XMLHttpRequest'][_0x5ed4f2(0x109)][_0x5ed4f2(0xf8)],_0x2fa163=unsafeWindow[_0x5ed4f2(0xd0)][_0x5ed4f2(0x109)]['send'];unsafeWindow['XMLHttpRequest'][_0x5ed4f2(0x109)]['open']=function(_0x387803,_0x13b7a3,..._0xc662ba){const _0xd6460a=_0x5ed4f2;return this[_0xd6460a(0xbf)]=_0x13b7a3,_0x211da4[_0xd6460a(0xed)](this,[_0x387803,_0x13b7a3,..._0xc662ba]);},unsafeWindow[_0x5ed4f2(0xd0)][_0x5ed4f2(0x109)][_0x5ed4f2(0xd7)]=function(..._0x18a5e3){const _0x56e3d3=_0x5ed4f2;try{this[_0x56e3d3(0xbf)]&&new URL(this[_0x56e3d3(0xbf)],window[_0x56e3d3(0xec)][_0x56e3d3(0x10d)])[_0x56e3d3(0xee)][_0x56e3d3(0xff)](_0x56e3d3(0x174))&&this[_0x56e3d3(0x103)]('User-Agent',_0x252260);}catch(_0x410514){console[_0x56e3d3(0xe9)]('[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:',this[_0x56e3d3(0xbf)],_0x410514);}return _0x2fa163[_0x56e3d3(0xed)](this,_0x18a5e3);};}function _0x1a0ee0(_0x20a01e,_0x45bd85){const _0x5258e8=_0x11281b;let _0x34a360,_0x308122,_0x32017c=![];_0x45bd85[_0x5258e8(0xcd)](_0x5258e8(0xba),_0x5c70ed=>{const _0x5b5beb=_0x5258e8;if(_0x5c70ed[_0x5b5beb(0x145)][_0x5b5beb(0x172)]===_0x5b5beb(0x169))return;_0x32017c=!![],_0x5c70ed[_0x5b5beb(0xb5)]();const _0x4b7f4b=_0x20a01e[_0x5b5beb(0xf6)]();_0x34a360=_0x5c70ed[_0x5b5beb(0x148)]-_0x4b7f4b[_0x5b5beb(0x11c)],_0x308122=_0x5c70ed['clientY']-_0x4b7f4b[_0x5b5beb(0x146)],_0x45bd85[_0x5b5beb(0xf4)]['cursor']=_0x5b5beb(0xe7),document[_0x5b5beb(0x111)][_0x5b5beb(0xf4)][_0x5b5beb(0x14a)]=_0x5b5beb(0xf7),_0x20a01e[_0x5b5beb(0xf4)]['right']='auto',_0x20a01e['style'][_0x5b5beb(0x118)]=_0x5b5beb(0x121),document[_0x5b5beb(0xcd)]('mousemove',_0x3903c1),document[_0x5b5beb(0xcd)](_0x5b5beb(0xb2),_0x4e5204,{'once':!![]});});function _0x3903c1(_0x196571){const _0x434569=_0x5258e8;if(!_0x32017c)return;_0x20a01e['style'][_0x434569(0x11c)]=_0x196571['clientX']-_0x34a360+'px',_0x20a01e['style'][_0x434569(0x146)]=_0x196571['clientY']-_0x308122+'px';}function _0x4e5204(){const _0x137985=_0x5258e8;_0x32017c=![],_0x45bd85[_0x137985(0xf4)][_0x137985(0x13d)]=_0x137985(0xca),document['body'][_0x137985(0xf4)]['userSelect']=_0x137985(0x121),document[_0x137985(0x120)](_0x137985(0x13a),_0x3903c1);}_0x45bd85[_0x5258e8(0xf4)][_0x5258e8(0x13d)]=_0x5258e8(0xca);}function _0x1b8f56(){const _0x41c898=_0x11281b;if(document['getElementById'](_0x41c898(0x117)))return;const _0x562128=document['createElement'](_0x41c898(0x12c));_0x562128['id']=_0x41c898(0x117),_0x562128[_0x41c898(0x124)]=_0x41c898(0x11d);const _0x325af1=_0x562128[_0x41c898(0xfb)](_0x41c898(0x147));_0x1a0ee0(_0x562128,_0x325af1),document[_0x41c898(0x111)][_0x41c898(0xcb)](_0x562128),GM_addStyle(_0x41c898(0x15d)),document[_0x41c898(0x125)](_0x41c898(0xbe))[_0x41c898(0xcd)](_0x41c898(0x142),async()=>{const _0x2b5b54=_0x41c898;await GM_setValue(_0x565318['LAST_ACCOUNT'],null),await GM_setValue(_0x565318[_0x2b5b54(0xc2)],null),alert('所有存储的账户和链接信息已清除，页面将刷新。'),location[_0x2b5b54(0x178)]();});}function _0x63301a(_0x406302,_0x17afc3){const _0xaec9d8=_0x11281b,_0x1e8916={'状态':_0xaec9d8(0xe3),'下一账户':'tm-mgmt-next-user','接力链接':_0xaec9d8(0x133)}[_0x406302];if(_0x1e8916){const _0x4eb260=document['getElementById'](_0x1e8916);if(_0x4eb260)_0x4eb260['textContent']=_0x17afc3;}}async function _0x5cddeb(){const _0x14ade5=_0x11281b;_0x63301a('状态','精确定位引荐按钮...');let _0x465316=null;const _0x9cfcb6=document[_0x14ade5(0x122)](_0x14ade5(0x104));for(const _0x54b632 of _0x9cfcb6){if(_0x14ade5(0x140)===_0x54b632[_0x14ade5(0x134)]['trim']()&&null!==_0x54b632['offsetParent']){_0x465316=_0x54b632;break;}}if(!_0x465316)return void _0x63301a('状态',_0x14ade5(0xb8));_0x63301a('状态',_0x14ade5(0x119));const _0x14631d=Object[_0x14ade5(0xfe)](_0x465316)['find'](_0x2c41fb=>_0x2c41fb['startsWith'](_0x14ade5(0xdd)));if(_0x14631d){const _0x4e8225=_0x465316[_0x14631d];_0x4e8225&&'function'==typeof _0x4e8225['onClick']?_0x4e8225['onClick']():_0x63301a('状态',_0x14ade5(0x162));}else _0x63301a('状态',_0x14ade5(0xe0));const _0x20e1a8=await _0x348929(_0x14ade5(0x16a));if(!_0x20e1a8){_0x63301a('状态',_0x14ade5(0x170));const _0x502b96=await _0x348929(_0x14ade5(0x163),0x3e8);return void(_0x502b96&&_0x502b96[_0x14ade5(0x142)]());}const _0x4d40f3=_0x20e1a8['textContent'][_0x14ade5(0x177)]();if(_0x4d40f3&&_0x4d40f3[_0x14ade5(0x132)](_0x14ade5(0x138))){await GM_setValue(_0x565318['NEXT_REFERRAL_LINK'],_0x4d40f3);const _0x19e8fb=_0x4d40f3['match'](/referralCode=([^&]+)/);_0x19e8fb&&_0x19e8fb[0x1]&&_0x63301a(_0x14ade5(0xb3),_0x19e8fb[0x1][_0x14ade5(0xf3)](0x0,0x7)),_0x63301a('状态',_0x14ade5(0xe6));}const _0x4d6973=await _0x348929(_0x14ade5(0x163));_0x4d6973&&_0x4d6973[_0x14ade5(0x142)]();}async function _0x41a825(_0xa71b1c){const _0x2d8cfa=_0x11281b,_0x56d2d3=(_0xa71b1c['getAttribute']('alt')||'')['trim']();if(!_0x56d2d3||document[_0x2d8cfa(0x111)][_0x2d8cfa(0x11e)][_0x2d8cfa(0xc4)])return;document['body'][_0x2d8cfa(0x11e)][_0x2d8cfa(0xc4)]=_0x2d8cfa(0x12b),_0x63301a('状态',_0x2d8cfa(0x11f)+_0x56d2d3),_0x63301a(_0x2d8cfa(0xb3),_0x2d8cfa(0xc7)),await _0x5badb7(0x5dc),await _0x5cddeb();const {base:_0x118404,num:_0x5cc8f9}=_0xc6f121(_0x56d2d3),_0x22de6d=''+_0x118404+(_0x5cc8f9+0x1);await GM_setValue(_0x565318[_0x2d8cfa(0xb4)],_0x22de6d),_0x63301a(_0x2d8cfa(0x144),_0x22de6d),_0x63301a('状态','已登录:\x20'+_0x56d2d3+',\x20等待手动登出...'),await _0x5badb7(0xfa),document['body']['addEventListener'](_0x2d8cfa(0x142),_0x578716=>{const _0x33f545=_0x2d8cfa,_0x1462a7=_0x578716[_0x33f545(0x145)][_0x33f545(0x164)](_0x33f545(0x128));_0x1462a7&&(_0x578716[_0x33f545(0xb5)](),_0x578716[_0x33f545(0xb1)](),window[_0x33f545(0xec)][_0x33f545(0x178)]());},{'capture':!0x0});}async function _0x259f0a(){const _0x45fa4b=_0x11281b;_0x63301a('状态','主页,\x20等待\x20\x27Design\x20Now\x27...');let _0x1da35a=null;for(let _0x1f0e57=0x0;_0x1f0e57<0x14;_0x1f0e57++){if(_0x1da35a=_0x1b3ea3('button',_0x45fa4b(0x113),!0x1))break;await _0x5badb7(0x1f4);}if(!_0x1da35a)return void _0x63301a('状态','错误:\x2010秒内未找到DesignNow');_0x63301a('状态',_0x45fa4b(0xe4));const _0x4017a9=Object[_0x45fa4b(0xfe)](_0x1da35a)[_0x45fa4b(0xf1)](_0x4c1253=>_0x4c1253[_0x45fa4b(0xc8)](_0x45fa4b(0xdd)));if(_0x4017a9){const _0x1240c5=_0x1da35a[_0x4017a9];_0x1240c5&&_0x45fa4b(0xdc)==typeof _0x1240c5[_0x45fa4b(0x123)]?_0x1240c5['onClick']():_0x63301a('状态',_0x45fa4b(0x110));}else _0x63301a('状态',_0x45fa4b(0x129)),_0x1da35a['click']();}function _0x456141(){let _0x1495ee=null;setInterval(()=>{const _0x4fcb9a=_0x733e,_0x3d7d24=document[_0x4fcb9a(0xfb)](_0x4fcb9a(0x15c))||document[_0x4fcb9a(0xfb)](_0x4fcb9a(0xbc));if(_0x3d7d24){const _0x2f26c0=_0x3d7d24[_0x4fcb9a(0x149)](_0x4fcb9a(0x12d))||'';if(!_0x5611ad[_0x4fcb9a(0x132)](_0x2f26c0[_0x4fcb9a(0x160)]()[_0x4fcb9a(0x177)]()))return void(_0x4fcb9a(0x158)!==_0x1495ee&&(_0x1495ee='loggedIn',_0x41a825(_0x3d7d24)));}if(_0x1b3ea3(_0x4fcb9a(0x156),_0x4fcb9a(0x126)))return void(_0x4fcb9a(0xd5)!==_0x1495ee&&(_0x1495ee=_0x4fcb9a(0xd5),_0x63301a('状态',_0x4fcb9a(0xc0))));if(document[_0x4fcb9a(0xfb)](_0x4fcb9a(0x159)))return void('loginModal'!==_0x1495ee&&(_0x1495ee='loginModal',_0x31d79e()));const _0x716ffd=_0x1b3ea3(_0x4fcb9a(0x112),_0x4fcb9a(0x113));if(_0x716ffd)return void(_0x4fcb9a(0x106)!==_0x1495ee&&(_0x1495ee=_0x4fcb9a(0x106),_0x259f0a()));_0x1495ee=null;},0x2ee);}function _0xc6f121(_0x5e72f6){const _0x12f025=_0x11281b,_0x3a6414=_0x5e72f6[_0x12f025(0xf9)](/^(.*?)(\d*)$/);if(!_0x3a6414)return{'base':_0x5e72f6,'num':0x0};const _0x5d3d5b=_0x3a6414[0x1],_0x3e99d3=_0x3a6414[0x2]?parseInt(_0x3a6414[0x2],0xa):0x0;return{'base':_0x5d3d5b,'num':_0x3e99d3};}async function _0x31d79e(){const _0x1a8d3d=_0x11281b,_0xf1933b=await _0x348929(_0x1a8d3d(0x101));if(!_0xf1933b||_0xf1933b['dataset'][_0x1a8d3d(0x15f)])return;_0xf1933b['dataset']['automationAttached']=_0x1a8d3d(0x12b),_0x63301a('状态','已进入登录/注册弹窗');const _0x149728=await GM_getValue(_0x565318[_0x1a8d3d(0xb4)]);if(_0x63301a(_0x1a8d3d(0x144),_0x149728||_0x1a8d3d(0x114)),_0x149728)await _0x46398e(_0x149728,_0xf1933b);else _0x63301a('状态',_0x1a8d3d(0x167)),_0xf1933b[_0x1a8d3d(0xcd)](_0x1a8d3d(0xb6),async()=>{const _0x59e2ce=_0x1a8d3d,_0x557883=_0xf1933b[_0x59e2ce(0x11a)][_0x59e2ce(0x177)]()[_0x59e2ce(0x137)]('@')[0x0];_0x557883&&await _0x46398e(_0x557883,_0xf1933b);},{'once':!0x0});}async function _0x46398e(_0x39b83d,_0x74ea40){const _0x19d452=_0x11281b;if(_0x63301a('状态',_0x19d452(0x153)+_0x39b83d),!await _0x3c56b6(_0x39b83d))return void _0x63301a('状态',_0x19d452(0x102)+_0x39b83d);if(!await _0x3b3dae(_0x39b83d))return void _0x63301a('状态',_0x19d452(0x12a)+_0x39b83d);const _0x40eec8=_0x39b83d+_0x19d452(0xd1);_0x74ea40[_0x19d452(0x11a)]!==_0x40eec8&&_0x5b3854(_0x74ea40,_0x40eec8),_0x63301a('状态',_0x19d452(0x135)+_0x40eec8),_0x63301a('状态',_0x19d452(0x151));const _0x2bfe6f=await _0x348929('#emailLogin');if(!_0x2bfe6f)return void _0x63301a('状态',_0x19d452(0x15b));const _0x46d909=new MutationObserver(async _0x144533=>{const _0x2770a3=_0x19d452;!_0x2bfe6f[_0x2770a3(0xb9)]&&(_0x46d909[_0x2770a3(0x171)](),_0x63301a('状态',_0x2770a3(0x116)),await _0x5badb7(0xfa),_0x2bfe6f[_0x2770a3(0x142)](),await _0x20a251(_0x39b83d,'Lovart'));});_0x2bfe6f['disabled']?_0x46d909[_0x19d452(0x150)](_0x2bfe6f,{'attributes':!0x0,'attributeFilter':['disabled']}):(_0x63301a('状态',_0x19d452(0x116)),await _0x5badb7(0xfa),_0x2bfe6f[_0x19d452(0x142)](),await _0x20a251(_0x39b83d,_0x19d452(0xc3)));}async function _0x3c56b6(_0x2d8a76){const _0x3920ac=_0x11281b;console[_0x3920ac(0x166)](_0x3920ac(0xde)+_0x2d8a76+'\x22');try{const _0x1b1b4d=await new Promise((_0x42c322,_0x20fa5e)=>{const _0x3562c1=_0x3920ac;GM_xmlhttpRequest({'method':_0x3562c1(0x13c),'url':_0x37b82e['remoteRulesUrl']+'?t='+Date[_0x3562c1(0x12e)](),'onload':_0x42c322,'onerror':_0x20fa5e});});if(0xc8===_0x1b1b4d[_0x3920ac(0x143)]){const _0x5252cb=_0x1b1b4d[_0x3920ac(0x105)]['split']('\x0a')[_0x3920ac(0x10a)](_0x25f497=>_0x25f497[_0x3920ac(0x177)]())[_0x3920ac(0x12f)](_0x5939e6=>_0x5939e6&&_0x5939e6[_0x3920ac(0xd8)]>0x0);0x0===_0x5252cb[_0x3920ac(0xd8)]&&console[_0x3920ac(0xc5)](_0x3920ac(0x16e));const _0x4d98df=_0x5252cb[_0x3920ac(0xf0)](_0x13e497=>_0x13e497[_0x3920ac(0xc8)]('chh')||_0x13e497[_0x3920ac(0xc8)](_0x3920ac(0x108))?_0x2d8a76===_0x13e497:_0x2d8a76[_0x3920ac(0xc8)](_0x13e497));return console[_0x3920ac(0x166)]('[验证]\x20前缀\x20\x22'+_0x2d8a76+'\x22\x20的验证结果为:\x20'+_0x4d98df),_0x4d98df;}console[_0x3920ac(0xc5)]('[验证]\x20获取规则文件失败，服务器状态码:\x20'+_0x1b1b4d['status']);}catch(_0x42b44d){console[_0x3920ac(0xc5)](_0x3920ac(0xe8),_0x42b44d);}return console['log'](_0x3920ac(0xd4)),!0x1;}function _0x3b3dae(_0x1cd653){return new Promise(_0x1c0654=>{const _0x249fbc=_0x733e;GM_xmlhttpRequest({'method':_0x249fbc(0xf2),'url':_0x37b82e[_0x249fbc(0x176)],'headers':{'Content-Type':_0x249fbc(0x16f)},'data':JSON['stringify']({'mode':_0x249fbc(0x154),'emailPrefix':_0x1cd653}),'timeout':0x4e20,'onload':function(_0x33b7df){const _0x1e348b=_0x249fbc;try{_0x1c0654(!0x0===JSON[_0x1e348b(0x13b)](_0x33b7df['responseText'])['success']);}catch(_0x58eca9){_0x1c0654(!0x1);}},'onerror':function(_0x5c971a){_0x1c0654(!0x1);},'ontimeout':function(){_0x1c0654(!0x1);}});});}async function _0x20a251(_0x1defc1,_0x47d11a,_0x39e5ab=0x3){const _0x45096c=_0x11281b;for(let _0xfb19c0=0x1;_0xfb19c0<=_0x39e5ab;_0xfb19c0++)if(_0x63301a('状态','第\x20'+_0xfb19c0+'/'+_0x39e5ab+'\x20次尝试获取登录链接...'),await(async function(){const _0x67b79=_0x733e;try{const _0x240581=await new Promise((_0x3a4857,_0x57f1ea)=>{const _0x314e0a=_0x733e;GM_xmlhttpRequest({'method':_0x314e0a(0xf2),'url':_0x37b82e[_0x314e0a(0x176)],'headers':{'Content-Type':_0x314e0a(0x16f)},'data':JSON['stringify']({'mode':_0x314e0a(0x13f),'emailPrefix':_0x1defc1,'source':_0x47d11a}),'timeout':0x3a98,'onload':_0x3a4857,'onerror':_0x57f1ea,'ontimeout':_0x57f1ea});}),_0x86a1b1=JSON[_0x67b79(0x13b)](_0x240581['responseText']);if(_0x86a1b1['success']&&_0x86a1b1[_0x67b79(0xc1)])return _0x63301a('状态','成功获取链接,\x20跳转中...'),void(window[_0x67b79(0xec)][_0x67b79(0x10d)]=_0x86a1b1[_0x67b79(0xc1)]);_0x63301a('状态',_0x67b79(0x14d)+(_0x86a1b1[_0x67b79(0xc5)]||_0x67b79(0x152)));}catch(_0x47aa9f){throw console[_0x67b79(0xc5)](_0x67b79(0xda)+_0xfb19c0+'\x20次尝试失败:',_0x47aa9f),_0x47aa9f;}}()))return;else{if(_0xfb19c0===_0x39e5ab)return void _0x63301a('状态',_0x45096c(0xd9));await _0x5badb7(0x7d0);}}function _0x5b3854(_0x11a3fb,_0x246c34){const _0x5541fb=_0x11281b;try{return Object[_0x5541fb(0xf5)](HTMLInputElement['prototype'],_0x5541fb(0x11a))[_0x5541fb(0x14b)]['call'](_0x11a3fb,_0x246c34),[_0x5541fb(0x157),'change','blur'][_0x5541fb(0xc9)](_0x2d7712=>_0x11a3fb[_0x5541fb(0xd2)](new Event(_0x2d7712,{'bubbles':!0x0}))),!0x0;}catch(_0x1aaa20){return!0x1;}}function _0x26a9de(){const _0xae86c5=_0x11281b,_0x2bbf5b=new URL(window[_0xae86c5(0xec)][_0xae86c5(0x10d)]),_0x11a5b8=_0x2bbf5b[_0xae86c5(0x100)]['get']('next_account');_0x11a5b8&&GM_setValue(_0x565318[_0xae86c5(0xb4)],_0x11a5b8)['then'](()=>{const _0x2939a1=_0xae86c5;_0x2bbf5b[_0x2939a1(0x100)]['delete'](_0x2939a1(0x13e)),history[_0x2939a1(0x161)](null,'',_0x2bbf5b[_0x2939a1(0x115)]());});}}()));function _0x733e(_0x121e9d,_0x316d14){const _0x4a1387=_0x4a13();return _0x733e=function(_0x733e74,_0xed8b20){_0x733e74=_0x733e74-0xaf;let _0x206222=_0x4a1387[_0x733e74];return _0x206222;},_0x733e(_0x121e9d,_0x316d14);}function _0x4a13(){const _0x33d3ce=['stopPropagation','mouseup','接力链接','LAST_ACCOUNT','preventDefault','blur','fetch','错误:\x20未找到引荐按钮','disabled','mousedown','846808ijObVT','div.bottom-left-user-position\x20img[alt]','36400023AJxacJ','tm-mgmt-clear-storage','_tampermonkeyUrl','等待服务器获取登录链接...','link','NEXT_REFERRAL_LINK','Lovart','logicExecuted','error','1867722SUZGab','N/A','startsWith','forEach','grab','appendChild','LOCAL_BACKUP_LIST','addEventListener','\x20Safari/537.36\x20Edg/','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:','XMLHttpRequest','@hawedu.com','dispatchEvent','2877275EqcOlB','[验证]\x20因发生错误或验证失败，最终返回:\x20false','checkEmail','replace','send','length','Worker网络错误,\x20已达最大重试次数','获取登录链接第\x20','user','function','__reactProps$','[验证]\x20开始验证前缀:\x20\x22','self','错误:\x20非React按钮','13_5','random','tm-mgmt-status','主页,\x20尝试调用函数...','https://co.taotile.ltd/dizhi.txt','已保存接力链接!','grabbing','[验证]\x20验证前缀时发生网络或未知错误:','warn','offsetParent','ENABLED','location','apply','hostname','[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:','some','find','POST','substring','style','getOwnPropertyDescriptor','getBoundingClientRect','none','open','match','14_4_1','querySelector','.0)\x20Gecko/20100101\x20Firefox/','DOMContentLoaded','keys','endsWith','searchParams','input[placeholder=\x22Email\x22]','前缀无效:\x20','setRequestHeader','header\x20div,\x20header\x20button','responseText','homepage','/canvas','cxianyu','prototype','map','7OpNLxC','https://lhou.raoh.space/','href','search','next_referral_link_lovart','错误:\x20DesignNow无点击函数','body','button,\x20a,\x20div','Design\x20Now','无(等待手动输入)','toString','验证通过,\x20点击继续...','tm-mgmt-panel','bottom','按钮已定位,\x20直接调用函数...','value','已在目标页面','left','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','dataset','已登录:\x20','removeEventListener','auto','querySelectorAll','onClick','innerHTML','getElementById','Check\x20your\x20email\x20to\x20continue','avatar','[data-testid=\x22user-profile-logout\x22]','主页,\x20尝试常规点击...','激活失败/超时:\x20','true','div','alt','now','filter','.0.','floor','includes','tm-mgmt-next-link','textContent','已填充:\x20','?t=','split','referralCode=','pathname','mousemove','parse','GET','cursor','next_account','getLink','Invite\x20Friends','1591606dYEDZR','click','status','下一账户','target','top','#tm-mgmt-title','clientX','getAttribute','userSelect','set','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','获取链接失败:\x20','/home','headers','observe','等待CF验证...','未知服务器错误','验证前缀:\x20','activate','1588473uUIthP','div,\x20p,\x20h1,\x20h2','input','loggedIn','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','检测到接力链接...','错误:\x20未找到继续按钮','header\x20img[alt][class*=\x22rounded-full\x22]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','50nnDeeM','automationAttached','toLowerCase','replaceState','错误:\x20按钮无点击函数','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','closest','1vSFyuo','log','等待手动输入...','\x20Safari/605.1.15','BUTTON','section[role=\x22dialog\x22]\x20span.truncate','3giQUuC','14_5','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','application/json','错误:\x20未找到引荐链接','disconnect','tagName','REMOTE_URL','lovart.ai','last_used_account_lovart','backendApiUrl','trim','reload',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','545924gSOkRc'];_0x4a13=function(){return _0x33d3ce;};return _0x4a13();}

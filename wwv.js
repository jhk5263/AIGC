// ==UserScript==
// @name         新智能注册系统1.2
// @namespace    http://tampermonkey.net/
// @version      1.2
// @description  。
// @author       haway
// @match        *://www.topmediai.com/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        unsafeWindow
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_setClipboard
// @grant        GM_addStyle
// @connect      co.taotile.ltd
// @connect      hou.haway.dpdns.org
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/wwv.js
// @downloadURL  https://co.taotile.ltd/wwv.js
// ==/UserScript==
function _0x55fd(_0x55b9b4,_0x4f4421){const _0xa2f9cc=_0xa2f9();return _0x55fd=function(_0x55fd44,_0x4c6c8b){_0x55fd44=_0x55fd44-0x17f;let _0x2b16ef=_0xa2f9cc[_0x55fd44];return _0x2b16ef;},_0x55fd(_0x55b9b4,_0x4f4421);}(function(_0x52eff7,_0x37bce3){const _0x4cfec9=_0x55fd,_0x13412b=_0x52eff7();while(!![]){try{const _0x1bb59f=-parseInt(_0x4cfec9(0x1c3))/0x1*(-parseInt(_0x4cfec9(0x1cd))/0x2)+parseInt(_0x4cfec9(0x1e6))/0x3*(-parseInt(_0x4cfec9(0x1c9))/0x4)+parseInt(_0x4cfec9(0x1cc))/0x5*(-parseInt(_0x4cfec9(0x1e5))/0x6)+-parseInt(_0x4cfec9(0x1e4))/0x7*(parseInt(_0x4cfec9(0x1bd))/0x8)+-parseInt(_0x4cfec9(0x1c2))/0x9+parseInt(_0x4cfec9(0x199))/0xa*(parseInt(_0x4cfec9(0x1c1))/0xb)+parseInt(_0x4cfec9(0x1d1))/0xc;if(_0x1bb59f===_0x37bce3)break;else _0x13412b['push'](_0x13412b['shift']());}catch(_0x5002e0){_0x13412b['push'](_0x13412b['shift']());}}}(_0xa2f9,0x22dbe),(function(){'use strict';const _0x2c97e5=_0x55fd;const _0x20d36c={'password':_0x2c97e5(0x1e0),'emailSuffix':'@zaunist.com','remoteRulesUrl':_0x2c97e5(0x1b2),'backendApiUrl':_0x2c97e5(0x193)};let _0x13fbf8=![],_0x2ce06=null;const _0x29137c=(_0x25b891,_0x107fd6=0x1388)=>new Promise(_0x10d4fc=>{const _0x34b589=setInterval(()=>{const _0x90d193=document['querySelector'](_0x25b891);_0x90d193&&(clearInterval(_0x34b589),_0x10d4fc(_0x90d193));},0x64);setTimeout(()=>{clearInterval(_0x34b589),_0x10d4fc(null);},_0x107fd6);}),_0x81383e=(_0x12f67c,_0x5b8fee)=>{const _0x4e074d=_0x2c97e5;try{return Object['getOwnPropertyDescriptor'](HTMLInputElement[_0x4e074d(0x1a7)],_0x4e074d(0x182))['set'][_0x4e074d(0x1a5)](_0x12f67c,_0x5b8fee),['input',_0x4e074d(0x1b3),_0x4e074d(0x1d5)][_0x4e074d(0x1b9)](_0x4c254c=>_0x12f67c['dispatchEvent'](new Event(_0x4c254c,{'bubbles':!![]}))),!![];}catch(_0x5d8a0e){return![];}},_0x35dd05=async _0xa9ba57=>{const _0x3a5c66=_0x2c97e5;try{const _0x3f7f49=await new Promise((_0x16e86f,_0x240187)=>{const _0x3abae0=_0x55fd;GM_xmlhttpRequest({'method':_0x3abae0(0x1b5),'url':_0x20d36c[_0x3abae0(0x1e9)]+_0x3abae0(0x190)+Date[_0x3abae0(0x18c)](),'onload':_0x16e86f,'onerror':_0x240187});});if(_0x3f7f49[_0x3a5c66(0x197)]===0xc8){const _0x137311=_0x3f7f49[_0x3a5c66(0x18d)][_0x3a5c66(0x184)]('\x0a')[_0x3a5c66(0x1a4)](_0x422329=>_0x422329[_0x3a5c66(0x1a3)]())['filter'](Boolean);return _0x137311[_0x3a5c66(0x1aa)](_0x337291=>{const _0x4d06b0=_0x3a5c66;return _0xa9ba57[_0x4d06b0(0x1a8)](_0x337291);});}}catch(_0x1d606a){}return![];};function _0x33f0d2(_0x49624a,_0x5ceab9=document){const _0x5db756=_0x2c97e5,_0x1f893b=_0x5ceab9[_0x5db756(0x1a1)](_0x5db756(0x1ac));for(const _0x465a55 of _0x1f893b){for(const _0x204dfa of _0x49624a){if(_0x465a55[_0x5db756(0x1bc)][_0x5db756(0x1a3)]()===_0x204dfa)return _0x465a55;}}return null;}const _0x2139ca=_0xd79e7e=>new Promise(_0x2d6398=>setTimeout(_0x2d6398,_0xd79e7e));function _0x1f65bf(_0x4f5104){const _0x3fa9e9=_0x4f5104['match'](/^(.*?)(\d*)$/);if(!_0x3fa9e9)return{'base':_0x4f5104,'num':0x0};const _0x374d8d=_0x3fa9e9[0x1],_0x438059=_0x3fa9e9[0x2]?parseInt(_0x3fa9e9[0x2],0xa):0x0;return{'base':_0x374d8d,'num':_0x438059};}function _0x58bf48(){const _0x51a191=_0x2c97e5;return _0x51a191(0x1e3);}function _0x1980e3(){const _0x3daccb=_0x2c97e5;if(document[_0x3daccb(0x1dd)](_0x3daccb(0x1d3)))return;const _0x555a66=document[_0x3daccb(0x1e1)](_0x3daccb(0x1da));_0x555a66['id']='tm-mgmt-panel',_0x555a66[_0x3daccb(0x1d2)]='\x20<div\x20id=\x22tm-mgmt-title\x22>TopMediai\x20智能脚本\x20v23.13</div>\x20<div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div>\x20<div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>N/A</span></div>\x20<button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除账户\x20&amp;\x20重置</button>\x20',document[_0x3daccb(0x1ca)][_0x3daccb(0x18b)](_0x555a66),GM_addStyle(_0x3daccb(0x1de)),document[_0x3daccb(0x1dd)]('tm-mgmt-clear-storage')[_0x3daccb(0x1e7)](_0x3daccb(0x1e2),async()=>{const _0x12b68d=_0x3daccb;await GM_setValue(_0x58bf48(),null),_0xd53197(_0x12b68d(0x18a),'已清除'),_0xd53197('状态',_0x12b68d(0x1d4)),alert('存储的下一个账户名已清除，页面将刷新。'),location['reload']();});}function _0xd53197(_0x37fdb0,_0x423bce){const _0x360521=_0x2c97e5;let _0x21f081='';switch(_0x37fdb0){case'状态':_0x21f081='tm-mgmt-status';break;case _0x360521(0x18a):_0x21f081='tm-mgmt-next-user';break;}if(_0x21f081){const _0x4b733f=document[_0x360521(0x1dd)](_0x21f081);if(_0x4b733f)_0x4b733f['textContent']=_0x423bce;}}function _0x3e7467(_0x3bd4c4){const _0x3ab8c2=_0x2c97e5;return _0xd53197('状态',_0x3ab8c2(0x1ab)+_0x3bd4c4),new Promise(_0x3a4bcb=>{const _0x21ba93=_0x3ab8c2;GM_xmlhttpRequest({'method':_0x21ba93(0x1cf),'url':_0x20d36c[_0x21ba93(0x189)],'headers':{'Content-Type':_0x21ba93(0x198)},'data':JSON[_0x21ba93(0x1bb)]({'mode':_0x21ba93(0x1f0),'emailPrefix':_0x3bd4c4}),'onload':function(_0x14d618){const _0x1fa0ca=_0x21ba93;try{const _0x58eee2=JSON[_0x1fa0ca(0x18e)](_0x14d618[_0x1fa0ca(0x18d)]);_0x58eee2[_0x1fa0ca(0x19d)]===!![]?(GM_notification({'title':_0x1fa0ca(0x1e8),'text':_0x1fa0ca(0x1ae)+_0x3bd4c4+_0x1fa0ca(0x1c8),'timeout':0x7d0}),_0xd53197('状态',_0x1fa0ca(0x1db)),_0x3a4bcb(!![])):_0x3a4bcb(![]);}catch(_0x217a12){_0x3a4bcb(![]);}},'onerror':function(_0x442511){_0x3a4bcb(![]);}});});}async function _0x3c939b(_0x4bce71){const _0x3e31bd=_0x2c97e5;GM_notification({'title':_0x3e31bd(0x188),'text':_0x3e31bd(0x18f),'timeout':0x2710}),_0xd53197('状态',_0x3e31bd(0x1ec));const _0x460797=0xea60,_0x346b68=0xbb8,_0x3bb1c8=Date[_0x3e31bd(0x18c)](),_0x1b9fc4=()=>new Promise(_0x5a561b=>{const _0x4661cb=_0x3e31bd;GM_xmlhttpRequest({'method':_0x4661cb(0x1cf),'url':_0x20d36c[_0x4661cb(0x189)],'headers':{'Content-Type':'application/json'},'data':JSON['stringify']({'mode':_0x4661cb(0x1b8),'emailPrefix':_0x4bce71,'source':_0x4661cb(0x1b6)}),'timeout':0x2710,'onload':_0x1ead19=>{const _0x43c7c0=_0x4661cb;try{const _0x989a6a=JSON['parse'](_0x1ead19[_0x43c7c0(0x18d)]);_0x5a561b(_0x989a6a['success']&&_0x989a6a[_0x43c7c0(0x186)]?_0x989a6a['code']:null);}catch(_0x2cfcac){_0x5a561b(null);}},'onerror':()=>_0x5a561b(null),'ontimeout':()=>_0x5a561b(null)});});while(Date[_0x3e31bd(0x18c)]()-_0x3bb1c8<_0x460797){const _0x5bf2d7=document['querySelectorAll'](_0x3e31bd(0x1c4));if(_0x5bf2d7[_0x3e31bd(0x1dc)]===0x6){const _0x52b1eb=Math[_0x3e31bd(0x1ad)]((_0x460797-(Date[_0x3e31bd(0x18c)]()-_0x3bb1c8))/0x3e8);_0xd53197('状态',_0x3e31bd(0x1d7)+_0x52b1eb+'s)');const _0x12e0e1=await _0x1b9fc4();if(_0x12e0e1){_0xd53197('状态','成功!\x20正在填充...');for(let _0x3eeb46=0x0;_0x3eeb46<0x6;_0x3eeb46++){_0x81383e(_0x5bf2d7[_0x3eeb46],_0x12e0e1[_0x3eeb46]),await _0x2139ca(0x32);}await _0x2139ca(0xc8);const _0x3b2c26=_0x33f0d2([_0x3e31bd(0x1ef)]);_0x3b2c26&&(_0xd53197('状态','提交验证码...'),_0x3b2c26['click']());return;}}await _0x2139ca(_0x346b68);}_0xd53197('状态',_0x3e31bd(0x1c7)),GM_notification({'title':_0x3e31bd(0x1c6),'text':'在'+_0x460797/0x3e8+_0x3e31bd(0x1d6),'timeout':0x1388});}async function _0x2aa46d(_0x9968d){const _0x32ea9f=_0x2c97e5;_0xd53197('状态',_0x32ea9f(0x196)+_0x9968d);const _0x54c3f3=await _0x35dd05(_0x9968d);if(!_0x54c3f3){_0xd53197('状态',_0x32ea9f(0x19a)+_0x9968d);return;}const _0x5c89b3=await _0x3e7467(_0x9968d);if(!_0x5c89b3){_0xd53197('状态',_0x32ea9f(0x185));return;}_0xd53197('状态',_0x32ea9f(0x181));const _0x13a004=await _0x29137c('.Sign-up-box\x20input[placeholder=\x22Enter\x20registered\x20email\x20account\x22]');if(_0x13a004)_0x81383e(_0x13a004,_0x9968d+_0x20d36c[_0x32ea9f(0x1cb)]);const _0x5ac8f1=await _0x29137c('.Sign-up-box\x20input[placeholder=\x22Password\x22]');if(_0x5ac8f1)_0x81383e(_0x5ac8f1,_0x20d36c[_0x32ea9f(0x1b7)]);await _0x2139ca(0xc8);const _0x105d46=document[_0x32ea9f(0x191)]('.Sign-up-box\x20button\x20span');_0x105d46&&_0x105d46[_0x32ea9f(0x1bc)][_0x32ea9f(0x1a3)]()==='Create\x20account'&&(_0x105d46[_0x32ea9f(0x1d8)]['click'](),_0xd53197('状态',_0x32ea9f(0x1a6)),_0x3c939b(_0x9968d));}async function _0x2d8c14(){const _0x5b9db9=_0x2c97e5;_0xd53197('状态',_0x5b9db9(0x1eb));const _0x45c2ad=await _0x29137c(_0x5b9db9(0x1c5));if(!_0x45c2ad){const _0x2cbda9=document['querySelector'](_0x5b9db9(0x1df));if(_0x2cbda9)_0x2cbda9['click']();await _0x2139ca(0x1f4);const _0x267311=await _0x29137c(_0x5b9db9(0x1c5));if(!_0x267311){_0xd53197('状态',_0x5b9db9(0x1c0));return;}}const _0x5a9066=Array[_0x5b9db9(0x17f)](document['querySelectorAll'](_0x5b9db9(0x1a9)))['find'](_0x141c97=>_0x141c97[_0x5b9db9(0x1bc)][_0x5b9db9(0x1ea)]('@'));if(!_0x5a9066){_0xd53197('状态','无法识别邮箱');return;}const _0x21423d=_0x5a9066[_0x5b9db9(0x1bc)]['trim'](),_0x1d5ccc=_0x21423d[_0x5b9db9(0x184)]('@')[0x0];if(document['body']['dataset'][_0x5b9db9(0x1ba)]===_0x1d5ccc)return;document[_0x5b9db9(0x1ca)][_0x5b9db9(0x1bf)][_0x5b9db9(0x1ba)]=_0x1d5ccc;const {base:_0x495968,num:_0x76b16a}=_0x1f65bf(_0x1d5ccc),_0x1d03be=''+_0x495968+(_0x76b16a+0x1);await GM_setValue(_0x58bf48(),_0x1d03be),_0xd53197(_0x5b9db9(0x18a),_0x1d03be),GM_notification({'title':'任务更新','text':_0x5b9db9(0x1ce)+_0x1d03be+'。\x0a请手动登出以开始下一次注册。'});}async function _0x2850b1(){const _0x12e0c7=_0x2c97e5;if(document[_0x12e0c7(0x191)](_0x12e0c7(0x183))){_0xd53197('状态',_0x12e0c7(0x192)),await _0x2d8c14();return;}if(document[_0x12e0c7(0x191)]('.verification-inputs'))return;const _0x3b3b9d=document[_0x12e0c7(0x191)](_0x12e0c7(0x1d9));if(!_0x3b3b9d){const _0x1b8372=_0x33f0d2(['Log\x20in']);_0x1b8372&&!document[_0x12e0c7(0x191)](_0x12e0c7(0x1a0))&&(_0xd53197('状态',_0x12e0c7(0x1af)),_0x1b8372[_0x12e0c7(0x1e2)]());return;}const _0xe84dc4=_0x3b3b9d[_0x12e0c7(0x191)](_0x12e0c7(0x1a2)),_0x590075=_0x3b3b9d[_0x12e0c7(0x191)](_0x12e0c7(0x195));if(_0xe84dc4&&(!_0x590075||_0x590075['style'][_0x12e0c7(0x19b)]==='none')){const _0x59b771=await _0x29137c(_0x12e0c7(0x19f));if(!_0x59b771)return;if(!_0x59b771[_0x12e0c7(0x1bf)]['logicAttached']){_0x59b771[_0x12e0c7(0x1bf)][_0x12e0c7(0x1ed)]=_0x12e0c7(0x1be),_0xd53197('状态','注册弹窗,\x20准备就绪');const _0x4584be=await GM_getValue(_0x58bf48(),null);_0xd53197(_0x12e0c7(0x18a),_0x4584be||_0x12e0c7(0x19e)),_0x4584be?_0x2aa46d(_0x4584be):(_0xd53197('状态','等待手动输入'),_0x59b771[_0x12e0c7(0x1bf)][_0x12e0c7(0x1d0)]=_0x12e0c7(0x1be));}if(_0x59b771[_0x12e0c7(0x1bf)]['waitingForManual']==='true'){clearTimeout(_0x2ce06);const _0x52c6e2=_0x59b771[_0x12e0c7(0x182)][_0x12e0c7(0x1a3)]();_0x52c6e2!==''&&(_0x2ce06=setTimeout(()=>{const _0xed3be8=_0x12e0c7;_0xd53197('状态',_0xed3be8(0x1b1)+_0x52c6e2);const _0xccf2a4=_0x52c6e2[_0xed3be8(0x184)]('@')[0x0];_0x59b771[_0xed3be8(0x1bf)][_0xed3be8(0x1d0)]=_0xed3be8(0x1ee),_0x2aa46d(_0xccf2a4);},0x3e8));}return;}if(_0x590075&&_0x590075[_0x12e0c7(0x1b4)][_0x12e0c7(0x19b)]!==_0x12e0c7(0x1b0)){const _0x45c6d6=_0x590075[_0x12e0c7(0x191)]('p.desc-txt\x20span');_0x45c6d6&&_0x45c6d6[_0x12e0c7(0x1bc)]['trim']()===_0x12e0c7(0x19c)&&(!_0x45c6d6['dataset'][_0x12e0c7(0x194)]&&(_0xd53197('状态',_0x12e0c7(0x187)),_0x45c6d6['dataset']['clicked']='true',_0x45c6d6[_0x12e0c7(0x1e2)]()));return;}}function _0x51a1a8(){const _0x2baffc=_0x2c97e5,_0x5bb566=new MutationObserver(async()=>{if(_0x13fbf8)return;_0x13fbf8=!![];try{await _0x2850b1();}finally{_0x13fbf8=![];}});_0x5bb566[_0x2baffc(0x180)](document['body'],{'childList':!![],'subtree':!![]});}const _0x3c0ff5=setInterval(()=>{const _0x39803e=_0x2c97e5;document[_0x39803e(0x1ca)]&&(clearInterval(_0x3c0ff5),_0x1980e3(),_0x51a1a8());},0x64);}()));function _0xa2f9(){const _0x563eaf=['observe','填充表单...','value','.login-block','split','激活失败','code','登录弹窗,\x20点击Create\x20account...','正在获取验证码...','backendApiUrl','下一账户','appendChild','now','responseText','parse','来源\x20[TopMediai]','?t=','querySelector','已登录','https://hou.haway.dpdns.org/','clicked','.sign-in-page','开始注册:\x20','status','application/json','546630nPHGyj','前缀无效:\x20','display','Create\x20account','success','无(等待手动输入)','.Sign-up-box\x20input[placeholder=\x22Enter\x20registered\x20email\x20account\x22]','.el-dialog','querySelectorAll','.Sign-up-box','trim','map','call','已提交注册...','prototype','startsWith','.el-dropdown__popper\x20p','some','激活邮箱:\x20','button,\x20a,\x20span','round','邮箱\x20','主页,\x20点击登录...','none','识别到输入:\x20','https://co.taotile.ltd/vur.txt','change','style','GET','TopMediai','password','getCode','forEach','usernameCalculated','stringify','textContent','8zThYtx','true','dataset','无法找到用户菜单','11qsFlMM','2369331iCJcZJ','3gAJEPK','.verification-inputs\x20input','.el-dropdown__popper','操作失败','获取验证码超时!','\x20已激活','8xnFinq','body','emailSuffix','1276915UcfLVK','104798xSysnE','下一个账户将是\x20','POST','waitingForManual','7202316eTjEXa','innerHTML','tm-mgmt-panel','账户已清除,请手动输入','blur','秒内未能获取到验证码。','轮询验证码...(','parentElement','.el-dialog.is-align-center\x20.el-dialog__body','div','激活成功','length','getElementById','\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20}\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x20','.login-block\x20.el-dropdown','aigc123456','createElement','click','last_used_account_topmediai','916475qvFrru','6YZGTBc','29556NIjyjC','addEventListener','邮箱准备就绪','remoteRulesUrl','includes','已登录,\x20准备下一账户','准备获取验证码...','logicAttached','false','Continue','activate','from'];_0xa2f9=function(){return _0x563eaf;};return _0xa2f9();}

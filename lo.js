// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.21
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x4f8f(_0x17d0e2,_0x55606b){const _0x20bcc5=_0x20bc();return _0x4f8f=function(_0x4f8fc7,_0x26a47f){_0x4f8fc7=_0x4f8fc7-0xd8;let _0x44a227=_0x20bcc5[_0x4f8fc7];return _0x44a227;},_0x4f8f(_0x17d0e2,_0x55606b);}function _0x20bc(){const _0x2e1b27=['?t=','\x20Safari/537.36','REMOTE_URL','下一账户','错误:\x20非React按钮','toLowerCase','所有存储的账户和链接信息已清除，页面将刷新。','nodeType','apply','错误:\x20未找到DesignNow按钮','disabled','验证通过,\x20点击继续...','[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:','等待服务器获取登录链接...','XMLHttpRequest','next_referral_link_lovart','automationAttached','@mdzz.uk','endsWith','referralCode=','.0.','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','log','7SmNGpt','获取链接失败:\x20','https://www.lovart.ai?referralCode=XYjhZrf','hostname','length','location','onClick','getLink','https://co.taotile.ltd/akl.txt','last_used_account_lovart','主页,\x20尝试调用函数...','delete','error','textContent','无(等待手动输入)','floor','[data-testid=\x22user-profile-logout\x22]','call','tm-mgmt-status','guest','logicExecuted','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','精确定位引荐按钮...','Worker请求超时','getElementById','warn','已登录:\x20','backendApiUrl','replace','homepage','3485048aeFhaK','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','top','activate','tm-mgmt-next-link','/home','click','N/A','已进入登录/注册弹窗','错误:\x20按钮无点击函数','User-Agent','true','等待手动输入...','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','NEXT_REFERRAL_LINK','LOCAL_BACKUP_LIST','offsetParent','前缀无效:\x20','reload','GET','\x20Safari/537.36\x20Edg/','Design\x20Now','target','#emailLogin','random','__reactProps$','success','open','Check\x20your\x20email\x20to\x20continue','alt','\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20}\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x20','已填充:\x20','split','tm-mgmt-next-user','keys','searchParams','pathname','_tampermonkeyUrl','input','tm-mgmt-panel','\x20Safari/605.1.15','href','header\x20img[alt][class*=\x22rounded-full\x22]','querySelectorAll','Referral\x20Link','from','143ZPVxMX','chh','验证前缀:\x20','5789980Cbaohk','Worker网络错误','prototype','206204YZVhNO','addEventListener','div,\x20p,\x20h1,\x20h2','observe','335565syFIAU','some','检测到接力链接...','dispatchEvent','setRequestHeader','[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:','querySelector','loggedIn','search','25nGSxIx','button,\x20a,\x20div','value','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','15_0','responseText','link','stringify','主页,\x20寻找\x20Design\x20Now','set','forEach','错误:\x20未找到引荐链接','[验证]\x20获取规则文件失败，服务器状态码:\x20','includes','match','13_5','链接响应解析失败','innerHTML','Lovart','now','dataset','replaceState','disconnect','status','LAST_ACCOUNT','preventDefault','.0)\x20Gecko/20100101\x20Firefox/','body','user','function','等待CF验证...','错误:\x20DesignNow无点击函数','loginModal','错误:\x20未找到继续按钮','application/json','headers','错误:\x20未找到引荐按钮','change','/canvas','fetch','2766414vGvJzk','[验证]\x20验证前缀时发生网络或未知错误:','主页,\x20尝试常规点击...','trim','send','按钮已定位,\x20直接调用函数...','filter','getOwnPropertyDescriptor','header\x20div,\x20header\x20button','14_5','428042RUzAKO','3wwBlqn','find','self','then','https://lhou.taotile.ltd/','接力链接','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','getAttribute','TEXT_NODE','blur','[验证]\x20因发生错误或验证失败，最终返回:\x20false','激活失败/超时:\x20','appendChild','lovart.ai',',\x20等待手动登出...','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:','https://co.taotile.ltd/dizhi.txt','POST','toString','已保存接力链接!','startsWith'];_0x20bc=function(){return _0x2e1b27;};return _0x20bc();}(function(_0x25955d,_0xe678c1){const _0x188143=_0x4f8f,_0x8cfcf4=_0x25955d();while(!![]){try{const _0x16abf2=-parseInt(_0x188143(0x13b))/0x1+-parseInt(_0x188143(0x180))/0x2*(-parseInt(_0x188143(0x181))/0x3)+-parseInt(_0x188143(0x141))/0x4*(parseInt(_0x188143(0x14e))/0x5)+parseInt(_0x188143(0x176))/0x6*(parseInt(_0x188143(0xef))/0x7)+parseInt(_0x188143(0x10d))/0x8+-parseInt(_0x188143(0x145))/0x9+-parseInt(_0x188143(0x13e))/0xa;if(_0x16abf2===_0xe678c1)break;else _0x8cfcf4['push'](_0x8cfcf4['shift']());}catch(_0x2324fb){_0x8cfcf4['push'](_0x8cfcf4['shift']());}}}(_0x20bc,0x39bfc),(function(){'use strict';const _0x1c1da1=_0x4f8f;if(window[_0x1c1da1(0x10f)]!==window[_0x1c1da1(0x183)])return;const _0x439b92={'ENABLED':!0x0,'REMOTE_URL':_0x1c1da1(0x191),'LOCAL_BACKUP_LIST':[_0x1c1da1(0xf1),'https://www.lovart.ai?referralCode=358bzLA']},_0x3f2be4={'NEXT_REFERRAL_LINK':_0x1c1da1(0xe7),'LAST_ACCOUNT':_0x1c1da1(0xf8)},_0x2cdecb={'emailSuffix':'@mdzz.uk','remoteRulesUrl':_0x1c1da1(0xf7),'backendApiUrl':_0x1c1da1(0x185)},_0x1335b5=[_0x1c1da1(0x102),_0x1c1da1(0x16a),'avatar',''];_0x27c24d(),document[_0x1c1da1(0x142)]('DOMContentLoaded',_0x4518dd);async function _0x4518dd(){const _0x57a28b=_0x1c1da1;_0x5e9a7e(),await _0x30ed56(0x32);const _0x1631e5=window['location'][_0x57a28b(0x131)],_0x1fd160=window[_0x57a28b(0xf4)][_0x57a28b(0x14d)];if(_0x1631e5[_0x57a28b(0x195)](_0x57a28b(0x112))||_0x1631e5[_0x57a28b(0x195)](_0x57a28b(0x174))||_0x1fd160['includes'](_0x57a28b(0xeb)))_0x5c0040('状态','已在目标页面');else{const _0x5b14aa=await GM_getValue(_0x3f2be4[_0x57a28b(0x11b)],null);if(_0x5b14aa){await GM_setValue(_0x3f2be4['NEXT_REFERRAL_LINK'],null),_0x5c0040('状态',_0x57a28b(0x147)),window[_0x57a28b(0xf4)][_0x57a28b(0x136)]=_0x5b14aa;return;}const _0x2506d8=_0x1631e5==='/'&&!_0x1fd160;if(_0x2506d8&&_0x439b92['ENABLED']){_0x5c0040('状态','根页面，随机跳转...');const _0x579b42=await _0x59000d()||_0x439b92[_0x57a28b(0x11c)];if(_0x579b42&&_0x579b42[_0x57a28b(0xf3)]>0x0){const _0x3c56c2=_0x579b42[Math['floor'](Math[_0x57a28b(0x125)]()*_0x579b42[_0x57a28b(0xf3)])];window[_0x57a28b(0xf4)][_0x57a28b(0x136)]=_0x3c56c2;return;}}}_0x49b00c(),_0x882314();}const _0x322984=(_0x289470,_0x4a7e71=0x1388)=>new Promise(_0x1f19a9=>{const _0x52afa4=setInterval(()=>{const _0x5ab1a5=_0x4f8f,_0x1ee9b5=document[_0x5ab1a5(0x14b)](_0x289470);_0x1ee9b5&&(clearInterval(_0x52afa4),_0x1f19a9(_0x1ee9b5));},0x64);setTimeout(()=>{clearInterval(_0x52afa4),_0x1f19a9(null);},_0x4a7e71);}),_0x30ed56=_0xc13c78=>new Promise(_0x397e25=>setTimeout(_0x397e25,_0xc13c78));function _0x24bd64(_0x2a70d8,_0x218dd9,_0x1e993f=![]){const _0x26a3e7=_0x1c1da1,_0x54c5b9=document[_0x26a3e7(0x138)](_0x2a70d8);for(const _0x4cc14d of _0x54c5b9){const _0x1899a3=_0x4cc14d[_0x26a3e7(0xfc)][_0x26a3e7(0x179)]()[_0x26a3e7(0xdd)]();if(_0x1e993f?_0x1899a3===_0x218dd9['toLowerCase']():_0x1899a3['includes'](_0x218dd9[_0x26a3e7(0xdd)]()))return _0x4cc14d;}return null;}async function _0x59000d(){const _0x443104=_0x1c1da1;if(!_0x439b92[_0x443104(0xda)])return null;const _0x5c7070=_0x439b92['REMOTE_URL']+_0x443104(0xd8)+Date[_0x443104(0x161)]();return new Promise(_0x2469cb=>{const _0x136dac=_0x443104;GM_xmlhttpRequest({'method':_0x136dac(0x120),'url':_0x5c7070,'onload':function(_0x1b14b6){const _0x5b5cff=_0x136dac;0xc8===_0x1b14b6[_0x5b5cff(0x165)]?_0x2469cb(_0x1b14b6[_0x5b5cff(0x153)][_0x5b5cff(0x15c)](/^(https?:\/\/\S+)/gm)||[]):_0x2469cb(null);},'onerror':function(){_0x2469cb(null);}});});}function _0x27c24d(){const _0x47d863=_0x1c1da1,_0x3235a7=()=>{const _0x414c2f=_0x4f8f,_0x27b8bb=Math[_0x414c2f(0x125)]();if(_0x27b8bb<0.6){const _0x5beadf=0x7e+Math[_0x414c2f(0xfe)](Math[_0x414c2f(0x125)]()*0x5),_0x41aa0a=0x1388+Math[_0x414c2f(0xfe)](Math[_0x414c2f(0x125)]()*0xbb8),_0x3a6ce2=Math[_0x414c2f(0xfe)](Math[_0x414c2f(0x125)]()*0x96),_0x1a0d6c=_0x5beadf+_0x414c2f(0xec)+_0x41aa0a+'.'+_0x3a6ce2,_0x3f069d=Math[_0x414c2f(0x125)]();if(_0x3f069d<0.6)return _0x414c2f(0x104)+_0x1a0d6c+'\x20Safari/537.36';else return _0x3f069d<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x1a0d6c+_0x414c2f(0xd9):_0x414c2f(0x104)+_0x1a0d6c+_0x414c2f(0x121)+_0x1a0d6c;}else{if(_0x27b8bb<0.9){const _0x10265b=0x7f+Math[_0x414c2f(0xfe)](Math['random']()*0x5),_0x40213a=Math['random']();return _0x40213a<0.65?_0x414c2f(0x190)+_0x10265b+_0x414c2f(0x168)+_0x10265b+'.0':_0x414c2f(0x11a)+_0x10265b+'.0)\x20Gecko/20100101\x20Firefox/'+_0x10265b+'.0';}else{const _0x119502={'18.0':_0x414c2f(0x152),'17.5':_0x414c2f(0x17f),'17.4.1':'14_4_1','16.6':_0x414c2f(0x15d)},_0x46f0ae=Object['keys'](_0x119502),_0x3e10da=_0x46f0ae[Math['floor'](Math[_0x414c2f(0x125)]()*_0x46f0ae[_0x414c2f(0xf3)])],_0x3f3259=_0x119502[_0x3e10da];return _0x414c2f(0x151)+_0x3f3259[_0x414c2f(0x10b)](/\./g,'_')+')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/'+_0x3e10da+_0x414c2f(0x135);}}},_0x5f05c0=unsafeWindow[_0x47d863(0x175)];unsafeWindow[_0x47d863(0x175)]=function(_0x202232,_0x10939a){const _0x36cd17=_0x47d863;let _0x3c3ca4={..._0x10939a};try{if(new URL(_0x202232,window['location'][_0x36cd17(0x136)])[_0x36cd17(0xf2)][_0x36cd17(0xea)](_0x36cd17(0x18e))){const _0x522ed7=new Headers(_0x3c3ca4[_0x36cd17(0x171)]);_0x522ed7[_0x36cd17(0x157)](_0x36cd17(0x117),_0x3235a7()),_0x3c3ca4[_0x36cd17(0x171)]=_0x522ed7;}}catch(_0x45d96d){console[_0x36cd17(0x108)](_0x36cd17(0xe4),_0x202232,_0x45d96d);}return _0x5f05c0[_0x36cd17(0x100)](this,_0x202232,_0x3c3ca4);};const _0x2a2548=unsafeWindow[_0x47d863(0xe6)][_0x47d863(0x140)][_0x47d863(0x128)],_0x1dee76=unsafeWindow['XMLHttpRequest']['prototype']['send'];unsafeWindow[_0x47d863(0xe6)][_0x47d863(0x140)]['open']=function(_0x4ca37c,_0x2553cf,..._0x20a14b){const _0x40f66e=_0x47d863;return this[_0x40f66e(0x132)]=_0x2553cf,_0x2a2548[_0x40f66e(0xe0)](this,[_0x4ca37c,_0x2553cf,..._0x20a14b]);},unsafeWindow[_0x47d863(0xe6)][_0x47d863(0x140)][_0x47d863(0x17a)]=function(..._0x545467){const _0x45c40f=_0x47d863;try{this[_0x45c40f(0x132)]&&new URL(this[_0x45c40f(0x132)],window['location']['href'])['hostname'][_0x45c40f(0xea)](_0x45c40f(0x18e))&&this[_0x45c40f(0x149)](_0x45c40f(0x117),_0x3235a7());}catch(_0x54c599){console[_0x45c40f(0x108)](_0x45c40f(0x14a),this[_0x45c40f(0x132)],_0x54c599);}return _0x1dee76[_0x45c40f(0xe0)](this,_0x545467);};}function _0x5e9a7e(){const _0x40e4ef=_0x1c1da1;if(document[_0x40e4ef(0x107)](_0x40e4ef(0x134)))return;const _0x18b9b0=document['createElement']('div');_0x18b9b0['id']='tm-mgmt-panel',_0x18b9b0[_0x40e4ef(0x15f)]=_0x40e4ef(0x10e),document[_0x40e4ef(0x169)][_0x40e4ef(0x18d)](_0x18b9b0),GM_addStyle(_0x40e4ef(0x12b)),document['getElementById']('tm-mgmt-clear-storage')[_0x40e4ef(0x142)](_0x40e4ef(0x113),async()=>{const _0x24be9f=_0x40e4ef;await GM_setValue(_0x3f2be4[_0x24be9f(0x166)],null),await GM_setValue(_0x3f2be4[_0x24be9f(0x11b)],null),alert(_0x24be9f(0xde)),location[_0x24be9f(0x11f)]();});}function _0x5c0040(_0x44f48e,_0x34449e){const _0x52d466=_0x1c1da1,_0x41abdf={'状态':_0x52d466(0x101),'下一账户':_0x52d466(0x12e),'接力链接':_0x52d466(0x111)}[_0x44f48e];if(_0x41abdf){const _0x4b405f=document['getElementById'](_0x41abdf);if(_0x4b405f)_0x4b405f[_0x52d466(0xfc)]=_0x34449e;}}async function _0x556814(){const _0x27262c=_0x1c1da1;_0x5c0040('状态',_0x27262c(0x105));let _0x35b38b=null;const _0x2dc7d2=document[_0x27262c(0x138)](_0x27262c(0x17e));for(const _0x92ba00 of _0x2dc7d2){const _0x150285=Array[_0x27262c(0x13a)](_0x92ba00['childNodes'])[_0x27262c(0x146)](_0x5cf77b=>_0x5cf77b[_0x27262c(0xdf)]===Node[_0x27262c(0x189)]&&_0x5cf77b[_0x27262c(0xfc)][_0x27262c(0x179)]()===_0x27262c(0x139));if(_0x150285&&_0x92ba00[_0x27262c(0x11d)]!==null){_0x35b38b=_0x92ba00;break;}}if(!_0x35b38b){_0x5c0040('状态',_0x27262c(0x172));return;}_0x5c0040('状态',_0x27262c(0x17b));const _0x4f7899=Object[_0x27262c(0x12f)](_0x35b38b)[_0x27262c(0x182)](_0x2797a4=>_0x2797a4[_0x27262c(0x195)](_0x27262c(0x126)));if(_0x4f7899){const _0x4bb84b=_0x35b38b[_0x4f7899];if(_0x4bb84b&&typeof _0x4bb84b['onClick']===_0x27262c(0x16b))_0x4bb84b[_0x27262c(0xf5)]();else{_0x5c0040('状态',_0x27262c(0x116));return;}}else{_0x5c0040('状态',_0x27262c(0xdc));return;}const _0x554b57=await _0x322984('section[role=\x22dialog\x22]\x20span.truncate');if(!_0x554b57){_0x5c0040('状态',_0x27262c(0x159));const _0x512738=await _0x322984(_0x27262c(0x187),0x3e8);if(_0x512738)_0x512738[_0x27262c(0x113)]();return;}const _0x2169b3=_0x554b57[_0x27262c(0xfc)][_0x27262c(0x179)]();if(_0x2169b3&&_0x2169b3[_0x27262c(0x15b)]('referralCode=')){await GM_setValue(_0x3f2be4[_0x27262c(0x11b)],_0x2169b3);const _0x4b1575=_0x2169b3['match'](/referralCode=([^&]+)/);_0x4b1575&&_0x4b1575[0x1]&&_0x5c0040(_0x27262c(0x186),_0x4b1575[0x1]['substring'](0x0,0x7)),_0x5c0040('状态',_0x27262c(0x194));}const _0x20e495=await _0x322984('section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]');if(_0x20e495)_0x20e495[_0x27262c(0x113)]();}async function _0x1dc9de(_0x39f073){const _0x162318=_0x1c1da1,_0x120e44=(_0x39f073[_0x162318(0x188)](_0x162318(0x12a))||'')['trim']();if(!_0x120e44||document[_0x162318(0x169)][_0x162318(0x162)]['logicExecuted'])return;document['body']['dataset'][_0x162318(0x103)]=_0x162318(0x118),_0x5c0040('状态',_0x162318(0x109)+_0x120e44),_0x5c0040('接力链接',_0x162318(0x114)),await _0x30ed56(0x5dc),await _0x556814();const {base:_0x20884e,num:_0xeb2447}=_0x1c9994(_0x120e44),_0x240cf1=''+_0x20884e+(_0xeb2447+0x1);await GM_setValue(_0x3f2be4['LAST_ACCOUNT'],_0x240cf1),_0x5c0040(_0x162318(0xdb),_0x240cf1),_0x5c0040('状态','已登录:\x20'+_0x120e44+_0x162318(0x18f)),await _0x30ed56(0xfa),document[_0x162318(0x169)][_0x162318(0x142)]('click',_0x35cc6b=>{const _0x2e9f32=_0x162318,_0x573432=_0x35cc6b[_0x2e9f32(0x123)]['closest'](_0x2e9f32(0xff));_0x573432&&(_0x35cc6b[_0x2e9f32(0x167)](),_0x35cc6b['stopPropagation'](),window[_0x2e9f32(0xf4)][_0x2e9f32(0x11f)]());},{'capture':!![]});}async function _0x1a74c7(){const _0x3bcd67=_0x1c1da1;_0x5c0040('状态',_0x3bcd67(0x156));const _0xf120bd=_0x24bd64('button',_0x3bcd67(0x122));if(!_0xf120bd){_0x5c0040('状态',_0x3bcd67(0xe1));return;}_0x5c0040('状态',_0x3bcd67(0xf9));const _0x2b16c7=Object['keys'](_0xf120bd)[_0x3bcd67(0x182)](_0x2d7b04=>_0x2d7b04[_0x3bcd67(0x195)](_0x3bcd67(0x126)));if(_0x2b16c7){const _0x55bc19=_0xf120bd[_0x2b16c7];_0x55bc19&&typeof _0x55bc19[_0x3bcd67(0xf5)]==='function'?_0x55bc19['onClick']():_0x5c0040('状态',_0x3bcd67(0x16d));}else _0x5c0040('状态',_0x3bcd67(0x178)),_0xf120bd['click']();}function _0x882314(){let _0xce18ce=null;setInterval(()=>{const _0x104723=_0x4f8f,_0x2a4f18=document[_0x104723(0x14b)](_0x104723(0x137))||document[_0x104723(0x14b)]('div.bottom-left-user-position\x20img[alt]');if(_0x2a4f18){const _0x47322b=(_0x2a4f18[_0x104723(0x188)](_0x104723(0x12a))||'')['toLowerCase']()[_0x104723(0x179)]();if(!_0x1335b5[_0x104723(0x15b)](_0x47322b)){_0xce18ce!=='loggedIn'&&(_0xce18ce=_0x104723(0x14c),_0x1dc9de(_0x2a4f18));return;}}if(_0x24bd64(_0x104723(0x143),_0x104723(0x129))){_0xce18ce!=='checkEmail'&&(_0xce18ce='checkEmail',_0x5c0040('状态',_0x104723(0xe5)));return;}if(document[_0x104723(0x14b)]('input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]')){_0xce18ce!==_0x104723(0x16e)&&(_0xce18ce=_0x104723(0x16e),_0x385c76());return;}const _0x32c89c=_0x24bd64(_0x104723(0x14f),_0x104723(0x122));if(_0x32c89c){_0xce18ce!==_0x104723(0x10c)&&(_0xce18ce=_0x104723(0x10c),_0x1a74c7());return;}_0xce18ce=null;},0x2ee);}function _0x1c9994(_0xc652ff){const _0x401bd7=_0x1c1da1,_0x32662a=_0xc652ff[_0x401bd7(0x15c)](/^(.*?)(\d*)$/);if(!_0x32662a)return{'base':_0xc652ff,'num':0x0};const _0x15ead5=_0x32662a[0x1],_0x4c318a=_0x32662a[0x2]?parseInt(_0x32662a[0x2],0xa):0x0;return{'base':_0x15ead5,'num':_0x4c318a};}async function _0x385c76(){const _0x2d7c90=_0x1c1da1,_0x3577d6=await _0x322984('input[placeholder=\x22Email\x22]');if(!_0x3577d6||_0x3577d6[_0x2d7c90(0x162)][_0x2d7c90(0xe8)])return;_0x3577d6[_0x2d7c90(0x162)][_0x2d7c90(0xe8)]=_0x2d7c90(0x118),_0x5c0040('状态',_0x2d7c90(0x115));const _0x8de48f=await GM_getValue(_0x3f2be4[_0x2d7c90(0x166)]);_0x5c0040(_0x2d7c90(0xdb),_0x8de48f||_0x2d7c90(0xfd)),_0x8de48f?await _0x4cf224(_0x8de48f,_0x3577d6):(_0x5c0040('状态',_0x2d7c90(0x119)),_0x3577d6[_0x2d7c90(0x142)](_0x2d7c90(0x18a),async()=>{const _0x4acaa3=_0x2d7c90,_0x46b742=_0x3577d6['value'][_0x4acaa3(0x179)](),_0x8d71d9=_0x46b742['split']('@')[0x0];if(_0x8d71d9)await _0x4cf224(_0x8d71d9,_0x3577d6);},{'once':!0x0}));}async function _0x4cf224(_0x3f7ebb,_0x72f8f1){const _0x5536f0=_0x1c1da1;_0x5c0040('状态',_0x5536f0(0x13d)+_0x3f7ebb);if(!await _0x1ecc7b(_0x3f7ebb)){_0x5c0040('状态',_0x5536f0(0x11e)+_0x3f7ebb);return;}const _0x16ea9e=await _0x224004(_0x3f7ebb);if(!_0x16ea9e){_0x5c0040('状态',_0x5536f0(0x18c)+_0x3f7ebb);return;}const _0x2e19a8=_0x3f7ebb+_0x5536f0(0xe9);if(_0x72f8f1[_0x5536f0(0x150)]!==_0x2e19a8)_0x25aed2(_0x72f8f1,_0x2e19a8);_0x5c0040('状态',_0x5536f0(0x12c)+_0x2e19a8),_0x5c0040('状态',_0x5536f0(0x16c));const _0x1345ed=await _0x322984(_0x5536f0(0x124));if(!_0x1345ed){_0x5c0040('状态',_0x5536f0(0x16f));return;}const _0x5d1bfd=new MutationObserver(async _0x2748f9=>{const _0x50f95d=_0x5536f0;!_0x1345ed[_0x50f95d(0xe2)]&&(_0x5d1bfd[_0x50f95d(0x164)](),_0x5c0040('状态',_0x50f95d(0xe3)),await _0x30ed56(0xfa),_0x1345ed[_0x50f95d(0x113)](),_0x46a01f(_0x3f7ebb,_0x50f95d(0x160)));});!_0x1345ed['disabled']?(_0x5c0040('状态',_0x5536f0(0xe3)),await _0x30ed56(0xfa),_0x1345ed[_0x5536f0(0x113)](),_0x46a01f(_0x3f7ebb,'Lovart')):_0x5d1bfd[_0x5536f0(0x144)](_0x1345ed,{'attributes':!0x0,'attributeFilter':[_0x5536f0(0xe2)]});}async function _0x1ecc7b(_0x594929){const _0x5669aa=_0x1c1da1;console['log']('[验证]\x20开始验证前缀:\x20\x22'+_0x594929+'\x22');try{const _0x11e97e=await new Promise((_0x2b84c3,_0x3dd01c)=>{const _0x361a0c=_0x4f8f;GM_xmlhttpRequest({'method':_0x361a0c(0x120),'url':_0x2cdecb['remoteRulesUrl']+_0x361a0c(0xd8)+Date[_0x361a0c(0x161)](),'onload':_0x2b84c3,'onerror':_0x3dd01c});});if(_0x11e97e[_0x5669aa(0x165)]===0xc8){const _0x5b1095=_0x11e97e[_0x5669aa(0x153)][_0x5669aa(0x12d)]('\x0a')['map'](_0x40c0b9=>_0x40c0b9['trim']())[_0x5669aa(0x17c)](_0x221543=>_0x221543&&_0x221543[_0x5669aa(0xf3)]>0x0);console[_0x5669aa(0xee)]('[验证]\x20从服务器加载并过滤后的规则列表:',_0x5b1095);_0x5b1095[_0x5669aa(0xf3)]===0x0&&console[_0x5669aa(0xfb)](_0x5669aa(0xed));const _0x4b7b4f=_0x5b1095[_0x5669aa(0x146)](_0x8ee871=>{const _0x16ed6f=_0x5669aa;if(_0x8ee871[_0x16ed6f(0x195)](_0x16ed6f(0x13c))||_0x8ee871[_0x16ed6f(0x195)]('cxianyu'))return _0x594929===_0x8ee871;return _0x594929[_0x16ed6f(0x195)](_0x8ee871);});return console[_0x5669aa(0xee)]('[验证]\x20前缀\x20\x22'+_0x594929+'\x22\x20的验证结果为:\x20'+_0x4b7b4f),_0x4b7b4f;}else console[_0x5669aa(0xfb)](_0x5669aa(0x15a)+_0x11e97e['status']);}catch(_0x591972){console[_0x5669aa(0xfb)](_0x5669aa(0x177),_0x591972);}return console['log'](_0x5669aa(0x18b)),![];}function _0x224004(_0x850267){return new Promise(_0x3edab7=>{const _0x49791c=_0x4f8f;GM_xmlhttpRequest({'method':_0x49791c(0x192),'url':_0x2cdecb[_0x49791c(0x10a)],'headers':{'Content-Type':_0x49791c(0x170)},'data':JSON[_0x49791c(0x155)]({'mode':_0x49791c(0x110),'emailPrefix':_0x850267}),'timeout':0x4e20,'onload':function(_0xd8abe5){const _0x206598=_0x49791c;try{_0x3edab7(!0x0===JSON['parse'](_0xd8abe5[_0x206598(0x153)])[_0x206598(0x127)]);}catch(_0x54e5c2){_0x3edab7(!0x1);}},'onerror':function(_0x3c5b0e){_0x3edab7(!0x1);},'ontimeout':function(){_0x3edab7(!0x1);}});});}function _0x46a01f(_0x3eca3b,_0x471448){const _0x5bb090=_0x1c1da1;_0x5c0040('状态',_0x5bb090(0xe5)),GM_xmlhttpRequest({'method':_0x5bb090(0x192),'url':_0x2cdecb[_0x5bb090(0x10a)],'headers':{'Content-Type':_0x5bb090(0x170)},'data':JSON[_0x5bb090(0x155)]({'mode':_0x5bb090(0xf6),'emailPrefix':_0x3eca3b,'source':_0x471448}),'timeout':0xafc8,'onload':function(_0x1a8b76){const _0x4f9156=_0x5bb090;try{const _0x14a68d=JSON['parse'](_0x1a8b76['responseText']);_0x14a68d[_0x4f9156(0x127)]&&_0x14a68d[_0x4f9156(0x154)]?window[_0x4f9156(0xf4)]['href']=_0x14a68d[_0x4f9156(0x154)]:_0x5c0040('状态',_0x4f9156(0xf0)+_0x14a68d[_0x4f9156(0xfb)]);}catch(_0xd7d5a2){_0x5c0040('状态',_0x4f9156(0x15e));}},'onerror':_0x1ce025=>{const _0x3d77ce=_0x5bb090;_0x5c0040('状态',_0x3d77ce(0x13f));},'ontimeout':()=>{const _0x3b1308=_0x5bb090;_0x5c0040('状态',_0x3b1308(0x106));}});}function _0x25aed2(_0x336a56,_0x3228ec){const _0x49b534=_0x1c1da1;try{return Object[_0x49b534(0x17d)](HTMLInputElement['prototype'],'value')[_0x49b534(0x157)][_0x49b534(0x100)](_0x336a56,_0x3228ec),[_0x49b534(0x133),_0x49b534(0x173),_0x49b534(0x18a)][_0x49b534(0x158)](_0x12523a=>_0x336a56[_0x49b534(0x148)](new Event(_0x12523a,{'bubbles':!0x0}))),!0x0;}catch(_0x456ba2){return!0x1;}}function _0x49b00c(){const _0x53c390=_0x1c1da1,_0x4d4277=new URL(window[_0x53c390(0xf4)][_0x53c390(0x136)]),_0x180325=_0x4d4277['searchParams']['get']('next_account');_0x180325&&GM_setValue(_0x3f2be4[_0x53c390(0x166)],_0x180325)[_0x53c390(0x184)](()=>{const _0x361d87=_0x53c390;_0x4d4277[_0x361d87(0x130)][_0x361d87(0xfa)]('next_account'),history[_0x361d87(0x163)](null,'',_0x4d4277[_0x361d87(0x193)]());});}}()));

// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.261
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x53e6(){const _0xd5285c=['stopPropagation','trim','[验证]\x20获取规则文件失败，服务器状态码:\x20','user','userSelect','hostname','前缀无效:\x20','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','668908xgDsHw','mousemove','textContent','activate','pathname','tm-mgmt-next-link','querySelector','[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:','根页面，随机跳转...','按钮已定位,\x20直接调用函数...','错误:\x20非React按钮','clientY','6649254BifEyH','loggedIn','automationAttached','LAST_ACCOUNT','getOwnPropertyDescriptor','button,\x20a,\x20div','cursor','已在目标页面','href',',\x20等待手动登出...','querySelectorAll','replace','set','appendChild','function','offsetParent','stringify','4236945EiGOGr','.0)\x20Gecko/20100101\x20Firefox/','\x22\x20的验证结果为:\x20','检测到接力链接...','header\x20div,\x20header\x20button','ENABLED','User-Agent','验证前缀:\x20','random','keys','/home','getElementById','checkEmail','tm-mgmt-next-user','click','responseText','some','childNodes','replaceState','__reactProps$',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','dataset','call','input','toLowerCase','等待服务器获取登录链接...','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:','match','已保存接力链接!','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','\x20次尝试获取登录链接...','4806579cpUPpE','success','referralCode=','14_5','includes','from','?t=','BUTTON','/canvas','setRequestHeader','\x20Safari/537.36','observe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','lovart.ai','[验证]\x20验证前缀时发生网络或未知错误:','guest','nodeType','style','filter','https://lhou.taotile.ltd/','Design\x20Now','接力链接','错误:\x20未找到继续按钮','Check\x20your\x20email\x20to\x20continue','prototype','tm-mgmt-panel','remoteRulesUrl','homepage','DOMContentLoaded','错误:\x20未找到引荐链接','alt','body','location','等待手动输入...','startsWith','已登录:\x20','POST','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:','下一账户','reload','innerHTML','parse','div','chh','15_0','#tm-mgmt-title','link','bottom','send','substring','forEach','onClick','主页,\x20尝试常规点击...','headers','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','error','change','Worker网络错误,\x20已达最大重试次数','section[role=\x22dialog\x22]\x20span.truncate','https://co.taotile.ltd/akl.txt','17773553PpZfca','884958CroLfo','open','logicExecuted','已填充:\x20','true','NEXT_REFERRAL_LINK','disabled','dispatchEvent','主页,\x20等待\x20\x27Design\x20Now\x27...','\x20次尝试失败:','left','所有存储的账户和链接信息已清除，页面将刷新。','removeEventListener','[验证]\x20前缀\x20\x22','backendApiUrl','精确定位引荐按钮...','floor','grab','getBoundingClientRect','8QVbxNE','getAttribute','获取链接失败:\x20','https://co.taotile.ltd/dizhi.txt','https://www.lovart.ai?referralCode=VbvJyyD','header\x20img[alt][class*=\x22rounded-full\x22]','REMOTE_URL','错误:\x20DesignNow无点击函数','成功获取链接,\x20跳转中...','length','激活失败/超时:\x20','none','fetch','button','N/A','target','\x20Safari/537.36\x20Edg/','LOCAL_BACKUP_LIST','application/json','then','Lovart','search','toString','find','auto','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','value','tm-mgmt-status','now','searchParams','等待CF验证...','mouseup','[data-testid=\x22user-profile-logout\x22]','split','status','closest','[验证]\x20因发生错误或验证失败，最终返回:\x20false','13_5','错误:\x20按钮无点击函数','_tampermonkeyUrl','preventDefault','top','验证通过,\x20点击继续...','addEventListener','warn','disconnect','log','3719700FREtAp','delete','next_account','XMLHttpRequest','endsWith','clientX'];_0x53e6=function(){return _0xd5285c;};return _0x53e6();}function _0x5693(_0x1a8907,_0x5de842){const _0x53e6bc=_0x53e6();return _0x5693=function(_0x569335,_0x2bc159){_0x569335=_0x569335-0x1f2;let _0x560686=_0x53e6bc[_0x569335];return _0x560686;},_0x5693(_0x1a8907,_0x5de842);}(function(_0x288719,_0x10adc3){const _0x56c1a8=_0x5693,_0x560f48=_0x288719();while(!![]){try{const _0x3ded4d=parseInt(_0x56c1a8(0x222))/0x1+-parseInt(_0x56c1a8(0x273))/0x2+parseInt(_0x56c1a8(0x2b2))/0x3+parseInt(_0x56c1a8(0x265))/0x4+-parseInt(_0x56c1a8(0x290))/0x5+parseInt(_0x56c1a8(0x27f))/0x6+parseInt(_0x56c1a8(0x221))/0x7*(-parseInt(_0x56c1a8(0x235))/0x8);if(_0x3ded4d===_0x10adc3)break;else _0x560f48['push'](_0x560f48['shift']());}catch(_0xfbe577){_0x560f48['push'](_0x560f48['shift']());}}}(_0x53e6,0xc460b),(function(){'use strict';const _0x234379=_0x5693;if(window['top']!==window['self'])return;const _0x25d584={'ENABLED':!0x0,'REMOTE_URL':_0x234379(0x238),'LOCAL_BACKUP_LIST':['https://www.lovart.ai?referralCode=ygZD4Bj',_0x234379(0x239)]},_0x9f831a={'NEXT_REFERRAL_LINK':'next_referral_link_lovart','LAST_ACCOUNT':'last_used_account_lovart'},_0x131e04={'emailSuffix':'@zaunist.com','remoteRulesUrl':_0x234379(0x220),'backendApiUrl':_0x234379(0x1f8)},_0x32319c=[_0x234379(0x1f4),_0x234379(0x26e),'avatar',''];_0x5d41d9(),document[_0x234379(0x261)](_0x234379(0x201),_0x54fc79);async function _0x54fc79(){const _0x3458bd=_0x234379;_0x1e31fc(),await _0x3d42e9(0x32);const _0x28dc22=window['location'][_0x3458bd(0x277)],_0x3fadf8=window[_0x3458bd(0x205)][_0x3458bd(0x24a)];if(_0x28dc22[_0x3458bd(0x207)](_0x3458bd(0x29a))||_0x28dc22[_0x3458bd(0x207)](_0x3458bd(0x2ba))||_0x3fadf8[_0x3458bd(0x2b6)](_0x3458bd(0x2b4)))_0x59f0c3('状态',_0x3458bd(0x286));else{const _0x3506dc=await GM_getValue(_0x9f831a[_0x3458bd(0x227)],null);if(_0x3506dc){await GM_setValue(_0x9f831a[_0x3458bd(0x227)],null),_0x59f0c3('状态',_0x3458bd(0x293)),window[_0x3458bd(0x205)][_0x3458bd(0x287)]=_0x3506dc;return;}const _0x109b47=_0x28dc22==='/'&&!_0x3fadf8;if(_0x109b47&&_0x25d584[_0x3458bd(0x295)]){_0x59f0c3('状态',_0x3458bd(0x27b));const _0x232fd9=await _0x29e799()||_0x25d584[_0x3458bd(0x246)];if(_0x232fd9&&_0x232fd9[_0x3458bd(0x23e)]>0x0){const _0x28552d=_0x232fd9[Math[_0x3458bd(0x232)](Math[_0x3458bd(0x298)]()*_0x232fd9[_0x3458bd(0x23e)])];window[_0x3458bd(0x205)]['href']=_0x28552d;return;}}}_0x1b5cfb(),_0x5a3d21();}const _0x35ee99=(_0x577081,_0x3de81d=0x1388)=>new Promise(_0x6b5634=>{const _0x18a004=setInterval(()=>{const _0x1c3870=_0x5693,_0x5319e2=document[_0x1c3870(0x279)](_0x577081);_0x5319e2&&(clearInterval(_0x18a004),_0x6b5634(_0x5319e2));},0x64);setTimeout(()=>{clearInterval(_0x18a004),_0x6b5634(null);},_0x3de81d);}),_0x3d42e9=_0x1e6039=>new Promise(_0x4db2a4=>setTimeout(_0x4db2a4,_0x1e6039));function _0x4f0455(_0x27bef7,_0xd024ef,_0x2d5c44=![]){const _0x346b14=_0x234379,_0x185269=document[_0x346b14(0x289)](_0x27bef7);for(const _0x5bb407 of _0x185269){const _0x41faa6=_0x5bb407[_0x346b14(0x275)][_0x346b14(0x26c)]()['toLowerCase']();if(_0x5bb407['offsetParent']!==null&&(_0x2d5c44?_0x41faa6===_0xd024ef[_0x346b14(0x2aa)]():_0x41faa6['includes'](_0xd024ef[_0x346b14(0x2aa)]())))return _0x5bb407;}return null;}async function _0x29e799(){const _0x48b78a=_0x234379;if(!_0x25d584[_0x48b78a(0x23b)])return null;const _0x42004e=_0x25d584[_0x48b78a(0x23b)]+_0x48b78a(0x2b8)+Date[_0x48b78a(0x252)]();return new Promise(_0xfc08cd=>{GM_xmlhttpRequest({'method':'GET','url':_0x42004e,'onload':function(_0x7d8f87){const _0x3ad172=_0x5693;0xc8===_0x7d8f87[_0x3ad172(0x258)]?_0xfc08cd(_0x7d8f87[_0x3ad172(0x29f)]['match'](/^(https?:\/\/\S+)/gm)||[]):_0xfc08cd(null);},'onerror':function(){_0xfc08cd(null);}});});}function _0x5d41d9(){const _0x251b3d=_0x234379,_0x187e20=()=>{const _0x14cd64=_0x5693,_0x58941a=Math[_0x14cd64(0x298)]();if(_0x58941a<0.6){const _0xd43788=0x7e+Math[_0x14cd64(0x232)](0x5*Math[_0x14cd64(0x298)]()),_0x4ac320=0x1388+Math[_0x14cd64(0x232)](0xbb8*Math['random']()),_0x51b5aa=Math[_0x14cd64(0x232)](0x96*Math[_0x14cd64(0x298)]()),_0x841e94=_0xd43788+'.0.'+_0x4ac320+'.'+_0x51b5aa,_0x138aa3=Math[_0x14cd64(0x298)]();return _0x138aa3<0.6?_0x14cd64(0x2ac)+_0x841e94+_0x14cd64(0x2bc):_0x138aa3<0.9?_0x14cd64(0x2a6)+_0x841e94+_0x14cd64(0x2bc):_0x14cd64(0x2ac)+_0x841e94+_0x14cd64(0x245)+_0x841e94;}if(_0x58941a<0.9){const _0x2c16c9=0x7f+Math[_0x14cd64(0x232)](0x5*Math[_0x14cd64(0x298)]());return Math[_0x14cd64(0x298)]()<0.65?_0x14cd64(0x20a)+_0x2c16c9+'.0)\x20Gecko/20100101\x20Firefox/'+_0x2c16c9+'.0':_0x14cd64(0x21b)+_0x2c16c9+_0x14cd64(0x291)+_0x2c16c9+'.0';}{const _0x56b712={'18.0':_0x14cd64(0x211),'17.5':_0x14cd64(0x2b5),'17.4.1':'14_4_1','16.6':_0x14cd64(0x25b)},_0x5c4842=Object['keys'](_0x56b712),_0x725ffb=_0x5c4842[Math[_0x14cd64(0x232)](Math['random']()*_0x5c4842['length'])],_0x3c5a50=_0x56b712[_0x725ffb];return _0x14cd64(0x272)+_0x3c5a50[_0x14cd64(0x28a)](/\./g,'_')+_0x14cd64(0x2a4)+_0x725ffb+'\x20Safari/605.1.15';}},_0x5cadd4=_0x187e20(),_0x5701b4=unsafeWindow[_0x251b3d(0x241)];unsafeWindow[_0x251b3d(0x241)]=function(_0x1ae7c6,_0x1a17f3){const _0x14a199=_0x251b3d;let _0x5bef2a={..._0x1a17f3};try{if(new URL(_0x1ae7c6,window['location']['href'])[_0x14a199(0x270)][_0x14a199(0x269)](_0x14a199(0x1f2))){const _0x5322dd=new Headers(_0x5bef2a[_0x14a199(0x21a)]);_0x5322dd[_0x14a199(0x28b)](_0x14a199(0x296),_0x5cadd4),_0x5bef2a[_0x14a199(0x21a)]=_0x5322dd;}}catch(_0x9f21a8){console[_0x14a199(0x262)](_0x14a199(0x27a),_0x9f21a8,_0x1a17f3);}return _0x5701b4[_0x14a199(0x2a8)](this,_0x1ae7c6,_0x5bef2a);};const _0x5d4864=unsafeWindow[_0x251b3d(0x268)][_0x251b3d(0x1fd)]['open'],_0xfe6c49=unsafeWindow[_0x251b3d(0x268)]['prototype']['send'];unsafeWindow['XMLHttpRequest'][_0x251b3d(0x1fd)][_0x251b3d(0x223)]=function(_0x123220,_0x39d078,..._0x9e2392){const _0x1c5314=_0x251b3d;return this[_0x1c5314(0x25d)]=_0x39d078,_0x5d4864['apply'](this,[_0x123220,_0x39d078,..._0x9e2392]);},unsafeWindow['XMLHttpRequest'][_0x251b3d(0x1fd)][_0x251b3d(0x215)]=function(..._0x2f8a58){const _0x41e545=_0x251b3d;try{this[_0x41e545(0x25d)]&&new URL(this[_0x41e545(0x25d)],window[_0x41e545(0x205)][_0x41e545(0x287)])[_0x41e545(0x270)][_0x41e545(0x269)]('lovart.ai')&&this[_0x41e545(0x2bb)](_0x41e545(0x296),_0x5cadd4);}catch(_0x5d3e04){console['warn'](_0x41e545(0x2ad),this[_0x41e545(0x25d)],_0x5d3e04);}return _0xfe6c49['apply'](this,_0x2f8a58);};}function _0x116cbc(_0x526228,_0x313ef5){const _0x3f0b60=_0x234379;let _0x3a0b3c,_0x362ddd,_0x1aacf3=![];_0x313ef5[_0x3f0b60(0x261)]('mousedown',_0x5be5f2=>{const _0x26886a=_0x3f0b60;if(_0x5be5f2[_0x26886a(0x244)]['tagName']===_0x26886a(0x2b9))return;_0x1aacf3=!![],_0x5be5f2[_0x26886a(0x25e)]();const _0x26a465=_0x526228[_0x26886a(0x234)]();_0x3a0b3c=_0x5be5f2[_0x26886a(0x26a)]-_0x26a465[_0x26886a(0x22c)],_0x362ddd=_0x5be5f2['clientY']-_0x26a465[_0x26886a(0x25f)],_0x313ef5[_0x26886a(0x1f6)][_0x26886a(0x285)]='grabbing',document['body'][_0x26886a(0x1f6)][_0x26886a(0x26f)]=_0x26886a(0x240),_0x526228['style']['right']=_0x26886a(0x24d),_0x526228[_0x26886a(0x1f6)][_0x26886a(0x214)]=_0x26886a(0x24d),document['addEventListener']('mousemove',_0x2f90ca),document[_0x26886a(0x261)](_0x26886a(0x255),_0x432135,{'once':!![]});});function _0x2f90ca(_0xa7b679){const _0x40e2a7=_0x3f0b60;if(!_0x1aacf3)return;_0x526228[_0x40e2a7(0x1f6)][_0x40e2a7(0x22c)]=_0xa7b679[_0x40e2a7(0x26a)]-_0x3a0b3c+'px',_0x526228['style'][_0x40e2a7(0x25f)]=_0xa7b679[_0x40e2a7(0x27e)]-_0x362ddd+'px';}function _0x432135(){const _0x5bdd9f=_0x3f0b60;_0x1aacf3=![],_0x313ef5[_0x5bdd9f(0x1f6)][_0x5bdd9f(0x285)]=_0x5bdd9f(0x233),document[_0x5bdd9f(0x204)]['style'][_0x5bdd9f(0x26f)]=_0x5bdd9f(0x24d),document[_0x5bdd9f(0x22e)](_0x5bdd9f(0x274),_0x2f90ca);}_0x313ef5[_0x3f0b60(0x1f6)][_0x3f0b60(0x285)]=_0x3f0b60(0x233);}function _0x1e31fc(){const _0x236ed8=_0x234379;if(document[_0x236ed8(0x29b)](_0x236ed8(0x1fe)))return;const _0x1dc4d7=document['createElement'](_0x236ed8(0x20f));_0x1dc4d7['id']=_0x236ed8(0x1fe),_0x1dc4d7[_0x236ed8(0x20d)]=_0x236ed8(0x2b0);const _0x13dd6e=_0x1dc4d7[_0x236ed8(0x279)](_0x236ed8(0x212));_0x116cbc(_0x1dc4d7,_0x13dd6e),document['body'][_0x236ed8(0x28c)](_0x1dc4d7),GM_addStyle(_0x236ed8(0x2be)),document[_0x236ed8(0x29b)]('tm-mgmt-clear-storage')['addEventListener'](_0x236ed8(0x29e),async()=>{const _0x218eb2=_0x236ed8;await GM_setValue(_0x9f831a[_0x218eb2(0x282)],null),await GM_setValue(_0x9f831a['NEXT_REFERRAL_LINK'],null),alert(_0x218eb2(0x22d)),location[_0x218eb2(0x20c)]();});}function _0x59f0c3(_0xf77076,_0x19d071){const _0x50e1de=_0x234379,_0x1d514f={'状态':_0x50e1de(0x251),'下一账户':_0x50e1de(0x29d),'接力链接':_0x50e1de(0x278)}[_0xf77076];if(_0x1d514f){const _0x503187=document['getElementById'](_0x1d514f);if(_0x503187)_0x503187['textContent']=_0x19d071;}}async function _0x589b68(){const _0x2742d8=_0x234379;_0x59f0c3('状态',_0x2742d8(0x231));let _0x9bbc8e=null;const _0x5252b0=document['querySelectorAll'](_0x2742d8(0x294));for(const _0x1cc0b2 of _0x5252b0){const _0x49c0af=Array[_0x2742d8(0x2b7)](_0x1cc0b2[_0x2742d8(0x2a1)])[_0x2742d8(0x2a0)](_0x29ea43=>0x3===_0x29ea43[_0x2742d8(0x1f5)]&&'Referral\x20Link'===_0x29ea43[_0x2742d8(0x275)][_0x2742d8(0x26c)]());if(_0x49c0af&&null!==_0x1cc0b2[_0x2742d8(0x28e)]){_0x9bbc8e=_0x1cc0b2;break;}}if(!_0x9bbc8e)return void _0x59f0c3('状态','错误:\x20未找到引荐按钮');_0x59f0c3('状态',_0x2742d8(0x27c));const _0x1d68be=Object[_0x2742d8(0x299)](_0x9bbc8e)[_0x2742d8(0x24c)](_0x51a7b4=>_0x51a7b4[_0x2742d8(0x207)](_0x2742d8(0x2a3)));if(_0x1d68be){const _0x3551b6=_0x9bbc8e[_0x1d68be];_0x3551b6&&'function'==typeof _0x3551b6[_0x2742d8(0x218)]?_0x3551b6['onClick']():_0x59f0c3('状态',_0x2742d8(0x25c));}else _0x59f0c3('状态',_0x2742d8(0x27d));const _0x14ae20=await _0x35ee99(_0x2742d8(0x21f));if(!_0x14ae20){_0x59f0c3('状态',_0x2742d8(0x202));const _0x5703ad=await _0x35ee99(_0x2742d8(0x2a5),0x3e8);return void(_0x5703ad&&_0x5703ad[_0x2742d8(0x29e)]());}const _0x69fac2=_0x14ae20[_0x2742d8(0x275)]['trim']();if(_0x69fac2&&_0x69fac2[_0x2742d8(0x2b6)]('referralCode=')){await GM_setValue(_0x9f831a['NEXT_REFERRAL_LINK'],_0x69fac2);const _0x55ccdd=_0x69fac2[_0x2742d8(0x2ae)](/referralCode=([^&]+)/);_0x55ccdd&&_0x55ccdd[0x1]&&_0x59f0c3(_0x2742d8(0x1fa),_0x55ccdd[0x1][_0x2742d8(0x216)](0x0,0x7)),_0x59f0c3('状态',_0x2742d8(0x2af));}const _0x102689=await _0x35ee99(_0x2742d8(0x2a5));_0x102689&&_0x102689['click']();}async function _0x2d4232(_0x3ff44d){const _0x131805=_0x234379,_0x36067f=(_0x3ff44d['getAttribute']('alt')||'')[_0x131805(0x26c)]();if(!_0x36067f||document['body'][_0x131805(0x2a7)][_0x131805(0x224)])return;document[_0x131805(0x204)]['dataset'][_0x131805(0x224)]=_0x131805(0x226),_0x59f0c3('状态','已登录:\x20'+_0x36067f),_0x59f0c3(_0x131805(0x1fa),_0x131805(0x243)),await _0x3d42e9(0x5dc),await _0x589b68();const {base:_0x616e2a,num:_0x1f2d18}=_0x8ba8e9(_0x36067f),_0x5918b8=''+_0x616e2a+(_0x1f2d18+0x1);await GM_setValue(_0x9f831a['LAST_ACCOUNT'],_0x5918b8),_0x59f0c3('下一账户',_0x5918b8),_0x59f0c3('状态',_0x131805(0x208)+_0x36067f+_0x131805(0x288)),await _0x3d42e9(0xfa),document[_0x131805(0x204)][_0x131805(0x261)](_0x131805(0x29e),_0x284be1=>{const _0x3a0732=_0x131805,_0xb8e7c7=_0x284be1[_0x3a0732(0x244)][_0x3a0732(0x259)](_0x3a0732(0x256));_0xb8e7c7&&(_0x284be1[_0x3a0732(0x25e)](),_0x284be1[_0x3a0732(0x26b)](),window[_0x3a0732(0x205)][_0x3a0732(0x20c)]());},{'capture':!0x0});}async function _0x2eb0be(){const _0x228c85=_0x234379;_0x59f0c3('状态',_0x228c85(0x22a));let _0x4d5136=null;for(let _0x368cc2=0x0;_0x368cc2<0x14;_0x368cc2++){if(_0x4d5136=_0x4f0455(_0x228c85(0x242),_0x228c85(0x1f9),!0x1))break;await _0x3d42e9(0x1f4);}if(!_0x4d5136)return void _0x59f0c3('状态','错误:\x2010秒内未找到DesignNow');_0x59f0c3('状态','主页,\x20尝试调用函数...');const _0x15eaed=Object[_0x228c85(0x299)](_0x4d5136)[_0x228c85(0x24c)](_0x548ff2=>_0x548ff2[_0x228c85(0x207)]('__reactProps$'));if(_0x15eaed){const _0x3d8192=_0x4d5136[_0x15eaed];_0x3d8192&&_0x228c85(0x28d)==typeof _0x3d8192[_0x228c85(0x218)]?_0x3d8192['onClick']():_0x59f0c3('状态',_0x228c85(0x23c));}else _0x59f0c3('状态',_0x228c85(0x219)),_0x4d5136[_0x228c85(0x29e)]();}function _0x5a3d21(){let _0x2541b7=null;setInterval(()=>{const _0x1d2196=_0x5693,_0x3f99f5=document[_0x1d2196(0x279)](_0x1d2196(0x23a))||document[_0x1d2196(0x279)]('div.bottom-left-user-position\x20img[alt]');if(_0x3f99f5){const _0x346c17=_0x3f99f5[_0x1d2196(0x236)](_0x1d2196(0x203))||'';if(!_0x32319c[_0x1d2196(0x2b6)](_0x346c17['toLowerCase']()[_0x1d2196(0x26c)]()))return void(_0x1d2196(0x280)!==_0x2541b7&&(_0x2541b7='loggedIn',_0x2d4232(_0x3f99f5)));}if(_0x4f0455('div,\x20p,\x20h1,\x20h2',_0x1d2196(0x1fc)))return void(_0x1d2196(0x29c)!==_0x2541b7&&(_0x2541b7=_0x1d2196(0x29c),_0x59f0c3('状态',_0x1d2196(0x2ab))));if(document[_0x1d2196(0x279)](_0x1d2196(0x24f)))return void('loginModal'!==_0x2541b7&&(_0x2541b7='loginModal',_0x1f5d42()));const _0x40d5d6=_0x4f0455(_0x1d2196(0x284),_0x1d2196(0x1f9));if(_0x40d5d6)return void(_0x1d2196(0x200)!==_0x2541b7&&(_0x2541b7='homepage',_0x2eb0be()));_0x2541b7=null;},0x2ee);}function _0x8ba8e9(_0x26fff3){const _0x340ace=_0x234379,_0x201b9d=_0x26fff3[_0x340ace(0x2ae)](/^(.*?)(\d*)$/);if(!_0x201b9d)return{'base':_0x26fff3,'num':0x0};const _0x2a4c7f=_0x201b9d[0x1],_0x280e60=_0x201b9d[0x2]?parseInt(_0x201b9d[0x2],0xa):0x0;return{'base':_0x2a4c7f,'num':_0x280e60};}async function _0x1f5d42(){const _0x418c7e=_0x234379,_0x5ed09e=await _0x35ee99('input[placeholder=\x22Email\x22]');if(!_0x5ed09e||_0x5ed09e[_0x418c7e(0x2a7)]['automationAttached'])return;_0x5ed09e[_0x418c7e(0x2a7)][_0x418c7e(0x281)]='true',_0x59f0c3('状态','已进入登录/注册弹窗');const _0x1e2960=await GM_getValue(_0x9f831a['LAST_ACCOUNT']);if(_0x59f0c3(_0x418c7e(0x20b),_0x1e2960||'无(等待手动输入)'),_0x1e2960)await _0x2c5e0b(_0x1e2960,_0x5ed09e);else _0x59f0c3('状态',_0x418c7e(0x206)),_0x5ed09e[_0x418c7e(0x261)]('blur',async()=>{const _0x50452a=_0x418c7e,_0x46624b=_0x5ed09e[_0x50452a(0x250)][_0x50452a(0x26c)]()['split']('@')[0x0];_0x46624b&&await _0x2c5e0b(_0x46624b,_0x5ed09e);},{'once':!0x0});}async function _0x2c5e0b(_0x5ada26,_0x12e29c){const _0x3520f7=_0x234379;if(_0x59f0c3('状态',_0x3520f7(0x297)+_0x5ada26),!await _0x4ee442(_0x5ada26))return void _0x59f0c3('状态',_0x3520f7(0x271)+_0x5ada26);if(!await _0x31cf72(_0x5ada26))return void _0x59f0c3('状态',_0x3520f7(0x23f)+_0x5ada26);const _0x12c333=_0x5ada26+'@zaunist.com';_0x12e29c['value']!==_0x12c333&&_0x5012e2(_0x12e29c,_0x12c333),_0x59f0c3('状态',_0x3520f7(0x225)+_0x12c333),_0x59f0c3('状态',_0x3520f7(0x254));const _0x5ed9ef=await _0x35ee99('#emailLogin');if(!_0x5ed9ef)return void _0x59f0c3('状态',_0x3520f7(0x1fb));const _0x269e68=new MutationObserver(async _0x220f15=>{const _0x591b8a=_0x3520f7;!_0x5ed9ef[_0x591b8a(0x228)]&&(_0x269e68[_0x591b8a(0x263)](),_0x59f0c3('状态','验证通过,\x20点击继续...'),await _0x3d42e9(0xfa),_0x5ed9ef[_0x591b8a(0x29e)](),await _0x45b2c6(_0x5ada26,_0x591b8a(0x249)));});_0x5ed9ef[_0x3520f7(0x228)]?_0x269e68[_0x3520f7(0x2bd)](_0x5ed9ef,{'attributes':!0x0,'attributeFilter':[_0x3520f7(0x228)]}):(_0x59f0c3('状态',_0x3520f7(0x260)),await _0x3d42e9(0xfa),_0x5ed9ef['click'](),await _0x45b2c6(_0x5ada26,_0x3520f7(0x249)));}async function _0x4ee442(_0x37f971){const _0x55e503=_0x234379;console[_0x55e503(0x264)]('[验证]\x20开始验证前缀:\x20\x22'+_0x37f971+'\x22');try{const _0x33e04f=await new Promise((_0x2eb658,_0x254b91)=>{const _0x50bccb=_0x55e503;GM_xmlhttpRequest({'method':'GET','url':_0x131e04[_0x50bccb(0x1ff)]+_0x50bccb(0x2b8)+Date[_0x50bccb(0x252)](),'onload':_0x2eb658,'onerror':_0x254b91});});if(0xc8===_0x33e04f[_0x55e503(0x258)]){const _0x5c2be5=_0x33e04f['responseText'][_0x55e503(0x257)]('\x0a')['map'](_0x4dae71=>_0x4dae71[_0x55e503(0x26c)]())[_0x55e503(0x1f7)](_0x93c382=>_0x93c382&&_0x93c382['length']>0x0);0x0===_0x5c2be5[_0x55e503(0x23e)]&&console[_0x55e503(0x21c)](_0x55e503(0x24e));const _0x5c914d=_0x5c2be5[_0x55e503(0x2a0)](_0x4a25ef=>_0x4a25ef['startsWith'](_0x55e503(0x210))||_0x4a25ef[_0x55e503(0x207)]('cxianyu')?_0x37f971===_0x4a25ef:_0x37f971[_0x55e503(0x207)](_0x4a25ef));return console[_0x55e503(0x264)](_0x55e503(0x22f)+_0x37f971+_0x55e503(0x292)+_0x5c914d),_0x5c914d;}console['error'](_0x55e503(0x26d)+_0x33e04f[_0x55e503(0x258)]);}catch(_0x525a7a){console[_0x55e503(0x21c)](_0x55e503(0x1f3),_0x525a7a);}return console[_0x55e503(0x264)](_0x55e503(0x25a)),!0x1;}function _0x31cf72(_0x1ae4b1){return new Promise(_0x316068=>{const _0x456941=_0x5693;GM_xmlhttpRequest({'method':'POST','url':_0x131e04[_0x456941(0x230)],'headers':{'Content-Type':_0x456941(0x247)},'data':JSON[_0x456941(0x28f)]({'mode':_0x456941(0x276),'emailPrefix':_0x1ae4b1}),'timeout':0x4e20,'onload':function(_0x458f4c){const _0x4870b7=_0x456941;try{_0x316068(!0x0===JSON[_0x4870b7(0x20e)](_0x458f4c[_0x4870b7(0x29f)])[_0x4870b7(0x2b3)]);}catch(_0x31c310){_0x316068(!0x1);}},'onerror':function(_0x1f6b72){_0x316068(!0x1);},'ontimeout':function(){_0x316068(!0x1);}});});}async function _0x45b2c6(_0x1f0889,_0x429750,_0x168648=0x3){const _0x481020=_0x234379;for(let _0x301e05=0x1;_0x301e05<=_0x168648;_0x301e05++)if(_0x59f0c3('状态','第\x20'+_0x301e05+'/'+_0x168648+_0x481020(0x2b1)),await(async function(){const _0x4eed80=_0x481020;try{const _0x14b623=await new Promise((_0x47b4eb,_0x367790)=>{const _0x4b4c20=_0x5693;GM_xmlhttpRequest({'method':_0x4b4c20(0x209),'url':_0x131e04[_0x4b4c20(0x230)],'headers':{'Content-Type':_0x4b4c20(0x247)},'data':JSON[_0x4b4c20(0x28f)]({'mode':'getLink','emailPrefix':_0x1f0889,'source':_0x429750}),'timeout':0x3a98,'onload':_0x47b4eb,'onerror':_0x367790,'ontimeout':_0x367790});}),_0x4b18fd=JSON[_0x4eed80(0x20e)](_0x14b623[_0x4eed80(0x29f)]);if(_0x4b18fd['success']&&_0x4b18fd[_0x4eed80(0x213)])return _0x59f0c3('状态',_0x4eed80(0x23d)),void(window['location']['href']=_0x4b18fd[_0x4eed80(0x213)]);_0x59f0c3('状态',_0x4eed80(0x237)+(_0x4b18fd[_0x4eed80(0x21c)]||'未知服务器错误'));}catch(_0x31556c){throw console['error']('获取登录链接第\x20'+_0x301e05+_0x4eed80(0x22b),_0x31556c),_0x31556c;}}()))return;else{if(_0x301e05===_0x168648)return void _0x59f0c3('状态',_0x481020(0x21e));await _0x3d42e9(0x7d0);}}function _0x5012e2(_0x5aa1ed,_0xff3c65){const _0xbc1118=_0x234379;try{return Object[_0xbc1118(0x283)](HTMLInputElement[_0xbc1118(0x1fd)],'value')[_0xbc1118(0x28b)][_0xbc1118(0x2a8)](_0x5aa1ed,_0xff3c65),[_0xbc1118(0x2a9),_0xbc1118(0x21d),'blur'][_0xbc1118(0x217)](_0x58b03f=>_0x5aa1ed[_0xbc1118(0x229)](new Event(_0x58b03f,{'bubbles':!0x0}))),!0x0;}catch(_0x1df15f){return!0x1;}}function _0x1b5cfb(){const _0x10255a=_0x234379,_0x1bccdd=new URL(window[_0x10255a(0x205)][_0x10255a(0x287)]),_0x249bc2=_0x1bccdd[_0x10255a(0x253)]['get'](_0x10255a(0x267));_0x249bc2&&GM_setValue(_0x9f831a[_0x10255a(0x282)],_0x249bc2)[_0x10255a(0x248)](()=>{const _0x16003f=_0x10255a;_0x1bccdd['searchParams'][_0x16003f(0x266)](_0x16003f(0x267)),history[_0x16003f(0x2a2)](null,'',_0x1bccdd[_0x16003f(0x24b)]());});}}()));

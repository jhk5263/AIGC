// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.25
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x5385(_0x57896b,_0x3a8755){const _0x511dc5=_0x511d();return _0x5385=function(_0x5385f8,_0x164584){_0x5385f8=_0x5385f8-0x191;let _0x1e4a54=_0x511dc5[_0x5385f8];return _0x1e4a54;},_0x5385(_0x57896b,_0x3a8755);}(function(_0x570bfe,_0x537418){const _0x1fb857=_0x5385,_0x28899c=_0x570bfe();while(!![]){try{const _0x3f43da=-parseInt(_0x1fb857(0x1e9))/0x1*(-parseInt(_0x1fb857(0x1ad))/0x2)+-parseInt(_0x1fb857(0x195))/0x3+-parseInt(_0x1fb857(0x24b))/0x4*(parseInt(_0x1fb857(0x197))/0x5)+parseInt(_0x1fb857(0x218))/0x6+-parseInt(_0x1fb857(0x215))/0x7+-parseInt(_0x1fb857(0x1d8))/0x8+parseInt(_0x1fb857(0x219))/0x9;if(_0x3f43da===_0x537418)break;else _0x28899c['push'](_0x28899c['shift']());}catch(_0x182609){_0x28899c['push'](_0x28899c['shift']());}}}(_0x511d,0x4d46c),(function(){'use strict';const _0x44b5e=_0x5385;if(window[_0x44b5e(0x253)]!==window[_0x44b5e(0x224)])return;const _0x583702={'ENABLED':!0x0,'REMOTE_URL':_0x44b5e(0x206),'LOCAL_BACKUP_LIST':[_0x44b5e(0x232),'https://www.lovart.ai?referralCode=VbvJyyD']},_0x58397f={'NEXT_REFERRAL_LINK':'next_referral_link_lovart','LAST_ACCOUNT':_0x44b5e(0x255)},_0x447919={'emailSuffix':_0x44b5e(0x1ee),'remoteRulesUrl':'https://co.taotile.ltd/akl.txt','backendApiUrl':_0x44b5e(0x216)},_0x36f7b7=[_0x44b5e(0x22c),'user',_0x44b5e(0x21d),''];_0x5c6362(),document[_0x44b5e(0x1d6)]('DOMContentLoaded',_0x19db73);async function _0x19db73(){const _0x435899=_0x44b5e;_0xc8e018(),await _0xe95d89(0x32);const _0x300547=window[_0x435899(0x22d)][_0x435899(0x231)],_0x26d585=window[_0x435899(0x22d)]['search'];if(_0x300547[_0x435899(0x1fb)](_0x435899(0x212))||_0x300547[_0x435899(0x1fb)](_0x435899(0x1f7))||_0x26d585[_0x435899(0x1ea)](_0x435899(0x228)))_0x273c69('状态',_0x435899(0x1ab));else{const _0x5d9d2a=await GM_getValue(_0x58397f[_0x435899(0x1b7)],null);if(_0x5d9d2a){await GM_setValue(_0x58397f[_0x435899(0x1b7)],null),_0x273c69('状态',_0x435899(0x1a3)),window['location']['href']=_0x5d9d2a;return;}const _0x2240ff=_0x300547==='/'&&!_0x26d585;if(_0x2240ff&&_0x583702[_0x435899(0x22f)]){_0x273c69('状态','根页面，随机跳转...');const _0x1c1630=await _0x314e2e()||_0x583702[_0x435899(0x250)];if(_0x1c1630&&_0x1c1630[_0x435899(0x21b)]>0x0){const _0x4c4a5b=_0x1c1630[Math['floor'](Math[_0x435899(0x1f8)]()*_0x1c1630[_0x435899(0x21b)])];window['location'][_0x435899(0x1fc)]=_0x4c4a5b;return;}}}_0x336093(),_0x45851d();}const _0x52fa14=(_0x41e20b,_0x391afd=0x1388)=>new Promise(_0x590747=>{const _0x41b465=setInterval(()=>{const _0x2dc503=_0x5385,_0x3da579=document[_0x2dc503(0x205)](_0x41e20b);_0x3da579&&(clearInterval(_0x41b465),_0x590747(_0x3da579));},0x64);setTimeout(()=>{clearInterval(_0x41b465),_0x590747(null);},_0x391afd);}),_0xe95d89=_0x4ed25b=>new Promise(_0x44a7ca=>setTimeout(_0x44a7ca,_0x4ed25b));function _0xbf9c4a(_0x332e65,_0x24c6ff,_0x229583=![]){const _0xde5dbb=_0x44b5e,_0x5d4dba=document[_0xde5dbb(0x1e4)](_0x332e65);for(const _0x472839 of _0x5d4dba){const _0x5abcee=_0x472839[_0xde5dbb(0x19b)][_0xde5dbb(0x1f9)]()[_0xde5dbb(0x1b9)]();if(_0x472839['offsetParent']!==null&&(_0x229583?_0x5abcee===_0x24c6ff['toLowerCase']():_0x5abcee[_0xde5dbb(0x1ea)](_0x24c6ff[_0xde5dbb(0x1b9)]())))return _0x472839;}return null;}async function _0x314e2e(){const _0x176765=_0x44b5e;if(!_0x583702[_0x176765(0x20b)])return null;const _0x1f4a38=_0x583702[_0x176765(0x20b)]+_0x176765(0x1f1)+Date['now']();return new Promise(_0x844d99=>{const _0x156e66=_0x176765;GM_xmlhttpRequest({'method':_0x156e66(0x236),'url':_0x1f4a38,'onload':function(_0x31e90d){const _0x1ce9b6=_0x156e66;0xc8===_0x31e90d[_0x1ce9b6(0x1c5)]?_0x844d99(_0x31e90d['responseText'][_0x1ce9b6(0x1e6)](/^(https?:\/\/\S+)/gm)||[]):_0x844d99(null);},'onerror':function(){_0x844d99(null);}});});}function _0x5c6362(){const _0x19a9b2=_0x44b5e,_0x4e87da=()=>{const _0x738663=_0x5385,_0x180508=Math[_0x738663(0x1f8)]();if(_0x180508<0.6){const _0x45613d=0x7e+Math[_0x738663(0x244)](0x5*Math[_0x738663(0x1f8)]()),_0x130e3c=0x1388+Math[_0x738663(0x244)](0xbb8*Math[_0x738663(0x1f8)]()),_0x3feeb1=Math['floor'](0x96*Math['random']()),_0x12f367=_0x45613d+'.0.'+_0x130e3c+'.'+_0x3feeb1,_0x1b1a6b=Math['random']();return _0x1b1a6b<0.6?_0x738663(0x1d7)+_0x12f367+_0x738663(0x248):_0x1b1a6b<0.9?_0x738663(0x24c)+_0x12f367+_0x738663(0x248):_0x738663(0x1d7)+_0x12f367+_0x738663(0x203)+_0x12f367;}if(_0x180508<0.9){const _0x1c40fc=0x7f+Math[_0x738663(0x244)](0x5*Math[_0x738663(0x1f8)]());return Math[_0x738663(0x1f8)]()<0.65?'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:'+_0x1c40fc+_0x738663(0x1b6)+_0x1c40fc+'.0':_0x738663(0x237)+_0x1c40fc+_0x738663(0x1b6)+_0x1c40fc+'.0';}{const _0x1bfaaa={'18.0':_0x738663(0x1be),'17.5':_0x738663(0x1a6),'17.4.1':_0x738663(0x1a4),'16.6':_0x738663(0x226)},_0x229ef2=Object['keys'](_0x1bfaaa),_0x2f4a30=_0x229ef2[Math[_0x738663(0x244)](Math[_0x738663(0x1f8)]()*_0x229ef2[_0x738663(0x21b)])],_0x215de0=_0x1bfaaa[_0x2f4a30];return _0x738663(0x19a)+_0x215de0[_0x738663(0x23d)](/\./g,'_')+')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/'+_0x2f4a30+_0x738663(0x24a);}},_0x2b3275=_0x4e87da(),_0x18ca41=unsafeWindow[_0x19a9b2(0x1f6)];unsafeWindow[_0x19a9b2(0x1f6)]=function(_0x5c2af8,_0x351754){const _0x4e4704=_0x19a9b2;let _0x561a62={..._0x351754};try{if(new URL(_0x5c2af8,window[_0x4e4704(0x22d)][_0x4e4704(0x1fc)])[_0x4e4704(0x1cc)]['endsWith'](_0x4e4704(0x245))){const _0x5c799e=new Headers(_0x561a62[_0x4e4704(0x1f4)]);_0x5c799e[_0x4e4704(0x1af)](_0x4e4704(0x1b8),_0x2b3275),_0x561a62['headers']=_0x5c799e;}}catch(_0x4bb5ff){console['warn']('[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:',_0x4bb5ff,_0x351754);}return _0x18ca41[_0x4e4704(0x204)](this,_0x5c2af8,_0x561a62);};const _0x336568=unsafeWindow['XMLHttpRequest']['prototype'][_0x19a9b2(0x1c9)],_0x3c0c84=unsafeWindow[_0x19a9b2(0x194)][_0x19a9b2(0x249)][_0x19a9b2(0x1b0)];unsafeWindow[_0x19a9b2(0x194)][_0x19a9b2(0x249)][_0x19a9b2(0x1c9)]=function(_0x1cf675,_0x6d9b10,..._0x418503){const _0x59dad9=_0x19a9b2;return this[_0x59dad9(0x19c)]=_0x6d9b10,_0x336568[_0x59dad9(0x23e)](this,[_0x1cf675,_0x6d9b10,..._0x418503]);},unsafeWindow[_0x19a9b2(0x194)][_0x19a9b2(0x249)][_0x19a9b2(0x1b0)]=function(..._0x5bcc82){const _0x14405b=_0x19a9b2;try{this[_0x14405b(0x19c)]&&new URL(this[_0x14405b(0x19c)],window['location'][_0x14405b(0x1fc)])[_0x14405b(0x1cc)][_0x14405b(0x1c0)](_0x14405b(0x245))&&this[_0x14405b(0x213)](_0x14405b(0x1b8),_0x2b3275);}catch(_0x549298){console[_0x14405b(0x227)](_0x14405b(0x23a),this[_0x14405b(0x19c)],_0x549298);}return _0x3c0c84[_0x14405b(0x23e)](this,_0x5bcc82);};}function _0x2fa64b(_0x1d6ab7,_0x44cd48){const _0x47995c=_0x44b5e;let _0xc19605,_0x110062,_0x47c10d=![];_0x44cd48[_0x47995c(0x1d6)](_0x47995c(0x210),_0x234cd1=>{const _0x862c3f=_0x47995c;if(_0x234cd1['target'][_0x862c3f(0x233)]==='BUTTON')return;_0x47c10d=!![],_0x234cd1['preventDefault']();const _0x4be056=_0x1d6ab7[_0x862c3f(0x1d2)]();_0xc19605=_0x234cd1[_0x862c3f(0x1c3)]-_0x4be056['left'],_0x110062=_0x234cd1[_0x862c3f(0x217)]-_0x4be056[_0x862c3f(0x253)],_0x44cd48[_0x862c3f(0x1e7)][_0x862c3f(0x23f)]=_0x862c3f(0x1d0),document[_0x862c3f(0x193)]['style'][_0x862c3f(0x1df)]='none',_0x1d6ab7[_0x862c3f(0x1e7)]['right']=_0x862c3f(0x1bb),_0x1d6ab7['style'][_0x862c3f(0x221)]=_0x862c3f(0x1bb),document['addEventListener'](_0x862c3f(0x1ef),_0x2f4907),document[_0x862c3f(0x1d6)](_0x862c3f(0x1db),_0x5d70ee,{'once':!![]});});function _0x2f4907(_0x32f4a9){const _0xec2370=_0x47995c;if(!_0x47c10d)return;_0x1d6ab7[_0xec2370(0x1e7)][_0xec2370(0x1ed)]=_0x32f4a9[_0xec2370(0x1c3)]-_0xc19605+'px',_0x1d6ab7['style'][_0xec2370(0x253)]=_0x32f4a9['clientY']-_0x110062+'px';}function _0x5d70ee(){const _0x2a378d=_0x47995c;_0x47c10d=![],_0x44cd48[_0x2a378d(0x1e7)][_0x2a378d(0x23f)]=_0x2a378d(0x220),document[_0x2a378d(0x193)]['style'][_0x2a378d(0x1df)]=_0x2a378d(0x1bb),document[_0x2a378d(0x1fe)](_0x2a378d(0x1ef),_0x2f4907);}_0x44cd48['style'][_0x47995c(0x23f)]=_0x47995c(0x220);}function _0xc8e018(){const _0x5b8c26=_0x44b5e;if(document[_0x5b8c26(0x1a2)](_0x5b8c26(0x1b3)))return;const _0x3f6b03=document[_0x5b8c26(0x256)]('div');_0x3f6b03['id']='tm-mgmt-panel',_0x3f6b03[_0x5b8c26(0x252)]='<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>';const _0x1995ef=_0x3f6b03['querySelector'](_0x5b8c26(0x1e2));_0x2fa64b(_0x3f6b03,_0x1995ef),document[_0x5b8c26(0x193)][_0x5b8c26(0x1f5)](_0x3f6b03),GM_addStyle(_0x5b8c26(0x201)),document[_0x5b8c26(0x1a2)]('tm-mgmt-clear-storage')[_0x5b8c26(0x1d6)](_0x5b8c26(0x211),async()=>{const _0x552870=_0x5b8c26;await GM_setValue(_0x58397f['LAST_ACCOUNT'],null),await GM_setValue(_0x58397f[_0x552870(0x1b7)],null),alert('所有存储的账户和链接信息已清除，页面将刷新。'),location[_0x552870(0x1e5)]();});}function _0x273c69(_0x21fc4b,_0x26b170){const _0x3d95e6=_0x44b5e,_0x2d1120={'状态':_0x3d95e6(0x257),'下一账户':_0x3d95e6(0x192),'接力链接':_0x3d95e6(0x246)}[_0x21fc4b];if(_0x2d1120){const _0xcfba8b=document[_0x3d95e6(0x1a2)](_0x2d1120);if(_0xcfba8b)_0xcfba8b[_0x3d95e6(0x19b)]=_0x26b170;}}async function _0xfef84d(){const _0x147ad7=_0x44b5e;_0x273c69('状态',_0x147ad7(0x222));let _0x1866c3=null;const _0x4c6aee=document[_0x147ad7(0x1e4)](_0x147ad7(0x1f0));for(const _0x4b7293 of _0x4c6aee){const _0x3b3255=Array[_0x147ad7(0x1dd)](_0x4b7293[_0x147ad7(0x229)])['some'](_0x562396=>0x3===_0x562396['nodeType']&&_0x147ad7(0x1b4)===_0x562396[_0x147ad7(0x19b)][_0x147ad7(0x1f9)]());if(_0x3b3255&&null!==_0x4b7293[_0x147ad7(0x199)]){_0x1866c3=_0x4b7293;break;}}if(!_0x1866c3)return void _0x273c69('状态',_0x147ad7(0x235));_0x273c69('状态','按钮已定位,\x20直接调用函数...');const _0x328996=Object[_0x147ad7(0x21a)](_0x1866c3)[_0x147ad7(0x1ba)](_0x5364b0=>_0x5364b0[_0x147ad7(0x1fb)](_0x147ad7(0x1ec)));if(_0x328996){const _0x53032e=_0x1866c3[_0x328996];_0x53032e&&_0x147ad7(0x225)==typeof _0x53032e[_0x147ad7(0x24e)]?_0x53032e[_0x147ad7(0x24e)]():_0x273c69('状态',_0x147ad7(0x1ac));}else _0x273c69('状态',_0x147ad7(0x1de));const _0x286098=await _0x52fa14(_0x147ad7(0x19f));if(!_0x286098){_0x273c69('状态','错误:\x20未找到引荐链接');const _0x14ec90=await _0x52fa14(_0x147ad7(0x230),0x3e8);return void(_0x14ec90&&_0x14ec90[_0x147ad7(0x211)]());}const _0x44d144=_0x286098[_0x147ad7(0x19b)][_0x147ad7(0x1f9)]();if(_0x44d144&&_0x44d144[_0x147ad7(0x1ea)]('referralCode=')){await GM_setValue(_0x58397f[_0x147ad7(0x1b7)],_0x44d144);const _0x3e1dcc=_0x44d144[_0x147ad7(0x1e6)](/referralCode=([^&]+)/);_0x3e1dcc&&_0x3e1dcc[0x1]&&_0x273c69(_0x147ad7(0x23c),_0x3e1dcc[0x1]['substring'](0x0,0x7)),_0x273c69('状态',_0x147ad7(0x21e));}const _0x1414a6=await _0x52fa14(_0x147ad7(0x230));_0x1414a6&&_0x1414a6[_0x147ad7(0x211)]();}async function _0x22f28f(_0x518a70){const _0x197d9b=_0x44b5e,_0x57bd88=(_0x518a70[_0x197d9b(0x20c)](_0x197d9b(0x1c4))||'')[_0x197d9b(0x1f9)]();if(!_0x57bd88||document['body']['dataset'][_0x197d9b(0x1eb)])return;document[_0x197d9b(0x193)][_0x197d9b(0x1f2)][_0x197d9b(0x1eb)]=_0x197d9b(0x1fd),_0x273c69('状态',_0x197d9b(0x1d4)+_0x57bd88),_0x273c69(_0x197d9b(0x23c),_0x197d9b(0x1d9)),await _0xe95d89(0x5dc),await _0xfef84d();const {base:_0x43a938,num:_0x54feb8}=_0x149b89(_0x57bd88),_0x1a8016=''+_0x43a938+(_0x54feb8+0x1);await GM_setValue(_0x58397f[_0x197d9b(0x1ce)],_0x1a8016),_0x273c69(_0x197d9b(0x1e0),_0x1a8016),_0x273c69('状态',_0x197d9b(0x1d4)+_0x57bd88+_0x197d9b(0x214)),await _0xe95d89(0xfa),document[_0x197d9b(0x193)][_0x197d9b(0x1d6)](_0x197d9b(0x211),_0x13a07a=>{const _0x4cff77=_0x197d9b,_0x305139=_0x13a07a[_0x4cff77(0x1a8)][_0x4cff77(0x20e)](_0x4cff77(0x1cb));_0x305139&&(_0x13a07a[_0x4cff77(0x1c7)](),_0x13a07a[_0x4cff77(0x20d)](),window[_0x4cff77(0x22d)][_0x4cff77(0x1e5)]());},{'capture':!0x0});}async function _0x5e6110(){const _0x4fae89=_0x44b5e;_0x273c69('状态','主页,\x20等待\x20\x27Design\x20Now\x27...');let _0x6796b8=null;for(let _0x2392a0=0x0;_0x2392a0<0x14;_0x2392a0++){if(_0x6796b8=_0xbf9c4a('button','Design\x20Now',!0x1))break;await _0xe95d89(0x1f4);}if(!_0x6796b8)return void _0x273c69('状态','错误:\x2010秒内未找到DesignNow');_0x273c69('状态',_0x4fae89(0x22b));const _0x238ffb=Object[_0x4fae89(0x21a)](_0x6796b8)['find'](_0x1dc703=>_0x1dc703[_0x4fae89(0x1fb)](_0x4fae89(0x1ec)));if(_0x238ffb){const _0x48eca1=_0x6796b8[_0x238ffb];_0x48eca1&&'function'==typeof _0x48eca1['onClick']?_0x48eca1[_0x4fae89(0x24e)]():_0x273c69('状态',_0x4fae89(0x243));}else _0x273c69('状态','主页,\x20尝试常规点击...'),_0x6796b8[_0x4fae89(0x211)]();}function _0x45851d(){let _0x4bc918=null;setInterval(()=>{const _0x32eb92=_0x5385,_0x597921=document[_0x32eb92(0x205)](_0x32eb92(0x234))||document[_0x32eb92(0x205)](_0x32eb92(0x1d5));if(_0x597921){const _0x33e674=_0x597921[_0x32eb92(0x20c)](_0x32eb92(0x1c4))||'';if(!_0x36f7b7[_0x32eb92(0x1ea)](_0x33e674['toLowerCase']()['trim']()))return void(_0x32eb92(0x1c2)!==_0x4bc918&&(_0x4bc918=_0x32eb92(0x1c2),_0x22f28f(_0x597921)));}if(_0xbf9c4a(_0x32eb92(0x209),_0x32eb92(0x1d1)))return void('checkEmail'!==_0x4bc918&&(_0x4bc918=_0x32eb92(0x22e),_0x273c69('状态',_0x32eb92(0x1e3))));if(document[_0x32eb92(0x205)](_0x32eb92(0x21c)))return void(_0x32eb92(0x1a9)!==_0x4bc918&&(_0x4bc918=_0x32eb92(0x1a9),_0x30e487()));const _0x11922e=_0xbf9c4a(_0x32eb92(0x198),_0x32eb92(0x196));if(_0x11922e)return void('homepage'!==_0x4bc918&&(_0x4bc918=_0x32eb92(0x22a),_0x5e6110()));_0x4bc918=null;},0x2ee);}function _0x149b89(_0x3c8fe0){const _0x3484fd=_0x44b5e,_0x3e7da8=_0x3c8fe0[_0x3484fd(0x1e6)](/^(.*?)(\d*)$/);if(!_0x3e7da8)return{'base':_0x3c8fe0,'num':0x0};const _0x2e8b3c=_0x3e7da8[0x1],_0x3af66f=_0x3e7da8[0x2]?parseInt(_0x3e7da8[0x2],0xa):0x0;return{'base':_0x2e8b3c,'num':_0x3af66f};}async function _0x30e487(){const _0x3619ff=_0x44b5e,_0x5e6f19=await _0x52fa14('input[placeholder=\x22Email\x22]');if(!_0x5e6f19||_0x5e6f19[_0x3619ff(0x1f2)]['automationAttached'])return;_0x5e6f19[_0x3619ff(0x1f2)][_0x3619ff(0x240)]='true',_0x273c69('状态',_0x3619ff(0x19d));const _0x271a2e=await GM_getValue(_0x58397f[_0x3619ff(0x1ce)]);if(_0x273c69('下一账户',_0x271a2e||_0x3619ff(0x239)),_0x271a2e)await _0x1048c7(_0x271a2e,_0x5e6f19);else _0x273c69('状态',_0x3619ff(0x1aa)),_0x5e6f19[_0x3619ff(0x1d6)]('blur',async()=>{const _0x148ff9=_0x3619ff,_0x26c73d=_0x5e6f19[_0x148ff9(0x1bf)][_0x148ff9(0x1f9)]()['split']('@')[0x0];_0x26c73d&&await _0x1048c7(_0x26c73d,_0x5e6f19);},{'once':!0x0});}async function _0x1048c7(_0x457fd6,_0x403a42){const _0x478364=_0x44b5e;if(_0x273c69('状态',_0x478364(0x1e8)+_0x457fd6),!await _0x1237bb(_0x457fd6))return void _0x273c69('状态','前缀无效:\x20'+_0x457fd6);if(!await _0x20b2a4(_0x457fd6))return void _0x273c69('状态',_0x478364(0x241)+_0x457fd6);const _0x16248a=_0x457fd6+_0x478364(0x1ee);_0x403a42[_0x478364(0x1bf)]!==_0x16248a&&_0x67f114(_0x403a42,_0x16248a),_0x273c69('状态',_0x478364(0x1c6)+_0x16248a),_0x273c69('状态','等待CF验证...');const _0x351f28=await _0x52fa14('#emailLogin');if(!_0x351f28)return void _0x273c69('状态','错误:\x20未找到继续按钮');const _0x14537a=new MutationObserver(async _0x30cc6b=>{const _0x4dc4bc=_0x478364;!_0x351f28[_0x4dc4bc(0x23b)]&&(_0x14537a[_0x4dc4bc(0x1c8)](),_0x273c69('状态','验证通过,\x20点击继续...'),await _0xe95d89(0xfa),_0x351f28['click'](),await _0x1748c5(_0x457fd6,'Lovart'));});_0x351f28[_0x478364(0x23b)]?_0x14537a['observe'](_0x351f28,{'attributes':!0x0,'attributeFilter':[_0x478364(0x23b)]}):(_0x273c69('状态',_0x478364(0x1cd)),await _0xe95d89(0xfa),_0x351f28[_0x478364(0x211)](),await _0x1748c5(_0x457fd6,_0x478364(0x1e1)));}async function _0x1237bb(_0x4cdc41){const _0x5d3818=_0x44b5e;console['log']('[验证]\x20开始验证前缀:\x20\x22'+_0x4cdc41+'\x22');try{const _0x203355=await new Promise((_0x341d85,_0x3ccebf)=>{const _0x3d67f0=_0x5385;GM_xmlhttpRequest({'method':_0x3d67f0(0x236),'url':_0x447919[_0x3d67f0(0x1a0)]+_0x3d67f0(0x1f1)+Date['now'](),'onload':_0x341d85,'onerror':_0x3ccebf});});if(0xc8===_0x203355[_0x5d3818(0x1c5)]){const _0x5d95ac=_0x203355[_0x5d3818(0x1ca)][_0x5d3818(0x1bd)]('\x0a')[_0x5d3818(0x1f3)](_0xd0ffba=>_0xd0ffba[_0x5d3818(0x1f9)]())[_0x5d3818(0x1a1)](_0x2ac502=>_0x2ac502&&_0x2ac502[_0x5d3818(0x21b)]>0x0);0x0===_0x5d95ac[_0x5d3818(0x21b)]&&console[_0x5d3818(0x1dc)](_0x5d3818(0x251));const _0xc368b=_0x5d95ac['some'](_0x19b933=>_0x19b933[_0x5d3818(0x1fb)](_0x5d3818(0x254))||_0x19b933[_0x5d3818(0x1fb)](_0x5d3818(0x1cf))?_0x4cdc41===_0x19b933:_0x4cdc41[_0x5d3818(0x1fb)](_0x19b933));return console[_0x5d3818(0x1b1)](_0x5d3818(0x223)+_0x4cdc41+_0x5d3818(0x1a7)+_0xc368b),_0xc368b;}console[_0x5d3818(0x1dc)]('[验证]\x20获取规则文件失败，服务器状态码:\x20'+_0x203355['status']);}catch(_0x449cbe){console[_0x5d3818(0x1dc)](_0x5d3818(0x1d3),_0x449cbe);}return console[_0x5d3818(0x1b1)](_0x5d3818(0x1bc)),!0x1;}function _0x20b2a4(_0x366b82){return new Promise(_0x4909b1=>{const _0x44f122=_0x5385;GM_xmlhttpRequest({'method':_0x44f122(0x1b5),'url':_0x447919[_0x44f122(0x19e)],'headers':{'Content-Type':_0x44f122(0x20a)},'data':JSON[_0x44f122(0x1c1)]({'mode':'activate','emailPrefix':_0x366b82}),'timeout':0x4e20,'onload':function(_0x3b0b4d){const _0x50ab11=_0x44f122;try{_0x4909b1(!0x0===JSON[_0x50ab11(0x1ae)](_0x3b0b4d[_0x50ab11(0x1ca)])[_0x50ab11(0x1da)]);}catch(_0x31a01b){_0x4909b1(!0x1);}},'onerror':function(_0xf39a8a){_0x4909b1(!0x1);},'ontimeout':function(){_0x4909b1(!0x1);}});});}async function _0x1748c5(_0x28b06d,_0x2f121c,_0x49d02e=0x3){const _0x2001c9=_0x44b5e;for(let _0x468dc8=0x1;_0x468dc8<=_0x49d02e;_0x468dc8++)if(_0x273c69('状态','第\x20'+_0x468dc8+'/'+_0x49d02e+'\x20次尝试获取登录链接...'),await(async function(){const _0x4cce33=_0x5385;try{const _0x4dd1e1=await new Promise((_0x47d767,_0x35edb9)=>{const _0x526bc4=_0x5385;GM_xmlhttpRequest({'method':_0x526bc4(0x1b5),'url':_0x447919[_0x526bc4(0x19e)],'headers':{'Content-Type':_0x526bc4(0x20a)},'data':JSON[_0x526bc4(0x1c1)]({'mode':_0x526bc4(0x202),'emailPrefix':_0x28b06d,'source':_0x2f121c}),'timeout':0x3a98,'onload':_0x47d767,'onerror':_0x35edb9,'ontimeout':_0x35edb9});}),_0x464b77=JSON[_0x4cce33(0x1ae)](_0x4dd1e1[_0x4cce33(0x1ca)]);if(_0x464b77[_0x4cce33(0x1da)]&&_0x464b77[_0x4cce33(0x24d)])return _0x273c69('状态','成功获取链接,\x20跳转中...'),void(window[_0x4cce33(0x22d)][_0x4cce33(0x1fc)]=_0x464b77['link']);_0x273c69('状态',_0x4cce33(0x242)+(_0x464b77['error']||_0x4cce33(0x1fa)));}catch(_0x4a7d06){throw console['error'](_0x4cce33(0x1a5)+_0x468dc8+_0x4cce33(0x207),_0x4a7d06),_0x4a7d06;}}()))return;else{if(_0x468dc8===_0x49d02e)return void _0x273c69('状态',_0x2001c9(0x208));await _0xe95d89(0x7d0);}}function _0x67f114(_0x46c31b,_0x29cfc7){const _0x2bde35=_0x44b5e;try{return Object[_0x2bde35(0x200)](HTMLInputElement['prototype'],'value')['set'][_0x2bde35(0x204)](_0x46c31b,_0x29cfc7),[_0x2bde35(0x238),_0x2bde35(0x1ff),_0x2bde35(0x24f)][_0x2bde35(0x191)](_0x2804ce=>_0x46c31b['dispatchEvent'](new Event(_0x2804ce,{'bubbles':!0x0}))),!0x0;}catch(_0x1e13b5){return!0x1;}}function _0x336093(){const _0x326ed2=_0x44b5e,_0x5c528c=new URL(window[_0x326ed2(0x22d)]['href']),_0x3aa470=_0x5c528c['searchParams']['get'](_0x326ed2(0x21f));_0x3aa470&&GM_setValue(_0x58397f[_0x326ed2(0x1ce)],_0x3aa470)[_0x326ed2(0x247)](()=>{const _0xb635f0=_0x326ed2;_0x5c528c['searchParams'][_0xb635f0(0x20f)](_0xb635f0(0x21f)),history['replaceState'](null,'',_0x5c528c[_0xb635f0(0x1b2)]());});}}()));function _0x511d(){const _0x441e16=['_tampermonkeyUrl','已进入登录/注册弹窗','backendApiUrl','section[role=\x22dialog\x22]\x20span.truncate','remoteRulesUrl','filter','getElementById','检测到接力链接...','14_4_1','获取登录链接第\x20','14_5','\x22\x20的验证结果为:\x20','target','loginModal','等待手动输入...','已在目标页面','错误:\x20按钮无点击函数','202JVwOJy','parse','set','send','log','toString','tm-mgmt-panel','Referral\x20Link','POST','.0)\x20Gecko/20100101\x20Firefox/','NEXT_REFERRAL_LINK','User-Agent','toLowerCase','find','auto','[验证]\x20因发生错误或验证失败，最终返回:\x20false','split','15_0','value','endsWith','stringify','loggedIn','clientX','alt','status','已填充:\x20','preventDefault','disconnect','open','responseText','[data-testid=\x22user-profile-logout\x22]','hostname','验证通过,\x20点击继续...','LAST_ACCOUNT','cxianyu','grabbing','Check\x20your\x20email\x20to\x20continue','getBoundingClientRect','[验证]\x20验证前缀时发生网络或未知错误:','已登录:\x20','div.bottom-left-user-position\x20img[alt]','addEventListener','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','1272016ckYFfx','N/A','success','mouseup','error','from','错误:\x20非React按钮','userSelect','下一账户','Lovart','#tm-mgmt-title','等待服务器获取登录链接...','querySelectorAll','reload','match','style','验证前缀:\x20','6171onIVdK','includes','logicExecuted','__reactProps$','left','@mdzz.uk','mousemove','header\x20div,\x20header\x20button','?t=','dataset','map','headers','appendChild','fetch','/canvas','random','trim','未知服务器错误','startsWith','href','true','removeEventListener','change','getOwnPropertyDescriptor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getLink','\x20Safari/537.36\x20Edg/','call','querySelector','https://co.taotile.ltd/dizhi.txt','\x20次尝试失败:','Worker网络错误,\x20已达最大重试次数','div,\x20p,\x20h1,\x20h2','application/json','REMOTE_URL','getAttribute','stopPropagation','closest','delete','mousedown','click','/home','setRequestHeader',',\x20等待手动登出...','243985ygCosE','https://lhou.taotile.ltd/','clientY','1640814mGZKfG','5270184kHcTAl','keys','length','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','avatar','已保存接力链接!','next_account','grab','bottom','精确定位引荐按钮...','[验证]\x20前缀\x20\x22','self','function','13_5','warn','referralCode=','childNodes','homepage','主页,\x20尝试调用函数...','guest','location','checkEmail','ENABLED','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','pathname','https://www.lovart.ai?referralCode=ygZD4Bj','tagName','header\x20img[alt][class*=\x22rounded-full\x22]','错误:\x20未找到引荐按钮','GET','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','input','无(等待手动输入)','[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:','disabled','接力链接','replace','apply','cursor','automationAttached','激活失败/超时:\x20','获取链接失败:\x20','错误:\x20DesignNow无点击函数','floor','lovart.ai','tm-mgmt-next-link','then','\x20Safari/537.36','prototype','\x20Safari/605.1.15','12LMZjWf','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','link','onClick','blur','LOCAL_BACKUP_LIST','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','innerHTML','top','chh','last_used_account_lovart','createElement','tm-mgmt-status','forEach','tm-mgmt-next-user','body','XMLHttpRequest','1817850hNQBOZ','Design\x20Now','609975Npkzio','button,\x20a,\x20div','offsetParent','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','textContent'];_0x511d=function(){return _0x441e16;};return _0x511d();}

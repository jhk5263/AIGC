// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.23
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x517f(_0x143f78,_0x10037c){const _0x2c3aa5=_0x2c3a();return _0x517f=function(_0x517f4b,_0x38db71){_0x517f4b=_0x517f4b-0x1e4;let _0x55e459=_0x2c3aa5[_0x517f4b];return _0x55e459;},_0x517f(_0x143f78,_0x10037c);}function _0x2c3a(){const _0x77674c=['已登录:\x20','headers','location','observe','button','14_5','所有存储的账户和链接信息已清除，页面将刷新。','[验证]\x20前缀\x20\x22','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','下一账户','\x22\x20的验证结果为:\x20','stopPropagation','等待手动输入...','/home','checkEmail','filter','根页面，随机跳转...','floor','https://www.lovart.ai?referralCode=XYjhZrf','alt','错误:\x20未找到继续按钮','_tampermonkeyUrl','精确定位引荐按钮...','stringify','querySelectorAll','已保存接力链接!','[验证]\x20获取规则文件失败，服务器状态码:\x20','auto','loggedIn','mousemove','searchParams','2890692dodlcr','setRequestHeader','forEach','激活失败/超时:\x20','错误:\x20未找到引荐链接','preventDefault','avatar','验证通过,\x20点击继续...','backendApiUrl','div.bottom-left-user-position\x20img[alt]','验证前缀:\x20','next_account','470evSgVP','bottom','#tm-mgmt-title','clientX','user','cursor','getLink','?t=','from','random','disconnect','getElementById','split',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','value','keys','header\x20img[alt][class*=\x22rounded-full\x22]','left','apply','right','已进入登录/注册弹窗','addEventListener','成功获取链接,\x20跳转中...','Check\x20your\x20email\x20to\x20continue','mouseup','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','true','getBoundingClientRect','1959335aWhoFn','已填充:\x20','未知服务器错误','parse','log','前缀无效:\x20','Design\x20Now','get','获取登录链接第\x20','270466yHTxYe','接力链接','endsWith','REMOTE_URL','offsetParent','reload','fetch','POST','主页,\x20尝试调用函数...','toString','replace','createElement','GET','\x20次尝试失败:','length','referralCode=','[验证]\x20因发生错误或验证失败，最终返回:\x20false','错误:\x20非React按钮','错误:\x2010秒内未找到DesignNow','.0)\x20Gecko/20100101\x20Firefox/','错误:\x20未找到引荐按钮','open','now','header\x20div,\x20header\x20button','toLowerCase','https://www.lovart.ai?referralCode=358bzLA','961138nrlmbW','link','错误:\x20DesignNow无点击函数','querySelector','tm-mgmt-next-user','function','__reactProps$','等待服务器获取登录链接...',',\x20等待手动登出...','blur','tm-mgmt-clear-storage','prototype','call','match','body','change','responseText','已在目标页面','next_referral_link_lovart','trim','includes','startsWith','dispatchEvent','search','find','793784LPEVur','ENABLED','BUTTON','[验证]\x20开始验证前缀:\x20\x22','tagName','remoteRulesUrl','map','onClick','主页,\x20尝试常规点击...','lovart.ai','loginModal','14uBUuPk','等待CF验证...','\x20Safari/537.36\x20Edg/','错误:\x20按钮无点击函数','User-Agent','https://co.taotile.ltd/dizhi.txt','homepage','warn','[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:','automationAttached','href','检测到接力链接...','\x20Safari/537.36','#emailLogin','closest','95661jpJgen','style','dataset','application/json','NEXT_REFERRAL_LINK','hostname','disabled','cxianyu','some','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','LAST_ACCOUNT','guest','Lovart','tm-mgmt-panel','childNodes','error','1101904dBetZK','LOCAL_BACKUP_LIST','无(等待手动输入)','div,\x20p,\x20h1,\x20h2','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','按钮已定位,\x20直接调用函数...','clientY','.0.','input','click','getAttribute','获取链接失败:\x20','removeEventListener','activate','\x20Safari/605.1.15','3QZRNFj','14_4_1','Worker网络错误,\x20已达最大重试次数','https://co.taotile.ltd/akl.txt','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','userSelect','\x20次尝试获取登录链接...','target','grab','input[placeholder=\x22Email\x22]','status','success','textContent','innerHTML','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','grabbing','logicExecuted','nodeType','XMLHttpRequest'];_0x2c3a=function(){return _0x77674c;};return _0x2c3a();}(function(_0x2939ba,_0x1876e2){const _0x2a8a85=_0x517f,_0x15f41f=_0x2939ba();while(!![]){try{const _0x474293=parseInt(_0x2a8a85(0x230))/0x1+parseInt(_0x2a8a85(0x24a))/0x2*(parseInt(_0x2a8a85(0x29c))/0x3)+-parseInt(_0x2a8a85(0x28d))/0x4+-parseInt(_0x2a8a85(0x227))/0x5+parseInt(_0x2a8a85(0x1ff))/0x6+parseInt(_0x2a8a85(0x26e))/0x7*(parseInt(_0x2a8a85(0x263))/0x8)+parseInt(_0x2a8a85(0x27d))/0x9*(-parseInt(_0x2a8a85(0x20b))/0xa);if(_0x474293===_0x1876e2)break;else _0x15f41f['push'](_0x15f41f['shift']());}catch(_0x1f208c){_0x15f41f['push'](_0x15f41f['shift']());}}}(_0x2c3a,0x408a5),(function(){'use strict';const _0xdc1746=_0x517f;if(window['top']!==window['self'])return;const _0x207e17={'ENABLED':!0x0,'REMOTE_URL':_0xdc1746(0x273),'LOCAL_BACKUP_LIST':[_0xdc1746(0x1f2),_0xdc1746(0x249)]},_0x4bf1ad={'NEXT_REFERRAL_LINK':_0xdc1746(0x25c),'LAST_ACCOUNT':'last_used_account_lovart'},_0x2d84f={'emailSuffix':'@mdzz.uk','remoteRulesUrl':_0xdc1746(0x29f),'backendApiUrl':'https://lhou.taotile.ltd/'},_0x2f4010=[_0xdc1746(0x288),_0xdc1746(0x20f),_0xdc1746(0x205),''];_0x177639(),document[_0xdc1746(0x220)]('DOMContentLoaded',_0x389ce9);async function _0x389ce9(){const _0x3a08e4=_0xdc1746;_0x69bb50(),await _0x262a53(0x32);const _0x22228b=window[_0x3a08e4(0x2b1)]['pathname'],_0x381127=window[_0x3a08e4(0x2b1)][_0x3a08e4(0x261)];if(_0x22228b[_0x3a08e4(0x25f)](_0x3a08e4(0x1ed))||_0x22228b['startsWith']('/canvas')||_0x381127[_0x3a08e4(0x25e)]('referralCode='))_0xeb3e1b('状态',_0x3a08e4(0x25b));else{const _0x1706ed=await GM_getValue(_0x4bf1ad[_0x3a08e4(0x281)],null);if(_0x1706ed){await GM_setValue(_0x4bf1ad[_0x3a08e4(0x281)],null),_0xeb3e1b('状态',_0x3a08e4(0x279)),window['location']['href']=_0x1706ed;return;}const _0xa72bf8=_0x22228b==='/'&&!_0x381127;if(_0xa72bf8&&_0x207e17[_0x3a08e4(0x264)]){_0xeb3e1b('状态',_0x3a08e4(0x1f0));const _0x5d50de=await _0x2dc8c1()||_0x207e17[_0x3a08e4(0x28e)];if(_0x5d50de&&_0x5d50de[_0x3a08e4(0x23e)]>0x0){const _0x4d19dd=_0x5d50de[Math[_0x3a08e4(0x1f1)](Math[_0x3a08e4(0x214)]()*_0x5d50de[_0x3a08e4(0x23e)])];window[_0x3a08e4(0x2b1)][_0x3a08e4(0x278)]=_0x4d19dd;return;}}}_0x352e56(),_0x844fed();}const _0x49f2bb=(_0x43b193,_0x4c22d1=0x1388)=>new Promise(_0xf49f86=>{const _0x223c4d=setInterval(()=>{const _0x31efff=_0x517f,_0x5c5721=document[_0x31efff(0x24d)](_0x43b193);_0x5c5721&&(clearInterval(_0x223c4d),_0xf49f86(_0x5c5721));},0x64);setTimeout(()=>{clearInterval(_0x223c4d),_0xf49f86(null);},_0x4c22d1);}),_0x262a53=_0x5c6201=>new Promise(_0x340cb3=>setTimeout(_0x340cb3,_0x5c6201));function _0x5f3e9f(_0x6472be,_0x87ce3b,_0x53ffb2=![]){const _0x48645c=_0xdc1746,_0x5f1cda=document['querySelectorAll'](_0x6472be);for(const _0x4c6e44 of _0x5f1cda){const _0x3e445b=_0x4c6e44[_0x48645c(0x2a8)][_0x48645c(0x25d)]()['toLowerCase']();if(_0x4c6e44[_0x48645c(0x234)]!==null&&(_0x53ffb2?_0x3e445b===_0x87ce3b[_0x48645c(0x248)]():_0x3e445b[_0x48645c(0x25e)](_0x87ce3b['toLowerCase']())))return _0x4c6e44;}return null;}async function _0x2dc8c1(){const _0x10700f=_0xdc1746;if(!_0x207e17[_0x10700f(0x233)])return null;const _0x47ea1c=_0x207e17[_0x10700f(0x233)]+'?t='+Date[_0x10700f(0x246)]();return new Promise(_0xb138fb=>{const _0x1d8fc3=_0x10700f;GM_xmlhttpRequest({'method':_0x1d8fc3(0x23c),'url':_0x47ea1c,'onload':function(_0xe9a139){const _0x13928b=_0x1d8fc3;0xc8===_0xe9a139[_0x13928b(0x2a6)]?_0xb138fb(_0xe9a139[_0x13928b(0x25a)][_0x13928b(0x257)](/^(https?:\/\/\S+)/gm)||[]):_0xb138fb(null);},'onerror':function(){_0xb138fb(null);}});});}function _0x177639(){const _0x476897=_0xdc1746,_0x1c3601=()=>{const _0x1c1f2e=_0x517f,_0x5b47c5=Math[_0x1c1f2e(0x214)]();if(_0x5b47c5<0.6){const _0x4ef24d=0x7e+Math[_0x1c1f2e(0x1f1)](0x5*Math['random']()),_0x2ce5b7=0x1388+Math['floor'](0xbb8*Math[_0x1c1f2e(0x214)]()),_0x187b5e=Math[_0x1c1f2e(0x1f1)](0x96*Math[_0x1c1f2e(0x214)]()),_0x47038d=_0x4ef24d+_0x1c1f2e(0x294)+_0x2ce5b7+'.'+_0x187b5e,_0x429603=Math[_0x1c1f2e(0x214)]();return _0x429603<0.6?_0x1c1f2e(0x286)+_0x47038d+'\x20Safari/537.36':_0x429603<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x47038d+_0x1c1f2e(0x27a):_0x1c1f2e(0x286)+_0x47038d+_0x1c1f2e(0x270)+_0x47038d;}if(_0x5b47c5<0.9){const _0x35d4ff=0x7f+Math[_0x1c1f2e(0x1f1)](0x5*Math[_0x1c1f2e(0x214)]());return Math[_0x1c1f2e(0x214)]()<0.65?'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:'+_0x35d4ff+'.0)\x20Gecko/20100101\x20Firefox/'+_0x35d4ff+'.0':_0x1c1f2e(0x2a0)+_0x35d4ff+_0x1c1f2e(0x243)+_0x35d4ff+'.0';}{const _0x4df879={'18.0':'15_0','17.5':_0x1c1f2e(0x1e5),'17.4.1':_0x1c1f2e(0x29d),'16.6':'13_5'},_0x5e26b9=Object[_0x1c1f2e(0x21a)](_0x4df879),_0x2be56e=_0x5e26b9[Math['floor'](Math[_0x1c1f2e(0x214)]()*_0x5e26b9['length'])],_0x1ad26a=_0x4df879[_0x2be56e];return'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_'+_0x1ad26a[_0x1c1f2e(0x23a)](/\./g,'_')+_0x1c1f2e(0x218)+_0x2be56e+_0x1c1f2e(0x29b);}},_0x518dc9=_0x1c3601(),_0x210123=unsafeWindow[_0x476897(0x236)];unsafeWindow[_0x476897(0x236)]=function(_0xb225f8,_0x5ac651){const _0x17efbd=_0x476897;let _0x1f1497={..._0x5ac651};try{if(new URL(_0xb225f8,window[_0x17efbd(0x2b1)][_0x17efbd(0x278)])[_0x17efbd(0x282)][_0x17efbd(0x232)](_0x17efbd(0x26c))){const _0x46c5e8=new Headers(_0x1f1497[_0x17efbd(0x2b0)]);_0x46c5e8['set'](_0x17efbd(0x272),_0x518dc9),_0x1f1497[_0x17efbd(0x2b0)]=_0x46c5e8;}}catch(_0x2dffd1){console[_0x17efbd(0x275)]('[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:',_0x2dffd1,_0x5ac651);}return _0x210123[_0x17efbd(0x256)](this,_0xb225f8,_0x1f1497);};const _0x1c4f47=unsafeWindow[_0x476897(0x2ae)][_0x476897(0x255)][_0x476897(0x245)],_0xdbd1d8=unsafeWindow[_0x476897(0x2ae)][_0x476897(0x255)]['send'];unsafeWindow[_0x476897(0x2ae)][_0x476897(0x255)][_0x476897(0x245)]=function(_0x1878d8,_0x2e8224,..._0x2d35f1){const _0x243477=_0x476897;return this['_tampermonkeyUrl']=_0x2e8224,_0x1c4f47[_0x243477(0x21d)](this,[_0x1878d8,_0x2e8224,..._0x2d35f1]);},unsafeWindow[_0x476897(0x2ae)][_0x476897(0x255)]['send']=function(..._0x5d1927){const _0x153753=_0x476897;try{this['_tampermonkeyUrl']&&new URL(this['_tampermonkeyUrl'],window['location'][_0x153753(0x278)])[_0x153753(0x282)][_0x153753(0x232)]('lovart.ai')&&this[_0x153753(0x200)](_0x153753(0x272),_0x518dc9);}catch(_0x3b7180){console['warn'](_0x153753(0x276),this[_0x153753(0x1f5)],_0x3b7180);}return _0xdbd1d8[_0x153753(0x21d)](this,_0x5d1927);};}function _0x1a0900(_0x406477,_0x2f0efb){const _0x119efa=_0xdc1746;let _0x5e63c1,_0x5d0c5e,_0x2300ef=![];_0x2f0efb['addEventListener']('mousedown',_0x163ec9=>{const _0x3d6e1b=_0x517f;if(_0x163ec9[_0x3d6e1b(0x2a3)][_0x3d6e1b(0x267)]===_0x3d6e1b(0x265))return;_0x2300ef=!![],_0x163ec9['preventDefault']();const _0x575146=_0x406477[_0x3d6e1b(0x226)]();_0x5e63c1=_0x163ec9[_0x3d6e1b(0x20e)]-_0x575146[_0x3d6e1b(0x21c)],_0x5d0c5e=_0x163ec9['clientY']-_0x575146['top'],_0x2f0efb['style'][_0x3d6e1b(0x210)]=_0x3d6e1b(0x2ab),document['body'][_0x3d6e1b(0x27e)][_0x3d6e1b(0x2a1)]='none',_0x406477['style'][_0x3d6e1b(0x21e)]='auto',_0x406477['style'][_0x3d6e1b(0x20c)]=_0x3d6e1b(0x1fb),document[_0x3d6e1b(0x220)](_0x3d6e1b(0x1fd),_0xb962e2),document[_0x3d6e1b(0x220)](_0x3d6e1b(0x223),_0x121f8c,{'once':!![]});});function _0xb962e2(_0x61932c){const _0xe7ced4=_0x517f;if(!_0x2300ef)return;_0x406477[_0xe7ced4(0x27e)][_0xe7ced4(0x21c)]=_0x61932c['clientX']-_0x5e63c1+'px',_0x406477[_0xe7ced4(0x27e)]['top']=_0x61932c[_0xe7ced4(0x293)]-_0x5d0c5e+'px';}function _0x121f8c(){const _0x248f7b=_0x517f;_0x2300ef=![],_0x2f0efb[_0x248f7b(0x27e)][_0x248f7b(0x210)]='grab',document[_0x248f7b(0x258)][_0x248f7b(0x27e)]['userSelect']=_0x248f7b(0x1fb),document[_0x248f7b(0x299)](_0x248f7b(0x1fd),_0xb962e2);}_0x2f0efb[_0x119efa(0x27e)][_0x119efa(0x210)]=_0x119efa(0x2a4);}function _0x69bb50(){const _0x2feab4=_0xdc1746;if(document[_0x2feab4(0x216)](_0x2feab4(0x28a)))return;const _0x44db2f=document[_0x2feab4(0x23b)]('div');_0x44db2f['id']=_0x2feab4(0x28a),_0x44db2f[_0x2feab4(0x2a9)]=_0x2feab4(0x1e8);const _0x2084cc=_0x44db2f['querySelector'](_0x2feab4(0x20d));_0x1a0900(_0x44db2f,_0x2084cc),document[_0x2feab4(0x258)]['appendChild'](_0x44db2f),GM_addStyle('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),document[_0x2feab4(0x216)](_0x2feab4(0x254))[_0x2feab4(0x220)](_0x2feab4(0x296),async()=>{const _0x3a39bd=_0x2feab4;await GM_setValue(_0x4bf1ad[_0x3a39bd(0x287)],null),await GM_setValue(_0x4bf1ad[_0x3a39bd(0x281)],null),alert(_0x3a39bd(0x1e6)),location[_0x3a39bd(0x235)]();});}function _0xeb3e1b(_0x555828,_0x1019af){const _0xc72208=_0xdc1746,_0x2bbaf6={'状态':'tm-mgmt-status','下一账户':_0xc72208(0x24e),'接力链接':'tm-mgmt-next-link'}[_0x555828];if(_0x2bbaf6){const _0x2cc138=document[_0xc72208(0x216)](_0x2bbaf6);if(_0x2cc138)_0x2cc138[_0xc72208(0x2a8)]=_0x1019af;}}async function _0x13080a(){const _0x26fbde=_0xdc1746;_0xeb3e1b('状态',_0x26fbde(0x1f6));let _0xc8b3e=null;const _0x4e360e=document[_0x26fbde(0x1f8)](_0x26fbde(0x247));for(const _0x2cb5c4 of _0x4e360e){const _0x4bc9a2=Array[_0x26fbde(0x213)](_0x2cb5c4[_0x26fbde(0x28b)])['some'](_0x9aed11=>0x3===_0x9aed11[_0x26fbde(0x2ad)]&&'Referral\x20Link'===_0x9aed11[_0x26fbde(0x2a8)][_0x26fbde(0x25d)]());if(_0x4bc9a2&&null!==_0x2cb5c4['offsetParent']){_0xc8b3e=_0x2cb5c4;break;}}if(!_0xc8b3e)return void _0xeb3e1b('状态',_0x26fbde(0x244));_0xeb3e1b('状态',_0x26fbde(0x292));const _0x165db8=Object[_0x26fbde(0x21a)](_0xc8b3e)['find'](_0x2dc655=>_0x2dc655[_0x26fbde(0x25f)](_0x26fbde(0x250)));if(_0x165db8){const _0x49834c=_0xc8b3e[_0x165db8];_0x49834c&&_0x26fbde(0x24f)==typeof _0x49834c[_0x26fbde(0x26a)]?_0x49834c['onClick']():_0xeb3e1b('状态',_0x26fbde(0x271));}else _0xeb3e1b('状态',_0x26fbde(0x241));const _0x3d0e19=await _0x49f2bb('section[role=\x22dialog\x22]\x20span.truncate');if(!_0x3d0e19){_0xeb3e1b('状态',_0x26fbde(0x203));const _0x4c1765=await _0x49f2bb('section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]',0x3e8);return void(_0x4c1765&&_0x4c1765['click']());}const _0xba06aa=_0x3d0e19[_0x26fbde(0x2a8)][_0x26fbde(0x25d)]();if(_0xba06aa&&_0xba06aa[_0x26fbde(0x25e)](_0x26fbde(0x23f))){await GM_setValue(_0x4bf1ad[_0x26fbde(0x281)],_0xba06aa);const _0x2ba69f=_0xba06aa['match'](/referralCode=([^&]+)/);_0x2ba69f&&_0x2ba69f[0x1]&&_0xeb3e1b(_0x26fbde(0x231),_0x2ba69f[0x1]['substring'](0x0,0x7)),_0xeb3e1b('状态',_0x26fbde(0x1f9));}const _0x4a3a4a=await _0x49f2bb(_0x26fbde(0x224));_0x4a3a4a&&_0x4a3a4a['click']();}async function _0x144122(_0x428450){const _0x103d2c=_0xdc1746,_0x3ba638=(_0x428450['getAttribute'](_0x103d2c(0x1f3))||'')[_0x103d2c(0x25d)]();if(!_0x3ba638||document[_0x103d2c(0x258)][_0x103d2c(0x27f)][_0x103d2c(0x2ac)])return;document[_0x103d2c(0x258)][_0x103d2c(0x27f)][_0x103d2c(0x2ac)]='true',_0xeb3e1b('状态',_0x103d2c(0x2af)+_0x3ba638),_0xeb3e1b(_0x103d2c(0x231),'N/A'),await _0x262a53(0x5dc),await _0x13080a();const {base:_0x21d7ec,num:_0x5853d0}=_0x43e06f(_0x3ba638),_0x19910f=''+_0x21d7ec+(_0x5853d0+0x1);await GM_setValue(_0x4bf1ad[_0x103d2c(0x287)],_0x19910f),_0xeb3e1b(_0x103d2c(0x1e9),_0x19910f),_0xeb3e1b('状态',_0x103d2c(0x2af)+_0x3ba638+_0x103d2c(0x252)),await _0x262a53(0xfa),document[_0x103d2c(0x258)]['addEventListener']('click',_0x3e3f62=>{const _0x365d48=_0x103d2c,_0x13e6ab=_0x3e3f62['target'][_0x365d48(0x27c)]('[data-testid=\x22user-profile-logout\x22]');_0x13e6ab&&(_0x3e3f62[_0x365d48(0x204)](),_0x3e3f62[_0x365d48(0x1eb)](),window[_0x365d48(0x2b1)]['reload']());},{'capture':!0x0});}async function _0xd03995(){const _0x478a0b=_0xdc1746;_0xeb3e1b('状态','主页,\x20等待\x20\x27Design\x20Now\x27...');let _0xb3339c=null;for(let _0x13227e=0x0;_0x13227e<0x14;_0x13227e++){if(_0xb3339c=_0x5f3e9f(_0x478a0b(0x1e4),_0x478a0b(0x22d),!0x1))break;await _0x262a53(0x1f4);}if(!_0xb3339c)return void _0xeb3e1b('状态',_0x478a0b(0x242));_0xeb3e1b('状态',_0x478a0b(0x238));const _0x1afedd=Object[_0x478a0b(0x21a)](_0xb3339c)[_0x478a0b(0x262)](_0x8b345f=>_0x8b345f[_0x478a0b(0x25f)](_0x478a0b(0x250)));if(_0x1afedd){const _0x404ed6=_0xb3339c[_0x1afedd];_0x404ed6&&_0x478a0b(0x24f)==typeof _0x404ed6['onClick']?_0x404ed6['onClick']():_0xeb3e1b('状态',_0x478a0b(0x24c));}else _0xeb3e1b('状态',_0x478a0b(0x26b)),_0xb3339c[_0x478a0b(0x296)]();}function _0x844fed(){let _0x398b3e=null;setInterval(()=>{const _0x15e939=_0x517f,_0x349111=document[_0x15e939(0x24d)](_0x15e939(0x21b))||document[_0x15e939(0x24d)](_0x15e939(0x208));if(_0x349111){const _0x37ef21=_0x349111[_0x15e939(0x297)]('alt')||'';if(!_0x2f4010[_0x15e939(0x25e)](_0x37ef21[_0x15e939(0x248)]()[_0x15e939(0x25d)]()))return void(_0x15e939(0x1fc)!==_0x398b3e&&(_0x398b3e=_0x15e939(0x1fc),_0x144122(_0x349111)));}if(_0x5f3e9f(_0x15e939(0x290),_0x15e939(0x222)))return void(_0x15e939(0x1ee)!==_0x398b3e&&(_0x398b3e=_0x15e939(0x1ee),_0xeb3e1b('状态',_0x15e939(0x251))));if(document[_0x15e939(0x24d)](_0x15e939(0x291)))return void(_0x15e939(0x26d)!==_0x398b3e&&(_0x398b3e=_0x15e939(0x26d),_0xae5d63()));const _0x27c9d6=_0x5f3e9f('button,\x20a,\x20div',_0x15e939(0x22d));if(_0x27c9d6)return void(_0x15e939(0x274)!==_0x398b3e&&(_0x398b3e=_0x15e939(0x274),_0xd03995()));_0x398b3e=null;},0x2ee);}function _0x43e06f(_0x2bc3be){const _0x5e2972=_0xdc1746,_0x42e6cb=_0x2bc3be[_0x5e2972(0x257)](/^(.*?)(\d*)$/);if(!_0x42e6cb)return{'base':_0x2bc3be,'num':0x0};const _0x4c3d51=_0x42e6cb[0x1],_0x1e00e3=_0x42e6cb[0x2]?parseInt(_0x42e6cb[0x2],0xa):0x0;return{'base':_0x4c3d51,'num':_0x1e00e3};}async function _0xae5d63(){const _0x5129cc=_0xdc1746,_0x4cb925=await _0x49f2bb(_0x5129cc(0x2a5));if(!_0x4cb925||_0x4cb925[_0x5129cc(0x27f)][_0x5129cc(0x277)])return;_0x4cb925[_0x5129cc(0x27f)][_0x5129cc(0x277)]=_0x5129cc(0x225),_0xeb3e1b('状态',_0x5129cc(0x21f));const _0x1b0fa9=await GM_getValue(_0x4bf1ad[_0x5129cc(0x287)]);if(_0xeb3e1b(_0x5129cc(0x1e9),_0x1b0fa9||_0x5129cc(0x28f)),_0x1b0fa9)await _0x3a3e08(_0x1b0fa9,_0x4cb925);else _0xeb3e1b('状态',_0x5129cc(0x1ec)),_0x4cb925['addEventListener'](_0x5129cc(0x253),async()=>{const _0x5e88ba=_0x4cb925['value']['trim']()['split']('@')[0x0];_0x5e88ba&&await _0x3a3e08(_0x5e88ba,_0x4cb925);},{'once':!0x0});}async function _0x3a3e08(_0x561448,_0xb3bcc5){const _0x46ca40=_0xdc1746;if(_0xeb3e1b('状态',_0x46ca40(0x209)+_0x561448),!await _0x39aa80(_0x561448))return void _0xeb3e1b('状态',_0x46ca40(0x22c)+_0x561448);if(!await _0x548c9c(_0x561448))return void _0xeb3e1b('状态',_0x46ca40(0x202)+_0x561448);const _0x50c97a=_0x561448+'@mdzz.uk';_0xb3bcc5[_0x46ca40(0x219)]!==_0x50c97a&&_0x4860c9(_0xb3bcc5,_0x50c97a),_0xeb3e1b('状态',_0x46ca40(0x228)+_0x50c97a),_0xeb3e1b('状态',_0x46ca40(0x26f));const _0x35a115=await _0x49f2bb(_0x46ca40(0x27b));if(!_0x35a115)return void _0xeb3e1b('状态',_0x46ca40(0x1f4));const _0x40fdbf=new MutationObserver(async _0x208110=>{const _0x5b8c6d=_0x46ca40;!_0x35a115[_0x5b8c6d(0x283)]&&(_0x40fdbf[_0x5b8c6d(0x215)](),_0xeb3e1b('状态',_0x5b8c6d(0x206)),await _0x262a53(0xfa),_0x35a115[_0x5b8c6d(0x296)](),await _0x101f12(_0x561448,_0x5b8c6d(0x289)));});_0x35a115[_0x46ca40(0x283)]?_0x40fdbf[_0x46ca40(0x2b2)](_0x35a115,{'attributes':!0x0,'attributeFilter':[_0x46ca40(0x283)]}):(_0xeb3e1b('状态',_0x46ca40(0x206)),await _0x262a53(0xfa),_0x35a115['click'](),await _0x101f12(_0x561448,_0x46ca40(0x289)));}async function _0x39aa80(_0x5c660f){const _0x324e13=_0xdc1746;console['log'](_0x324e13(0x266)+_0x5c660f+'\x22');try{const _0x4e78a4=await new Promise((_0x1229d3,_0x2c89a1)=>{const _0x394d91=_0x324e13;GM_xmlhttpRequest({'method':_0x394d91(0x23c),'url':_0x2d84f[_0x394d91(0x268)]+_0x394d91(0x212)+Date[_0x394d91(0x246)](),'onload':_0x1229d3,'onerror':_0x2c89a1});});if(0xc8===_0x4e78a4[_0x324e13(0x2a6)]){const _0x177436=_0x4e78a4['responseText'][_0x324e13(0x217)]('\x0a')[_0x324e13(0x269)](_0x592cfa=>_0x592cfa[_0x324e13(0x25d)]())[_0x324e13(0x1ef)](_0x59aa7a=>_0x59aa7a&&_0x59aa7a[_0x324e13(0x23e)]>0x0);0x0===_0x177436[_0x324e13(0x23e)]&&console[_0x324e13(0x28c)](_0x324e13(0x2aa));const _0x8c6e0=_0x177436[_0x324e13(0x285)](_0x4c1fb4=>_0x4c1fb4['startsWith']('chh')||_0x4c1fb4[_0x324e13(0x25f)](_0x324e13(0x284))?_0x5c660f===_0x4c1fb4:_0x5c660f[_0x324e13(0x25f)](_0x4c1fb4));return console[_0x324e13(0x22b)](_0x324e13(0x1e7)+_0x5c660f+_0x324e13(0x1ea)+_0x8c6e0),_0x8c6e0;}console[_0x324e13(0x28c)](_0x324e13(0x1fa)+_0x4e78a4[_0x324e13(0x2a6)]);}catch(_0xce213e){console[_0x324e13(0x28c)]('[验证]\x20验证前缀时发生网络或未知错误:',_0xce213e);}return console[_0x324e13(0x22b)](_0x324e13(0x240)),!0x1;}function _0x548c9c(_0x230092){return new Promise(_0x107bda=>{const _0x2176e5=_0x517f;GM_xmlhttpRequest({'method':_0x2176e5(0x237),'url':_0x2d84f['backendApiUrl'],'headers':{'Content-Type':_0x2176e5(0x280)},'data':JSON['stringify']({'mode':_0x2176e5(0x29a),'emailPrefix':_0x230092}),'timeout':0x4e20,'onload':function(_0x4d0b76){const _0x44a96e=_0x2176e5;try{_0x107bda(!0x0===JSON['parse'](_0x4d0b76[_0x44a96e(0x25a)])[_0x44a96e(0x2a7)]);}catch(_0x421204){_0x107bda(!0x1);}},'onerror':function(_0x1c1217){_0x107bda(!0x1);},'ontimeout':function(){_0x107bda(!0x1);}});});}async function _0x101f12(_0x4df883,_0x34f5ac,_0x3ebed3=0x3){const _0x165908=_0xdc1746;for(let _0x2c55f4=0x1;_0x2c55f4<=_0x3ebed3;_0x2c55f4++)if(_0xeb3e1b('状态','第\x20'+_0x2c55f4+'/'+_0x3ebed3+_0x165908(0x2a2)),await(async function(){const _0x289bb2=_0x165908;try{const _0x521a6c=await new Promise((_0x3943bd,_0x195e2a)=>{const _0x39d114=_0x517f;GM_xmlhttpRequest({'method':_0x39d114(0x237),'url':_0x2d84f[_0x39d114(0x207)],'headers':{'Content-Type':'application/json'},'data':JSON[_0x39d114(0x1f7)]({'mode':_0x39d114(0x211),'emailPrefix':_0x4df883,'source':_0x34f5ac}),'timeout':0x3a98,'onload':_0x3943bd,'onerror':_0x195e2a,'ontimeout':_0x195e2a});}),_0x1b5b34=JSON[_0x289bb2(0x22a)](_0x521a6c[_0x289bb2(0x25a)]);if(_0x1b5b34[_0x289bb2(0x2a7)]&&_0x1b5b34[_0x289bb2(0x24b)])return _0xeb3e1b('状态',_0x289bb2(0x221)),void(window[_0x289bb2(0x2b1)][_0x289bb2(0x278)]=_0x1b5b34[_0x289bb2(0x24b)]);_0xeb3e1b('状态',_0x289bb2(0x298)+(_0x1b5b34[_0x289bb2(0x28c)]||_0x289bb2(0x229)));}catch(_0x21e3fa){throw console['error'](_0x289bb2(0x22f)+_0x2c55f4+_0x289bb2(0x23d),_0x21e3fa),_0x21e3fa;}}()))return;else{if(_0x2c55f4===_0x3ebed3)return void _0xeb3e1b('状态',_0x165908(0x29e));await _0x262a53(0x7d0);}}function _0x4860c9(_0x144c54,_0x145ad3){const _0x11f047=_0xdc1746;try{return Object['getOwnPropertyDescriptor'](HTMLInputElement['prototype'],_0x11f047(0x219))['set'][_0x11f047(0x256)](_0x144c54,_0x145ad3),[_0x11f047(0x295),_0x11f047(0x259),_0x11f047(0x253)][_0x11f047(0x201)](_0x169d47=>_0x144c54[_0x11f047(0x260)](new Event(_0x169d47,{'bubbles':!0x0}))),!0x0;}catch(_0x413e85){return!0x1;}}function _0x352e56(){const _0x43bca6=_0xdc1746,_0x4ceeaf=new URL(window[_0x43bca6(0x2b1)][_0x43bca6(0x278)]),_0x5ec4ec=_0x4ceeaf[_0x43bca6(0x1fe)][_0x43bca6(0x22e)]('next_account');_0x5ec4ec&&GM_setValue(_0x4bf1ad['LAST_ACCOUNT'],_0x5ec4ec)['then'](()=>{const _0x503a9e=_0x43bca6;_0x4ceeaf[_0x503a9e(0x1fe)]['delete'](_0x503a9e(0x20a)),history['replaceState'](null,'',_0x4ceeaf[_0x503a9e(0x239)]());});}}()));

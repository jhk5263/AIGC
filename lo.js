// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.23
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
(function(_0x4109c9,_0x13267e){const _0x224f84=_0x2625,_0x224f3b=_0x4109c9();while(!![]){try{const _0x2a9e78=parseInt(_0x224f84(0x1fb))/0x1+-parseInt(_0x224f84(0x270))/0x2*(-parseInt(_0x224f84(0x1dd))/0x3)+parseInt(_0x224f84(0x266))/0x4+parseInt(_0x224f84(0x1cf))/0x5*(-parseInt(_0x224f84(0x205))/0x6)+-parseInt(_0x224f84(0x221))/0x7*(parseInt(_0x224f84(0x21c))/0x8)+parseInt(_0x224f84(0x242))/0x9+-parseInt(_0x224f84(0x231))/0xa*(parseInt(_0x224f84(0x243))/0xb);if(_0x2a9e78===_0x13267e)break;else _0x224f3b['push'](_0x224f3b['shift']());}catch(_0x39ca1f){_0x224f3b['push'](_0x224f3b['shift']());}}}(_0x1fb4,0xb05a5),(function(){'use strict';const _0x104d74=_0x2625;if(window[_0x104d74(0x258)]!==window[_0x104d74(0x1d6)])return;const _0x4fc574={'ENABLED':!0x0,'REMOTE_URL':_0x104d74(0x1f7),'LOCAL_BACKUP_LIST':[_0x104d74(0x25f),_0x104d74(0x25f)]},_0x320f9f={'NEXT_REFERRAL_LINK':_0x104d74(0x215),'LAST_ACCOUNT':'last_used_account_lovart'},_0x5a3963={'emailSuffix':'@mdzz.uk','remoteRulesUrl':_0x104d74(0x27f),'backendApiUrl':_0x104d74(0x276)},_0xd55998=[_0x104d74(0x273),'user',_0x104d74(0x201),''];_0x2bafd6(),document['addEventListener'](_0x104d74(0x204),_0x10ae77);async function _0x10ae77(){const _0x5e7b68=_0x104d74;_0x2dda21(),await _0x20a549(0x32);const _0x94bc09=window[_0x5e7b68(0x1e8)][_0x5e7b68(0x279)],_0x3d98db=window[_0x5e7b68(0x1e8)]['search'];if(_0x94bc09['startsWith']('/home')||_0x94bc09['startsWith'](_0x5e7b68(0x26f))||_0x3d98db['includes'](_0x5e7b68(0x23c)))_0x57d1ed('状态',_0x5e7b68(0x218));else{const _0x1dd20f=await GM_getValue(_0x320f9f[_0x5e7b68(0x1f3)],null);if(_0x1dd20f){await GM_setValue(_0x320f9f[_0x5e7b68(0x1f3)],null),_0x57d1ed('状态',_0x5e7b68(0x24f)),window['location'][_0x5e7b68(0x1c3)]=_0x1dd20f;return;}const _0x464ef3=_0x94bc09==='/'&&!_0x3d98db;if(_0x464ef3&&_0x4fc574[_0x5e7b68(0x271)]){_0x57d1ed('状态','根页面，随机跳转...');const _0x284ee1=await _0x4378d4()||_0x4fc574[_0x5e7b68(0x23b)];if(_0x284ee1&&_0x284ee1[_0x5e7b68(0x277)]>0x0){const _0xd30ae=_0x284ee1[Math[_0x5e7b68(0x214)](Math['random']()*_0x284ee1[_0x5e7b68(0x277)])];window[_0x5e7b68(0x1e8)][_0x5e7b68(0x1c3)]=_0xd30ae;return;}}}_0x38005c(),_0x523c8b();}const _0x5e390c=(_0x268354,_0x4dc354=0x1388)=>new Promise(_0x218d9f=>{const _0x2e3780=setInterval(()=>{const _0x165a16=_0x2625,_0x38ded1=document[_0x165a16(0x25b)](_0x268354);_0x38ded1&&(clearInterval(_0x2e3780),_0x218d9f(_0x38ded1));},0x64);setTimeout(()=>{clearInterval(_0x2e3780),_0x218d9f(null);},_0x4dc354);}),_0x20a549=_0xd3c1b9=>new Promise(_0xf860b=>setTimeout(_0xf860b,_0xd3c1b9));function _0x3c9f23(_0x3162a5,_0x38cd07,_0x509c0e=![]){const _0x35aeb0=_0x104d74,_0x585c59=document['querySelectorAll'](_0x3162a5);for(const _0x3feba4 of _0x585c59){const _0x12d2c8=_0x3feba4[_0x35aeb0(0x269)][_0x35aeb0(0x1d1)]()[_0x35aeb0(0x1d0)]();if(_0x509c0e?_0x12d2c8===_0x38cd07['toLowerCase']():_0x12d2c8[_0x35aeb0(0x278)](_0x38cd07[_0x35aeb0(0x1d0)]()))return _0x3feba4;}return null;}async function _0x4378d4(){const _0x36c918=_0x104d74;if(!_0x4fc574['REMOTE_URL'])return null;const _0x295bbb=_0x4fc574[_0x36c918(0x253)]+_0x36c918(0x275)+Date['now']();return new Promise(_0x3ab39d=>{const _0x59f584=_0x36c918;GM_xmlhttpRequest({'method':_0x59f584(0x239),'url':_0x295bbb,'onload':function(_0x1332e7){const _0x1374d=_0x59f584;0xc8===_0x1332e7['status']?_0x3ab39d(_0x1332e7[_0x1374d(0x23d)][_0x1374d(0x263)](/^(https?:\/\/\S+)/gm)||[]):_0x3ab39d(null);},'onerror':function(){_0x3ab39d(null);}});});}function _0x2bafd6(){const _0xbc1743=_0x104d74,_0x195c73=()=>{const _0x54008c=_0x2625,_0x14fb75=Math[_0x54008c(0x248)]();if(_0x14fb75<0.6){const _0x401ebd=0x7e+Math[_0x54008c(0x214)](Math[_0x54008c(0x248)]()*0x5),_0x573d35=0x1388+Math[_0x54008c(0x214)](Math[_0x54008c(0x248)]()*0xbb8),_0x2e6c9c=Math[_0x54008c(0x214)](Math[_0x54008c(0x248)]()*0x96),_0xbd8fb=_0x401ebd+_0x54008c(0x241)+_0x573d35+'.'+_0x2e6c9c,_0x34f5ce=Math['random']();if(_0x34f5ce<0.6)return _0x54008c(0x1cc)+_0xbd8fb+_0x54008c(0x20a);else return _0x34f5ce<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0xbd8fb+_0x54008c(0x20a):_0x54008c(0x1cc)+_0xbd8fb+_0x54008c(0x208)+_0xbd8fb;}else{if(_0x14fb75<0.9){const _0x1d06f3=0x7f+Math[_0x54008c(0x214)](Math[_0x54008c(0x248)]()*0x5),_0x5c9d6e=Math[_0x54008c(0x248)]();return _0x5c9d6e<0.65?_0x54008c(0x1e4)+_0x1d06f3+_0x54008c(0x1e7)+_0x1d06f3+'.0':_0x54008c(0x1e2)+_0x1d06f3+_0x54008c(0x1e7)+_0x1d06f3+'.0';}else{const _0x180824={'18.0':'15_0','17.5':'14_5','17.4.1':'14_4_1','16.6':_0x54008c(0x233)},_0x3d5dc2=Object[_0x54008c(0x254)](_0x180824),_0x15b534=_0x3d5dc2[Math[_0x54008c(0x214)](Math[_0x54008c(0x248)]()*_0x3d5dc2[_0x54008c(0x277)])],_0x14a57a=_0x180824[_0x15b534];return _0x54008c(0x1fd)+_0x14a57a[_0x54008c(0x1f4)](/\./g,'_')+_0x54008c(0x1f6)+_0x15b534+'\x20Safari/605.1.15';}}},_0x5393d3=_0x195c73(),_0x23e884=unsafeWindow['fetch'];unsafeWindow[_0xbc1743(0x1e9)]=function(_0xb66628,_0x3f15b2){const _0x558c6c=_0xbc1743;let _0x55554e={..._0x3f15b2};try{if(new URL(_0xb66628,window[_0x558c6c(0x1e8)][_0x558c6c(0x1c3)])[_0x558c6c(0x20f)][_0x558c6c(0x217)](_0x558c6c(0x25a))){const _0x3c5999=new Headers(_0x55554e['headers']);_0x3c5999[_0x558c6c(0x24b)](_0x558c6c(0x249),_0x5393d3),_0x55554e[_0x558c6c(0x1f9)]=_0x3c5999;}}catch(_0x1505be){console['warn'](_0x558c6c(0x1ff),_0xb66628,_0x1505be);}return _0x23e884[_0x558c6c(0x21d)](this,_0xb66628,_0x55554e);};const _0x29b908=unsafeWindow[_0xbc1743(0x25e)][_0xbc1743(0x22d)][_0xbc1743(0x21e)],_0x301b25=unsafeWindow[_0xbc1743(0x25e)][_0xbc1743(0x22d)]['send'];unsafeWindow[_0xbc1743(0x25e)][_0xbc1743(0x22d)]['open']=function(_0x525dd9,_0x195094,..._0x486724){const _0x5b470c=_0xbc1743;return this[_0x5b470c(0x20d)]=_0x195094,_0x29b908[_0x5b470c(0x21b)](this,[_0x525dd9,_0x195094,..._0x486724]);},unsafeWindow[_0xbc1743(0x25e)]['prototype'][_0xbc1743(0x1c6)]=function(..._0x52b2b2){const _0x1b5299=_0xbc1743;try{this[_0x1b5299(0x20d)]&&new URL(this[_0x1b5299(0x20d)],window['location'][_0x1b5299(0x1c3)])['hostname'][_0x1b5299(0x217)](_0x1b5299(0x25a))&&this[_0x1b5299(0x1dc)](_0x1b5299(0x249),_0x5393d3);}catch(_0x4a12af){console[_0x1b5299(0x1ee)]('[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:',this[_0x1b5299(0x20d)],_0x4a12af);}return _0x301b25[_0x1b5299(0x21b)](this,_0x52b2b2);};}function _0x2dda21(){const _0x5cfdfb=_0x104d74;if(document['getElementById'](_0x5cfdfb(0x1c8)))return;const _0x2fd256=document['createElement'](_0x5cfdfb(0x274));_0x2fd256['id']='tm-mgmt-panel',_0x2fd256[_0x5cfdfb(0x260)]=_0x5cfdfb(0x1e5),document[_0x5cfdfb(0x1e1)][_0x5cfdfb(0x24a)](_0x2fd256),GM_addStyle(_0x5cfdfb(0x1f0)),document[_0x5cfdfb(0x1de)]('tm-mgmt-clear-storage')['addEventListener'](_0x5cfdfb(0x27e),async()=>{const _0x318005=_0x5cfdfb;await GM_setValue(_0x320f9f[_0x318005(0x27d)],null),await GM_setValue(_0x320f9f[_0x318005(0x1f3)],null),alert(_0x318005(0x24c)),location[_0x318005(0x236)]();});}function _0x57d1ed(_0x52c8d4,_0x5b19ae){const _0x30d136=_0x104d74,_0x363086={'状态':'tm-mgmt-status','下一账户':_0x30d136(0x213),'接力链接':_0x30d136(0x23e)}[_0x52c8d4];if(_0x363086){const _0x5d2b59=document[_0x30d136(0x1de)](_0x363086);if(_0x5d2b59)_0x5d2b59[_0x30d136(0x269)]=_0x5b19ae;}}async function _0x54dd4b(){const _0x341f0d=_0x104d74;_0x57d1ed('状态',_0x341f0d(0x1ed));let _0x5431f3=null;const _0x4219b7=document[_0x341f0d(0x272)](_0x341f0d(0x1fc));for(const _0x52303c of _0x4219b7){const _0xc41a70=Array['from'](_0x52303c[_0x341f0d(0x1d3)])['some'](_0x4978dd=>_0x4978dd[_0x341f0d(0x27c)]===Node[_0x341f0d(0x259)]&&_0x4978dd[_0x341f0d(0x269)][_0x341f0d(0x1d1)]()===_0x341f0d(0x20b));if(_0xc41a70&&_0x52303c[_0x341f0d(0x1db)]!==null){_0x5431f3=_0x52303c;break;}}if(!_0x5431f3){_0x57d1ed('状态',_0x341f0d(0x1d7));return;}_0x57d1ed('状态',_0x341f0d(0x20c));const _0x35df05=Object['keys'](_0x5431f3)[_0x341f0d(0x1e6)](_0x329b7c=>_0x329b7c[_0x341f0d(0x210)](_0x341f0d(0x1f8)));if(_0x35df05){const _0x2b1184=_0x5431f3[_0x35df05];if(_0x2b1184&&typeof _0x2b1184[_0x341f0d(0x1c4)]==='function')_0x2b1184[_0x341f0d(0x1c4)]();else{_0x57d1ed('状态',_0x341f0d(0x220));return;}}else{_0x57d1ed('状态',_0x341f0d(0x230));return;}const _0x4cd177=await _0x5e390c(_0x341f0d(0x202));if(!_0x4cd177){_0x57d1ed('状态','错误:\x20未找到引荐链接');const _0xfc48cb=await _0x5e390c('section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]',0x3e8);if(_0xfc48cb)_0xfc48cb[_0x341f0d(0x27e)]();return;}const _0xe8e298=_0x4cd177['textContent']['trim']();if(_0xe8e298&&_0xe8e298[_0x341f0d(0x278)](_0x341f0d(0x23c))){await GM_setValue(_0x320f9f[_0x341f0d(0x1f3)],_0xe8e298);const _0x3beb04=_0xe8e298['match'](/referralCode=([^&]+)/);_0x3beb04&&_0x3beb04[0x1]&&_0x57d1ed('接力链接',_0x3beb04[0x1][_0x341f0d(0x22b)](0x0,0x7)),_0x57d1ed('状态',_0x341f0d(0x21a));}const _0x26089f=await _0x5e390c(_0x341f0d(0x1ea));if(_0x26089f)_0x26089f[_0x341f0d(0x27e)]();}async function _0x5ed578(_0x10e49f){const _0x9c4996=_0x104d74,_0x54ba31=(_0x10e49f[_0x9c4996(0x200)]('alt')||'')[_0x9c4996(0x1d1)]();if(!_0x54ba31||document[_0x9c4996(0x1e1)][_0x9c4996(0x26e)][_0x9c4996(0x252)])return;document[_0x9c4996(0x1e1)][_0x9c4996(0x26e)][_0x9c4996(0x252)]='true',_0x57d1ed('状态',_0x9c4996(0x26a)+_0x54ba31),_0x57d1ed(_0x9c4996(0x1d2),'N/A'),await _0x20a549(0x5dc),await _0x54dd4b();const {base:_0x1f5246,num:_0xd13e73}=_0x559ae9(_0x54ba31),_0x19c69c=''+_0x1f5246+(_0xd13e73+0x1);await GM_setValue(_0x320f9f['LAST_ACCOUNT'],_0x19c69c),_0x57d1ed(_0x9c4996(0x222),_0x19c69c),_0x57d1ed('状态','已登录:\x20'+_0x54ba31+_0x9c4996(0x237)),await _0x20a549(0xfa),document['body']['addEventListener'](_0x9c4996(0x27e),_0x373e7f=>{const _0x43da67=_0x9c4996,_0x291431=_0x373e7f[_0x43da67(0x232)][_0x43da67(0x264)](_0x43da67(0x1cd));_0x291431&&(_0x373e7f[_0x43da67(0x1cb)](),_0x373e7f[_0x43da67(0x22f)](),window[_0x43da67(0x1e8)][_0x43da67(0x236)]());},{'capture':!![]});}async function _0x3c57f4(){const _0xd3393d=_0x104d74;_0x57d1ed('状态',_0xd3393d(0x25d));const _0x3ff3bf=_0x3c9f23(_0xd3393d(0x1d8),'Design\x20Now');if(!_0x3ff3bf){_0x57d1ed('状态',_0xd3393d(0x225));return;}_0x57d1ed('状态',_0xd3393d(0x27a));const _0x184421=Object[_0xd3393d(0x254)](_0x3ff3bf)[_0xd3393d(0x1e6)](_0x49c980=>_0x49c980[_0xd3393d(0x210)](_0xd3393d(0x1f8)));if(_0x184421){const _0xcd48b5=_0x3ff3bf[_0x184421];_0xcd48b5&&typeof _0xcd48b5['onClick']===_0xd3393d(0x1df)?_0xcd48b5['onClick']():_0x57d1ed('状态','错误:\x20DesignNow无点击函数');}else _0x57d1ed('状态',_0xd3393d(0x1ca)),_0x3ff3bf[_0xd3393d(0x27e)]();}function _0x523c8b(){let _0x3406d7=null;setInterval(()=>{const _0x19d712=_0x2625,_0x2a62f3=document[_0x19d712(0x25b)]('header\x20img[alt][class*=\x22rounded-full\x22]')||document[_0x19d712(0x25b)]('div.bottom-left-user-position\x20img[alt]');if(_0x2a62f3){const _0x530d5d=(_0x2a62f3[_0x19d712(0x200)](_0x19d712(0x256))||'')[_0x19d712(0x1d0)]()[_0x19d712(0x1d1)]();if(!_0xd55998[_0x19d712(0x278)](_0x530d5d)){_0x3406d7!=='loggedIn'&&(_0x3406d7=_0x19d712(0x26b),_0x5ed578(_0x2a62f3));return;}}if(_0x3c9f23(_0x19d712(0x1d9),'Check\x20your\x20email\x20to\x20continue')){_0x3406d7!==_0x19d712(0x203)&&(_0x3406d7='checkEmail',_0x57d1ed('状态','等待服务器获取登录链接...'));return;}if(document[_0x19d712(0x25b)](_0x19d712(0x1ce))){_0x3406d7!==_0x19d712(0x21f)&&(_0x3406d7=_0x19d712(0x21f),_0x474736());return;}const _0x5ecca7=_0x3c9f23(_0x19d712(0x1c5),_0x19d712(0x1fe));if(_0x5ecca7){_0x3406d7!==_0x19d712(0x1c9)&&(_0x3406d7=_0x19d712(0x1c9),_0x3c57f4());return;}_0x3406d7=null;},0x2ee);}function _0x559ae9(_0xaa493b){const _0x43d274=_0x104d74,_0x622d34=_0xaa493b[_0x43d274(0x263)](/^(.*?)(\d*)$/);if(!_0x622d34)return{'base':_0xaa493b,'num':0x0};const _0x43a29f=_0x622d34[0x1],_0xcd0b2f=_0x622d34[0x2]?parseInt(_0x622d34[0x2],0xa):0x0;return{'base':_0x43a29f,'num':_0xcd0b2f};}async function _0x474736(){const _0x11601a=_0x104d74,_0x4f7e37=await _0x5e390c(_0x11601a(0x255));if(!_0x4f7e37||_0x4f7e37[_0x11601a(0x26e)][_0x11601a(0x247)])return;_0x4f7e37[_0x11601a(0x26e)][_0x11601a(0x247)]=_0x11601a(0x1f2),_0x57d1ed('状态',_0x11601a(0x262));const _0x274317=await GM_getValue(_0x320f9f['LAST_ACCOUNT']);_0x57d1ed(_0x11601a(0x222),_0x274317||_0x11601a(0x265)),_0x274317?await _0x5da8dc(_0x274317,_0x4f7e37):(_0x57d1ed('状态',_0x11601a(0x22c)),_0x4f7e37[_0x11601a(0x245)](_0x11601a(0x227),async()=>{const _0x477316=_0x11601a,_0x5e24c1=_0x4f7e37[_0x477316(0x1d4)][_0x477316(0x1d1)](),_0x3839e6=_0x5e24c1[_0x477316(0x22a)]('@')[0x0];if(_0x3839e6)await _0x5da8dc(_0x3839e6,_0x4f7e37);},{'once':!0x0}));}async function _0x5da8dc(_0x59acb0,_0x418e9b){const _0x452ffc=_0x104d74;_0x57d1ed('状态',_0x452ffc(0x25c)+_0x59acb0);if(!await _0x58249b(_0x59acb0)){_0x57d1ed('状态',_0x452ffc(0x257)+_0x59acb0);return;}const _0x414326=await _0x2e8e8c(_0x59acb0);if(!_0x414326){_0x57d1ed('状态',_0x452ffc(0x234)+_0x59acb0);return;}const _0x2d9f6c=_0x59acb0+_0x452ffc(0x261);if(_0x418e9b[_0x452ffc(0x1d4)]!==_0x2d9f6c)_0x3ba0d8(_0x418e9b,_0x2d9f6c);_0x57d1ed('状态',_0x452ffc(0x223)+_0x2d9f6c),_0x57d1ed('状态','等待CF验证...');const _0x4b8838=await _0x5e390c(_0x452ffc(0x24d));if(!_0x4b8838){_0x57d1ed('状态',_0x452ffc(0x22e));return;}const _0x38f672=new MutationObserver(async _0x99aada=>{const _0x24dbcb=_0x452ffc;!_0x4b8838[_0x24dbcb(0x224)]&&(_0x38f672['disconnect'](),_0x57d1ed('状态',_0x24dbcb(0x228)),await _0x20a549(0xfa),_0x4b8838[_0x24dbcb(0x27e)](),_0x2e37ef(_0x59acb0,_0x24dbcb(0x1f5)));});!_0x4b8838[_0x452ffc(0x224)]?(_0x57d1ed('状态',_0x452ffc(0x228)),await _0x20a549(0xfa),_0x4b8838['click'](),_0x2e37ef(_0x59acb0,'Lovart')):_0x38f672[_0x452ffc(0x26d)](_0x4b8838,{'attributes':!0x0,'attributeFilter':['disabled']});}async function _0x58249b(_0x49f2b2){const _0x3f6596=_0x104d74;console[_0x3f6596(0x211)](_0x3f6596(0x229)+_0x49f2b2+'\x22');try{const _0x11ca31=await new Promise((_0x2443c8,_0x87de06)=>{const _0x238867=_0x3f6596;GM_xmlhttpRequest({'method':_0x238867(0x239),'url':_0x5a3963[_0x238867(0x246)]+_0x238867(0x275)+Date[_0x238867(0x20e)](),'onload':_0x2443c8,'onerror':_0x87de06});});if(_0x11ca31[_0x3f6596(0x235)]===0xc8){const _0x46b37b=_0x11ca31['responseText'][_0x3f6596(0x22a)]('\x0a')[_0x3f6596(0x207)](_0x222884=>_0x222884[_0x3f6596(0x1d1)]())[_0x3f6596(0x1ec)](_0x58f902=>_0x58f902&&_0x58f902['length']>0x0);console[_0x3f6596(0x211)]('[验证]\x20从服务器加载并过滤后的规则列表:',_0x46b37b);_0x46b37b[_0x3f6596(0x277)]===0x0&&console[_0x3f6596(0x26c)]('[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。');const _0x3607a1=_0x46b37b['some'](_0x29d8bc=>{const _0x2f0113=_0x3f6596;if(_0x29d8bc[_0x2f0113(0x210)](_0x2f0113(0x27b))||_0x29d8bc[_0x2f0113(0x210)](_0x2f0113(0x251)))return _0x49f2b2===_0x29d8bc;return _0x49f2b2[_0x2f0113(0x210)](_0x29d8bc);});return console[_0x3f6596(0x211)](_0x3f6596(0x240)+_0x49f2b2+'\x22\x20的验证结果为:\x20'+_0x3607a1),_0x3607a1;}else console[_0x3f6596(0x26c)](_0x3f6596(0x1d5)+_0x11ca31[_0x3f6596(0x235)]);}catch(_0x1dcecc){console['error'](_0x3f6596(0x206),_0x1dcecc);}return console[_0x3f6596(0x211)](_0x3f6596(0x250)),![];}function _0x2e8e8c(_0x5a48b8){return new Promise(_0xfb5c57=>{const _0x20bf0d=_0x2625;GM_xmlhttpRequest({'method':_0x20bf0d(0x1da),'url':_0x5a3963[_0x20bf0d(0x23a)],'headers':{'Content-Type':_0x20bf0d(0x280)},'data':JSON[_0x20bf0d(0x244)]({'mode':'activate','emailPrefix':_0x5a48b8}),'timeout':0x4e20,'onload':function(_0x3ace5a){const _0x174f35=_0x20bf0d;try{_0xfb5c57(!0x0===JSON[_0x174f35(0x209)](_0x3ace5a['responseText'])['success']);}catch(_0x38eea3){_0xfb5c57(!0x1);}},'onerror':function(_0x5098e9){_0xfb5c57(!0x1);},'ontimeout':function(){_0xfb5c57(!0x1);}});});}function _0x2e37ef(_0x94159a,_0x22ddff){const _0x13a2a3=_0x104d74;_0x57d1ed('状态',_0x13a2a3(0x1e3)),GM_xmlhttpRequest({'method':_0x13a2a3(0x1da),'url':_0x5a3963['backendApiUrl'],'headers':{'Content-Type':_0x13a2a3(0x280)},'data':JSON[_0x13a2a3(0x244)]({'mode':_0x13a2a3(0x24e),'emailPrefix':_0x94159a,'source':_0x22ddff}),'timeout':0xafc8,'onload':function(_0x3c897b){const _0x57fef6=_0x13a2a3;try{const _0x1a8e98=JSON[_0x57fef6(0x209)](_0x3c897b[_0x57fef6(0x23d)]);_0x1a8e98[_0x57fef6(0x1ef)]&&_0x1a8e98['link']?window['location'][_0x57fef6(0x1c3)]=_0x1a8e98[_0x57fef6(0x1eb)]:_0x57d1ed('状态',_0x57fef6(0x226)+_0x1a8e98['error']);}catch(_0x3eb2d7){_0x57d1ed('状态',_0x57fef6(0x1f1));}},'onerror':_0x13b160=>{_0x57d1ed('状态','Worker网络错误');},'ontimeout':()=>{_0x57d1ed('状态','Worker请求超时');}});}function _0x3ba0d8(_0x590be1,_0x3269a7){const _0x10ee16=_0x104d74;try{return Object['getOwnPropertyDescriptor'](HTMLInputElement[_0x10ee16(0x22d)],_0x10ee16(0x1d4))[_0x10ee16(0x24b)]['call'](_0x590be1,_0x3269a7),[_0x10ee16(0x268),_0x10ee16(0x216),'blur'][_0x10ee16(0x238)](_0x1c6582=>_0x590be1[_0x10ee16(0x1fa)](new Event(_0x1c6582,{'bubbles':!0x0}))),!0x0;}catch(_0x123fc1){return!0x1;}}function _0x38005c(){const _0x44a009=_0x104d74,_0x1f41fb=new URL(window[_0x44a009(0x1e8)]['href']),_0x2a2dcc=_0x1f41fb[_0x44a009(0x212)]['get'](_0x44a009(0x1c7));_0x2a2dcc&&GM_setValue(_0x320f9f[_0x44a009(0x27d)],_0x2a2dcc)[_0x44a009(0x219)](()=>{const _0x58bab8=_0x44a009;_0x1f41fb['searchParams'][_0x58bab8(0x267)](_0x58bab8(0x1c7)),history[_0x58bab8(0x1e0)](null,'',_0x1f41fb[_0x58bab8(0x23f)]());});}}()));function _0x2625(_0x15afb8,_0x115797){const _0x1fb4bd=_0x1fb4();return _0x2625=function(_0x262543,_0x277f9f){_0x262543=_0x262543-0x1c3;let _0x292442=_0x1fb4bd[_0x262543];return _0x292442;},_0x2625(_0x15afb8,_0x115797);}function _0x1fb4(){const _0x23e29e=['错误:\x20按钮无点击函数','126gpdVMR','下一账户','已填充:\x20','disabled','错误:\x20未找到DesignNow按钮','获取链接失败:\x20','blur','验证通过,\x20点击继续...','[验证]\x20开始验证前缀:\x20\x22','split','substring','等待手动输入...','prototype','错误:\x20未找到继续按钮','stopPropagation','错误:\x20非React按钮','30WbIuRd','target','13_5','激活失败/超时:\x20','status','reload',',\x20等待手动登出...','forEach','GET','backendApiUrl','LOCAL_BACKUP_LIST','referralCode=','responseText','tm-mgmt-next-link','toString','[验证]\x20前缀\x20\x22','.0.','5355621AtizmT','5838646kUIIkn','stringify','addEventListener','remoteRulesUrl','automationAttached','random','User-Agent','appendChild','set','所有存储的账户和链接信息已清除，页面将刷新。','#emailLogin','getLink','检测到接力链接...','[验证]\x20因发生错误或验证失败，最终返回:\x20false','cxianyu','logicExecuted','REMOTE_URL','keys','input[placeholder=\x22Email\x22]','alt','前缀无效:\x20','top','TEXT_NODE','lovart.ai','querySelector','验证前缀:\x20','主页,\x20寻找\x20Design\x20Now','XMLHttpRequest','https://www.lovart.ai','innerHTML','@mdzz.uk','已进入登录/注册弹窗','match','closest','无(等待手动输入)','3057456GSAdIo','delete','input','textContent','已登录:\x20','loggedIn','error','observe','dataset','/canvas','885702afuNFT','ENABLED','querySelectorAll','guest','div','?t=','https://lhou.taotile.ltd/','length','includes','pathname','主页,\x20尝试调用函数...','chh','nodeType','LAST_ACCOUNT','click','https://co.taotile.ltd/akl.txt','application/json','href','onClick','button,\x20a,\x20div','send','next_account','tm-mgmt-panel','homepage','主页,\x20尝试常规点击...','preventDefault','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','[data-testid=\x22user-profile-logout\x22]','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','20qjepCW','toLowerCase','trim','接力链接','childNodes','value','[验证]\x20获取规则文件失败，服务器状态码:\x20','self','错误:\x20未找到引荐按钮','button','div,\x20p,\x20h1,\x20h2','POST','offsetParent','setRequestHeader','9HEbFhv','getElementById','function','replaceState','body','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','等待服务器获取登录链接...','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','find','.0)\x20Gecko/20100101\x20Firefox/','location','fetch','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','link','filter','精确定位引荐按钮...','warn','success','\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20}\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x20','链接响应解析失败','true','NEXT_REFERRAL_LINK','replace','Lovart',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','https://co.taotile.ltd/dizhi.txt','__reactProps$','headers','dispatchEvent','547087hIntCo','header\x20div,\x20header\x20button','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','Design\x20Now','[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:','getAttribute','avatar','section[role=\x22dialog\x22]\x20span.truncate','checkEmail','DOMContentLoaded','456594eUxWNa','[验证]\x20验证前缀时发生网络或未知错误:','map','\x20Safari/537.36\x20Edg/','parse','\x20Safari/537.36','Referral\x20Link','按钮已定位,\x20直接调用函数...','_tampermonkeyUrl','now','hostname','startsWith','log','searchParams','tm-mgmt-next-user','floor','next_referral_link_lovart','change','endsWith','已在目标页面','then','已保存接力链接!','apply','273768mKUUOF','call','open','loginModal'];_0x1fb4=function(){return _0x23e29e;};return _0x1fb4();}

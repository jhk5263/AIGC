// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.26
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x4b83(_0x5c9e24,_0x2942cc){const _0x277c29=_0x277c();return _0x4b83=function(_0x4b8301,_0x3da71c){_0x4b8301=_0x4b8301-0x6a;let _0x292ccd=_0x277c29[_0x4b8301];return _0x292ccd;},_0x4b83(_0x5c9e24,_0x2942cc);}(function(_0x2c483a,_0x18ada3){const _0x5a5d99=_0x4b83,_0x333b94=_0x2c483a();while(!![]){try{const _0x5e2da3=-parseInt(_0x5a5d99(0x110))/0x1*(parseInt(_0x5a5d99(0xae))/0x2)+-parseInt(_0x5a5d99(0x11c))/0x3+parseInt(_0x5a5d99(0x7f))/0x4*(parseInt(_0x5a5d99(0x8e))/0x5)+parseInt(_0x5a5d99(0xba))/0x6*(-parseInt(_0x5a5d99(0xb0))/0x7)+-parseInt(_0x5a5d99(0xb4))/0x8*(parseInt(_0x5a5d99(0x8a))/0x9)+-parseInt(_0x5a5d99(0xab))/0xa+-parseInt(_0x5a5d99(0x82))/0xb*(-parseInt(_0x5a5d99(0x6e))/0xc);if(_0x5e2da3===_0x18ada3)break;else _0x333b94['push'](_0x333b94['shift']());}catch(_0x2efd36){_0x333b94['push'](_0x333b94['shift']());}}}(_0x277c,0x27e59),(function(){'use strict';const _0x58ebcb=_0x4b83;if(window[_0x58ebcb(0x85)]!==window['self'])return;const _0x5e2c4f={'ENABLED':!0x0,'REMOTE_URL':_0x58ebcb(0x7b),'LOCAL_BACKUP_LIST':[]},_0xc6331f={'NEXT_REFERRAL_LINK':_0x58ebcb(0x6f),'LAST_ACCOUNT':'last_used_account_lovart'},_0x1d15ad={'emailSuffix':_0x58ebcb(0x9c),'remoteRulesUrl':'https://co.taotile.ltd/akl.txt','backendApiUrl':_0x58ebcb(0xda)},_0xb01bf0=[_0x58ebcb(0xd5),_0x58ebcb(0x6b),_0x58ebcb(0xb6),''];_0x1423a5(),document[_0x58ebcb(0x102)](_0x58ebcb(0xcb),_0x3bc6ba);async function _0x3bc6ba(){const _0xf8549c=_0x58ebcb;_0x7dbc40(),await _0x3d59ff(0x32);const _0x5922f8=window[_0xf8549c(0x7c)]['pathname'],_0x3554bf=window[_0xf8549c(0x7c)][_0xf8549c(0x98)];if(_0x5922f8[_0xf8549c(0x93)](_0xf8549c(0x11e))||_0x5922f8['startsWith'](_0xf8549c(0xe4))||_0x3554bf[_0xf8549c(0xc1)](_0xf8549c(0xad)))_0x2bd889('状态','已在目标页面');else{const _0x1d478e=await GM_getValue(_0xc6331f['NEXT_REFERRAL_LINK'],null);if(_0x1d478e){await GM_setValue(_0xc6331f['NEXT_REFERRAL_LINK'],null),_0x2bd889('状态',_0xf8549c(0xeb)),window[_0xf8549c(0x7c)][_0xf8549c(0xf6)]=_0x1d478e;return;}const _0x963b80=_0x5922f8==='/'&&!_0x3554bf;if(_0x963b80&&_0x5e2c4f[_0xf8549c(0xdf)]){_0x2bd889('状态',_0xf8549c(0xf5));const _0x115a7e=await _0x4da9c4()||_0x5e2c4f[_0xf8549c(0xa3)];if(_0x115a7e&&_0x115a7e[_0xf8549c(0x10d)]>0x0){const _0x503615=_0x115a7e[Math[_0xf8549c(0xc0)](Math[_0xf8549c(0x88)]()*_0x115a7e[_0xf8549c(0x10d)])];window[_0xf8549c(0x7c)][_0xf8549c(0xf6)]=_0x503615;return;}}}_0x4f9684(),_0x5332e7();}const _0x412320=(_0x4a8f38,_0x218e1d=0x1388)=>new Promise(_0x174b9e=>{const _0x4585cd=setInterval(()=>{const _0x39f14e=_0x4b83,_0x4d1ea8=document[_0x39f14e(0x117)](_0x4a8f38);_0x4d1ea8&&(clearInterval(_0x4585cd),_0x174b9e(_0x4d1ea8));},0x64);setTimeout(()=>{clearInterval(_0x4585cd),_0x174b9e(null);},_0x218e1d);}),_0x3d59ff=_0x336ab8=>new Promise(_0xb393bf=>setTimeout(_0xb393bf,_0x336ab8));function _0x3e612e(_0x5d97b8,_0x5bb85e,_0x7ecca3=![]){const _0x5637ea=_0x58ebcb,_0x5e1fa0=document[_0x5637ea(0xbb)](_0x5d97b8);for(const _0x5762d0 of _0x5e1fa0){const _0x294d45=_0x5762d0['textContent']['trim']()[_0x5637ea(0x105)]();if(_0x5762d0[_0x5637ea(0x76)]!==null&&(_0x7ecca3?_0x294d45===_0x5bb85e[_0x5637ea(0x105)]():_0x294d45[_0x5637ea(0xc1)](_0x5bb85e['toLowerCase']())))return _0x5762d0;}return null;}async function _0x4da9c4(){const _0x49a38c=_0x58ebcb;if(!_0x5e2c4f[_0x49a38c(0x119)])return null;const _0xa8f0ce=_0x5e2c4f['REMOTE_URL']+_0x49a38c(0xc3)+Date[_0x49a38c(0x12b)]();return new Promise(_0x219687=>{const _0x2144f4=_0x49a38c;GM_xmlhttpRequest({'method':_0x2144f4(0xde),'url':_0xa8f0ce,'onload':function(_0x4ff375){const _0x281a81=_0x2144f4;0xc8===_0x4ff375[_0x281a81(0xce)]?_0x219687(_0x4ff375['responseText'][_0x281a81(0x87)](/^(https?:\/\/\S+)/gm)||[]):_0x219687(null);},'onerror':function(){_0x219687(null);}});});}function _0x1423a5(){const _0x2388cb=_0x58ebcb,_0x3ab55f=()=>{const _0x4d31a2=_0x4b83,_0x4ce838=Math['random']();if(_0x4ce838<0.6){const _0x5ed0f2=0x7e+Math[_0x4d31a2(0xc0)](0x5*Math[_0x4d31a2(0x88)]()),_0x4ce61a=0x1388+Math['floor'](0xbb8*Math[_0x4d31a2(0x88)]()),_0x31a73c=Math['floor'](0x96*Math[_0x4d31a2(0x88)]()),_0x5d0b95=_0x5ed0f2+_0x4d31a2(0xfc)+_0x4ce61a+'.'+_0x31a73c,_0x392391=Math[_0x4d31a2(0x88)]();return _0x392391<0.6?_0x4d31a2(0xb9)+_0x5d0b95+_0x4d31a2(0x86):_0x392391<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x5d0b95+_0x4d31a2(0x86):_0x4d31a2(0xb9)+_0x5d0b95+_0x4d31a2(0x125)+_0x5d0b95;}if(_0x4ce838<0.9){const _0x11e23b=0x7f+Math[_0x4d31a2(0xc0)](0x5*Math[_0x4d31a2(0x88)]());return Math[_0x4d31a2(0x88)]()<0.65?'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:'+_0x11e23b+_0x4d31a2(0xe0)+_0x11e23b+'.0':_0x4d31a2(0xa7)+_0x11e23b+_0x4d31a2(0xe0)+_0x11e23b+'.0';}{const _0xb174af={'18.0':_0x4d31a2(0xfb),'17.5':_0x4d31a2(0xa9),'17.4.1':'14_4_1','16.6':_0x4d31a2(0x115)},_0x51d043=Object[_0x4d31a2(0xf7)](_0xb174af),_0x6a8763=_0x51d043[Math[_0x4d31a2(0xc0)](Math[_0x4d31a2(0x88)]()*_0x51d043[_0x4d31a2(0x10d)])],_0x59cc5e=_0xb174af[_0x6a8763];return _0x4d31a2(0x75)+_0x59cc5e[_0x4d31a2(0x120)](/\./g,'_')+')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/'+_0x6a8763+'\x20Safari/605.1.15';}},_0x446c51=_0x3ab55f(),_0x4c22c9=unsafeWindow[_0x2388cb(0x10b)];unsafeWindow[_0x2388cb(0x10b)]=function(_0x12fd66,_0x405246){const _0x49f763=_0x2388cb;let _0x35a01a={..._0x405246};try{if(new URL(_0x12fd66,window['location'][_0x49f763(0xf6)])['hostname']['endsWith'](_0x49f763(0xa4))){const _0x31d9b6=new Headers(_0x35a01a['headers']);_0x31d9b6[_0x49f763(0x10f)](_0x49f763(0xe6),_0x446c51),_0x35a01a[_0x49f763(0xdb)]=_0x31d9b6;}}catch(_0x403426){console[_0x49f763(0x7d)](_0x49f763(0xe1),_0x403426,_0x405246);}return _0x4c22c9['call'](this,_0x12fd66,_0x35a01a);};const _0x5d55d8=unsafeWindow[_0x2388cb(0xdd)][_0x2388cb(0x74)][_0x2388cb(0xf4)],_0x3b7ae5=unsafeWindow['XMLHttpRequest'][_0x2388cb(0x74)][_0x2388cb(0x111)];unsafeWindow[_0x2388cb(0xdd)]['prototype'][_0x2388cb(0xf4)]=function(_0x55800c,_0xb53f17,..._0x5cc9f5){const _0x33d044=_0x2388cb;return this['_tampermonkeyUrl']=_0xb53f17,_0x5d55d8[_0x33d044(0x6a)](this,[_0x55800c,_0xb53f17,..._0x5cc9f5]);},unsafeWindow[_0x2388cb(0xdd)]['prototype']['send']=function(..._0x259437){const _0x3a7028=_0x2388cb;try{this[_0x3a7028(0x89)]&&new URL(this[_0x3a7028(0x89)],window['location'][_0x3a7028(0xf6)])['hostname'][_0x3a7028(0xe5)](_0x3a7028(0xa4))&&this[_0x3a7028(0xf8)]('User-Agent',_0x446c51);}catch(_0x394a78){console[_0x3a7028(0x7d)]('[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:',this[_0x3a7028(0x89)],_0x394a78);}return _0x3b7ae5[_0x3a7028(0x6a)](this,_0x259437);};}function _0x337150(_0x5e2d81,_0x45bb3c){const _0x12f430=_0x58ebcb;let _0x5ef38c,_0xd66e01,_0x2aab0c=![];_0x45bb3c[_0x12f430(0x102)]('mousedown',_0x4036a1=>{const _0x2ce588=_0x12f430;if(_0x4036a1['target'][_0x2ce588(0x124)]===_0x2ce588(0x77))return;_0x2aab0c=!![],_0x4036a1[_0x2ce588(0xb3)]();const _0x4a00c9=_0x5e2d81['getBoundingClientRect']();_0x5ef38c=_0x4036a1[_0x2ce588(0x121)]-_0x4a00c9[_0x2ce588(0x116)],_0xd66e01=_0x4036a1[_0x2ce588(0xd1)]-_0x4a00c9[_0x2ce588(0x85)],_0x45bb3c[_0x2ce588(0xcc)][_0x2ce588(0x127)]=_0x2ce588(0xb7),document[_0x2ce588(0xd6)][_0x2ce588(0xcc)][_0x2ce588(0xc6)]=_0x2ce588(0xac),_0x5e2d81[_0x2ce588(0xcc)][_0x2ce588(0x6c)]=_0x2ce588(0x11b),_0x5e2d81[_0x2ce588(0xcc)][_0x2ce588(0x130)]=_0x2ce588(0x11b),document[_0x2ce588(0x102)](_0x2ce588(0xff),_0x5a733a),document[_0x2ce588(0x102)](_0x2ce588(0x7e),_0x515d23,{'once':!![]});});function _0x5a733a(_0x13e4db){const _0x37490f=_0x12f430;if(!_0x2aab0c)return;_0x5e2d81[_0x37490f(0xcc)][_0x37490f(0x116)]=_0x13e4db['clientX']-_0x5ef38c+'px',_0x5e2d81[_0x37490f(0xcc)][_0x37490f(0x85)]=_0x13e4db[_0x37490f(0xd1)]-_0xd66e01+'px';}function _0x515d23(){const _0x11bd08=_0x12f430;_0x2aab0c=![],_0x45bb3c[_0x11bd08(0xcc)][_0x11bd08(0x127)]='grab',document[_0x11bd08(0xd6)][_0x11bd08(0xcc)][_0x11bd08(0xc6)]=_0x11bd08(0x11b),document[_0x11bd08(0xa2)](_0x11bd08(0xff),_0x5a733a);}_0x45bb3c[_0x12f430(0xcc)]['cursor']=_0x12f430(0x72);}function _0x7dbc40(){const _0x120fc7=_0x58ebcb;if(document[_0x120fc7(0x71)](_0x120fc7(0xe3)))return;const _0x41fb6c=document[_0x120fc7(0x12c)]('div');_0x41fb6c['id']='tm-mgmt-panel',_0x41fb6c[_0x120fc7(0xc2)]=_0x120fc7(0x109);const _0x1715b5=_0x41fb6c[_0x120fc7(0x117)](_0x120fc7(0x11f));_0x337150(_0x41fb6c,_0x1715b5),document['body']['appendChild'](_0x41fb6c),GM_addStyle('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),document[_0x120fc7(0x71)]('tm-mgmt-clear-storage')[_0x120fc7(0x102)]('click',async()=>{const _0x1c9159=_0x120fc7;await GM_setValue(_0xc6331f[_0x1c9159(0x114)],null),await GM_setValue(_0xc6331f[_0x1c9159(0x108)],null),alert(_0x1c9159(0xfa)),location[_0x1c9159(0x99)]();});}function _0x2bd889(_0x1c7a6d,_0x1b62ad){const _0x319e48=_0x58ebcb,_0x552e70={'状态':_0x319e48(0xa5),'下一账户':_0x319e48(0xef),'接力链接':'tm-mgmt-next-link'}[_0x1c7a6d];if(_0x552e70){const _0x4c933e=document['getElementById'](_0x552e70);if(_0x4c933e)_0x4c933e[_0x319e48(0x81)]=_0x1b62ad;}}async function _0x4b1c80(){const _0x5e1572=_0x58ebcb;_0x2bd889('状态',_0x5e1572(0x95));let _0x17952f=null;const _0x8d1cd1=document[_0x5e1572(0xbb)]('header\x20div,\x20header\x20button');for(const _0x802e03 of _0x8d1cd1){const _0x394e45=Array[_0x5e1572(0xd7)](_0x802e03['childNodes'])[_0x5e1572(0xf3)](_0x47ff10=>0x3===_0x47ff10['nodeType']&&_0x5e1572(0x79)===_0x47ff10[_0x5e1572(0x81)][_0x5e1572(0xbd)]());if(_0x394e45&&null!==_0x802e03['offsetParent']){_0x17952f=_0x802e03;break;}}if(!_0x17952f)return void _0x2bd889('状态','错误:\x20未找到引荐按钮');_0x2bd889('状态',_0x5e1572(0xf2));const _0x55c1b1=Object[_0x5e1572(0xf7)](_0x17952f)['find'](_0x36255b=>_0x36255b['startsWith']('__reactProps$'));if(_0x55c1b1){const _0x2ad751=_0x17952f[_0x55c1b1];_0x2ad751&&_0x5e1572(0xd8)==typeof _0x2ad751[_0x5e1572(0x96)]?_0x2ad751[_0x5e1572(0x96)]():_0x2bd889('状态',_0x5e1572(0xc7));}else _0x2bd889('状态','错误:\x20非React按钮');const _0x4220f3=await _0x412320(_0x5e1572(0xb5));if(!_0x4220f3){_0x2bd889('状态',_0x5e1572(0x8c));const _0x32789e=await _0x412320(_0x5e1572(0x122),0x3e8);return void(_0x32789e&&_0x32789e[_0x5e1572(0xc5)]());}const _0xcd0a65=_0x4220f3['textContent']['trim']();if(_0xcd0a65&&_0xcd0a65[_0x5e1572(0xc1)](_0x5e1572(0xad))){await GM_setValue(_0xc6331f[_0x5e1572(0x108)],_0xcd0a65);const _0x179420=_0xcd0a65[_0x5e1572(0x87)](/referralCode=([^&]+)/);_0x179420&&_0x179420[0x1]&&_0x2bd889('接力链接',_0x179420[0x1][_0x5e1572(0xe9)](0x0,0x7)),_0x2bd889('状态',_0x5e1572(0x70));}const _0x182319=await _0x412320(_0x5e1572(0x122));_0x182319&&_0x182319[_0x5e1572(0xc5)]();}async function _0x36dc86(_0x436ed0){const _0x2201c7=_0x58ebcb,_0x51945c=(_0x436ed0[_0x2201c7(0xfe)](_0x2201c7(0x84))||'')[_0x2201c7(0xbd)]();if(!_0x51945c||document[_0x2201c7(0xd6)][_0x2201c7(0xfd)][_0x2201c7(0x12d)])return;document[_0x2201c7(0xd6)][_0x2201c7(0xfd)][_0x2201c7(0x12d)]=_0x2201c7(0xec),_0x2bd889('状态',_0x2201c7(0x10e)+_0x51945c),_0x2bd889(_0x2201c7(0xf1),_0x2201c7(0xd9)),await _0x3d59ff(0x5dc),await _0x4b1c80();const {base:_0x3fb0ae,num:_0x482f73}=_0x33d2bf(_0x51945c),_0x22c208=''+_0x3fb0ae+(_0x482f73+0x1);await GM_setValue(_0xc6331f[_0x2201c7(0x114)],_0x22c208),_0x2bd889(_0x2201c7(0x118),_0x22c208),_0x2bd889('状态','已登录:\x20'+_0x51945c+_0x2201c7(0xa1)),await _0x3d59ff(0xfa),document[_0x2201c7(0xd6)][_0x2201c7(0x102)](_0x2201c7(0xc5),_0x4ce3c8=>{const _0x3c33ee=_0x2201c7,_0x153079=_0x4ce3c8['target'][_0x3c33ee(0xd2)]('[data-testid=\x22user-profile-logout\x22]');_0x153079&&(_0x4ce3c8[_0x3c33ee(0xb3)](),_0x4ce3c8[_0x3c33ee(0x9b)](),window[_0x3c33ee(0x7c)][_0x3c33ee(0x99)]());},{'capture':!0x0});}async function _0x389817(){const _0x3ea9b1=_0x58ebcb;_0x2bd889('状态',_0x3ea9b1(0xf0));let _0x343b84=null;for(let _0xec9018=0x0;_0xec9018<0x14;_0xec9018++){if(_0x343b84=_0x3e612e(_0x3ea9b1(0xcf),_0x3ea9b1(0x107),!0x1))break;await _0x3d59ff(0x1f4);}if(!_0x343b84)return void _0x2bd889('状态','错误:\x2010秒内未找到DesignNow');_0x2bd889('状态',_0x3ea9b1(0x94));const _0x4076da=Object['keys'](_0x343b84)[_0x3ea9b1(0xa8)](_0x2f3013=>_0x2f3013[_0x3ea9b1(0x93)](_0x3ea9b1(0xc8)));if(_0x4076da){const _0x3b606b=_0x343b84[_0x4076da];_0x3b606b&&_0x3ea9b1(0xd8)==typeof _0x3b606b[_0x3ea9b1(0x96)]?_0x3b606b[_0x3ea9b1(0x96)]():_0x2bd889('状态',_0x3ea9b1(0xea));}else _0x2bd889('状态','主页,\x20尝试常规点击...'),_0x343b84[_0x3ea9b1(0xc5)]();}function _0x5332e7(){let _0x192c7c=null;setInterval(()=>{const _0x5b0d2c=_0x4b83,_0x56701d=document['querySelector'](_0x5b0d2c(0x100))||document[_0x5b0d2c(0x117)](_0x5b0d2c(0x10a));if(_0x56701d){const _0x2e9251=_0x56701d['getAttribute']('alt')||'';if(!_0xb01bf0[_0x5b0d2c(0xc1)](_0x2e9251[_0x5b0d2c(0x105)]()['trim']()))return void(_0x5b0d2c(0xbf)!==_0x192c7c&&(_0x192c7c=_0x5b0d2c(0xbf),_0x36dc86(_0x56701d)));}if(_0x3e612e(_0x5b0d2c(0x83),_0x5b0d2c(0x10c)))return void(_0x5b0d2c(0xe2)!==_0x192c7c&&(_0x192c7c=_0x5b0d2c(0xe2),_0x2bd889('状态',_0x5b0d2c(0xbe))));if(document[_0x5b0d2c(0x117)]('input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]'))return void(_0x5b0d2c(0x78)!==_0x192c7c&&(_0x192c7c=_0x5b0d2c(0x78),_0x1537c6()));const _0x4da887=_0x3e612e('button,\x20a,\x20div',_0x5b0d2c(0x107));if(_0x4da887)return void('homepage'!==_0x192c7c&&(_0x192c7c=_0x5b0d2c(0x8d),_0x389817()));_0x192c7c=null;},0x2ee);}function _0x33d2bf(_0x292eb0){const _0x2081a3=_0x58ebcb,_0x3fb4d6=_0x292eb0[_0x2081a3(0x87)](/^(.*?)(\d*)$/);if(!_0x3fb4d6)return{'base':_0x292eb0,'num':0x0};const _0x2e4848=_0x3fb4d6[0x1],_0x4ccaa5=_0x3fb4d6[0x2]?parseInt(_0x3fb4d6[0x2],0xa):0x0;return{'base':_0x2e4848,'num':_0x4ccaa5};}async function _0x1537c6(){const _0x1d9692=_0x58ebcb,_0x1317e3=await _0x412320(_0x1d9692(0xee));if(!_0x1317e3||_0x1317e3[_0x1d9692(0xfd)][_0x1d9692(0x12f)])return;_0x1317e3[_0x1d9692(0xfd)]['automationAttached']=_0x1d9692(0xec),_0x2bd889('状态','已进入登录/注册弹窗');const _0x5dd860=await GM_getValue(_0xc6331f[_0x1d9692(0x114)]);if(_0x2bd889(_0x1d9692(0x118),_0x5dd860||'无(等待手动输入)'),_0x5dd860)await _0x184aa5(_0x5dd860,_0x1317e3);else _0x2bd889('状态',_0x1d9692(0x123)),_0x1317e3['addEventListener'](_0x1d9692(0xe7),async()=>{const _0x3f3e1f=_0x1d9692,_0x3187d3=_0x1317e3[_0x3f3e1f(0x11a)][_0x3f3e1f(0xbd)]()['split']('@')[0x0];_0x3187d3&&await _0x184aa5(_0x3187d3,_0x1317e3);},{'once':!0x0});}async function _0x184aa5(_0x556781,_0x17f5c5){const _0x5b66b7=_0x58ebcb;if(_0x2bd889('状态',_0x5b66b7(0x12a)+_0x556781),!await _0x1fbdcd(_0x556781))return void _0x2bd889('状态',_0x5b66b7(0x104)+_0x556781);if(!await _0x433606(_0x556781))return void _0x2bd889('状态','激活失败/超时:\x20'+_0x556781);const _0x20d6db=_0x556781+'@mdzz.uk';_0x17f5c5[_0x5b66b7(0x11a)]!==_0x20d6db&&_0x264ce0(_0x17f5c5,_0x20d6db),_0x2bd889('状态','已填充:\x20'+_0x20d6db),_0x2bd889('状态',_0x5b66b7(0x12e));const _0x524c53=await _0x412320(_0x5b66b7(0xcd));if(!_0x524c53)return void _0x2bd889('状态',_0x5b66b7(0x101));const _0x4ff73f=new MutationObserver(async _0x1d4e63=>{const _0x38ad5b=_0x5b66b7;!_0x524c53[_0x38ad5b(0x8f)]&&(_0x4ff73f[_0x38ad5b(0xb1)](),_0x2bd889('状态','验证通过,\x20点击继续...'),await _0x3d59ff(0xfa),_0x524c53['click'](),await _0x4cfa17(_0x556781,_0x38ad5b(0xf9)));});_0x524c53[_0x5b66b7(0x8f)]?_0x4ff73f[_0x5b66b7(0xb2)](_0x524c53,{'attributes':!0x0,'attributeFilter':[_0x5b66b7(0x8f)]}):(_0x2bd889('状态','验证通过,\x20点击继续...'),await _0x3d59ff(0xfa),_0x524c53['click'](),await _0x4cfa17(_0x556781,_0x5b66b7(0xf9)));}async function _0x1fbdcd(_0x47deb8){const _0x43a1b0=_0x58ebcb;console['log'](_0x43a1b0(0x106)+_0x47deb8+'\x22');try{const _0x3c7b6d=await new Promise((_0x2df486,_0x4a1dda)=>{const _0x2b2363=_0x43a1b0;GM_xmlhttpRequest({'method':'GET','url':_0x1d15ad[_0x2b2363(0x90)]+_0x2b2363(0xc3)+Date[_0x2b2363(0x12b)](),'onload':_0x2df486,'onerror':_0x4a1dda});});if(0xc8===_0x3c7b6d[_0x43a1b0(0xce)]){const _0x2bb78d=_0x3c7b6d['responseText'][_0x43a1b0(0x9e)]('\x0a')[_0x43a1b0(0xdc)](_0x359d7e=>_0x359d7e['trim']())['filter'](_0x300e0e=>_0x300e0e&&_0x300e0e[_0x43a1b0(0x10d)]>0x0);0x0===_0x2bb78d[_0x43a1b0(0x10d)]&&console[_0x43a1b0(0x8b)]('[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。');const _0x59dfdb=_0x2bb78d[_0x43a1b0(0xf3)](_0x51a723=>_0x51a723[_0x43a1b0(0x93)](_0x43a1b0(0x126))||_0x51a723[_0x43a1b0(0x93)](_0x43a1b0(0xc4))?_0x47deb8===_0x51a723:_0x47deb8[_0x43a1b0(0x93)](_0x51a723));return console[_0x43a1b0(0xa0)](_0x43a1b0(0x113)+_0x47deb8+_0x43a1b0(0xaf)+_0x59dfdb),_0x59dfdb;}console[_0x43a1b0(0x8b)](_0x43a1b0(0xd4)+_0x3c7b6d[_0x43a1b0(0xce)]);}catch(_0x3e79b3){console[_0x43a1b0(0x8b)]('[验证]\x20验证前缀时发生网络或未知错误:',_0x3e79b3);}return console[_0x43a1b0(0xa0)](_0x43a1b0(0x9d)),!0x1;}function _0x433606(_0x4bd9a1){return new Promise(_0xba0c9c=>{const _0x494076=_0x4b83;GM_xmlhttpRequest({'method':'POST','url':_0x1d15ad['backendApiUrl'],'headers':{'Content-Type':_0x494076(0xe8)},'data':JSON[_0x494076(0x11d)]({'mode':_0x494076(0x80),'emailPrefix':_0x4bd9a1}),'timeout':0x4e20,'onload':function(_0x167079){const _0x415123=_0x494076;try{_0xba0c9c(!0x0===JSON[_0x415123(0x7a)](_0x167079['responseText'])['success']);}catch(_0x1cd3b6){_0xba0c9c(!0x1);}},'onerror':function(_0x1f9a9d){_0xba0c9c(!0x1);},'ontimeout':function(){_0xba0c9c(!0x1);}});});}async function _0x4cfa17(_0x35a7e1,_0x1cf245,_0x2386a6=0x3){const _0x2e0d19=_0x58ebcb;for(let _0x18734b=0x1;_0x18734b<=_0x2386a6;_0x18734b++)if(_0x2bd889('状态','第\x20'+_0x18734b+'/'+_0x2386a6+_0x2e0d19(0x128)),await(async function(){const _0x58efdc=_0x2e0d19;try{const _0xa97144=await new Promise((_0xc489d9,_0xd78a63)=>{const _0x2bb61c=_0x4b83;GM_xmlhttpRequest({'method':_0x2bb61c(0x97),'url':_0x1d15ad[_0x2bb61c(0xd0)],'headers':{'Content-Type':'application/json'},'data':JSON['stringify']({'mode':'getLink','emailPrefix':_0x35a7e1,'source':_0x1cf245}),'timeout':0x3a98,'onload':_0xc489d9,'onerror':_0xd78a63,'ontimeout':_0xd78a63});}),_0x46ab4a=JSON[_0x58efdc(0x7a)](_0xa97144[_0x58efdc(0x103)]);if(_0x46ab4a[_0x58efdc(0x9a)]&&_0x46ab4a[_0x58efdc(0xed)])return _0x2bd889('状态',_0x58efdc(0x91)),void(window[_0x58efdc(0x7c)][_0x58efdc(0xf6)]=_0x46ab4a[_0x58efdc(0xed)]);_0x2bd889('状态',_0x58efdc(0x9f)+(_0x46ab4a[_0x58efdc(0x8b)]||_0x58efdc(0xd3)));}catch(_0x4cff1c){throw console[_0x58efdc(0x8b)](_0x58efdc(0xaa)+_0x18734b+_0x58efdc(0x92),_0x4cff1c),_0x4cff1c;}}()))return;else{if(_0x18734b===_0x2386a6)return void _0x2bd889('状态','Worker网络错误,\x20已达最大重试次数');await _0x3d59ff(0x7d0);}}function _0x264ce0(_0x5190a2,_0x37e5f9){const _0x449059=_0x58ebcb;try{return Object[_0x449059(0x73)](HTMLInputElement[_0x449059(0x74)],_0x449059(0x11a))[_0x449059(0x10f)]['call'](_0x5190a2,_0x37e5f9),[_0x449059(0x112),_0x449059(0xbc),'blur']['forEach'](_0x50a1e9=>_0x5190a2[_0x449059(0xca)](new Event(_0x50a1e9,{'bubbles':!0x0}))),!0x0;}catch(_0x5e87c6){return!0x1;}}function _0x4f9684(){const _0x313256=_0x58ebcb,_0xb92e4=new URL(window[_0x313256(0x7c)]['href']),_0x41398b=_0xb92e4[_0x313256(0x129)][_0x313256(0xc9)]('next_account');_0x41398b&&GM_setValue(_0xc6331f['LAST_ACCOUNT'],_0x41398b)[_0x313256(0xb8)](()=>{const _0x267402=_0x313256;_0xb92e4[_0x267402(0x129)]['delete'](_0x267402(0xa6)),history['replaceState'](null,'',_0xb92e4[_0x267402(0x6d)]());});}}()));function _0x277c(){const _0x180ff2=['value','auto','529782VamskX','stringify','/home','#tm-mgmt-title','replace','clientX','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','等待手动输入...','tagName','\x20Safari/537.36\x20Edg/','chh','cursor','\x20次尝试获取登录链接...','searchParams','验证前缀:\x20','now','createElement','logicExecuted','等待CF验证...','automationAttached','bottom','apply','user','right','toString','9747084uauSON','next_referral_link_lovart','已保存接力链接!','getElementById','grab','getOwnPropertyDescriptor','prototype','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','offsetParent','BUTTON','loginModal','Referral\x20Link','parse','https://co.taotile.ltd/dizhi.txt','location','warn','mouseup','22836cWASCm','activate','textContent','11NXFxma','div,\x20p,\x20h1,\x20h2','alt','top','\x20Safari/537.36','match','random','_tampermonkeyUrl','9aVpmwa','error','错误:\x20未找到引荐链接','homepage','35CRmEYH','disabled','remoteRulesUrl','成功获取链接,\x20跳转中...','\x20次尝试失败:','startsWith','主页,\x20尝试调用函数...','精确定位引荐按钮...','onClick','POST','search','reload','success','stopPropagation','@mdzz.uk','[验证]\x20因发生错误或验证失败，最终返回:\x20false','split','获取链接失败:\x20','log',',\x20等待手动登出...','removeEventListener','LOCAL_BACKUP_LIST','lovart.ai','tm-mgmt-status','next_account','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','find','14_5','获取登录链接第\x20','1719410qWDrgn','none','referralCode=','83854TjmHZj','\x22\x20的验证结果为:\x20','1525629wzSMMl','disconnect','observe','preventDefault','307736TjdrLf','section[role=\x22dialog\x22]\x20span.truncate','avatar','grabbing','then','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','6ArAvGi','querySelectorAll','change','trim','等待服务器获取登录链接...','loggedIn','floor','includes','innerHTML','?t=','cxianyu','click','userSelect','错误:\x20按钮无点击函数','__reactProps$','get','dispatchEvent','DOMContentLoaded','style','#emailLogin','status','button','backendApiUrl','clientY','closest','未知服务器错误','[验证]\x20获取规则文件失败，服务器状态码:\x20','guest','body','from','function','N/A','https://lhou.taotile.ltd/','headers','map','XMLHttpRequest','GET','ENABLED','.0)\x20Gecko/20100101\x20Firefox/','[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:','checkEmail','tm-mgmt-panel','/canvas','endsWith','User-Agent','blur','application/json','substring','错误:\x20DesignNow无点击函数','检测到接力链接...','true','link','input[placeholder=\x22Email\x22]','tm-mgmt-next-user','主页,\x20等待\x20\x27Design\x20Now\x27...','接力链接','按钮已定位,\x20直接调用函数...','some','open','根页面，随机跳转...','href','keys','setRequestHeader','Lovart','所有存储的账户和链接信息已清除，页面将刷新。','15_0','.0.','dataset','getAttribute','mousemove','header\x20img[alt][class*=\x22rounded-full\x22]','错误:\x20未找到继续按钮','addEventListener','responseText','前缀无效:\x20','toLowerCase','[验证]\x20开始验证前缀:\x20\x22','Design\x20Now','NEXT_REFERRAL_LINK','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','div.bottom-left-user-position\x20img[alt]','fetch','Check\x20your\x20email\x20to\x20continue','length','已登录:\x20','set','2FxOTti','send','input','[验证]\x20前缀\x20\x22','LAST_ACCOUNT','13_5','left','querySelector','下一账户','REMOTE_URL'];_0x277c=function(){return _0x180ff2;};return _0x277c();}

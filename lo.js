// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.262
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      lhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x3121(_0x4022f4,_0x87aac2){const _0x219a2e=_0x219a();return _0x3121=function(_0x3121d5,_0x23976a){_0x3121d5=_0x3121d5-0x127;let _0x4012ce=_0x219a2e[_0x3121d5];return _0x4012ce;},_0x3121(_0x4022f4,_0x87aac2);}(function(_0x12f459,_0x1d5823){const _0x155745=_0x3121,_0x4472d6=_0x12f459();while(!![]){try{const _0x2be23e=-parseInt(_0x155745(0x1b0))/0x1*(parseInt(_0x155745(0x17f))/0x2)+-parseInt(_0x155745(0x1a1))/0x3*(-parseInt(_0x155745(0x150))/0x4)+parseInt(_0x155745(0x18f))/0x5*(parseInt(_0x155745(0x1d3))/0x6)+-parseInt(_0x155745(0x166))/0x7*(parseInt(_0x155745(0x1e6))/0x8)+-parseInt(_0x155745(0x159))/0x9+parseInt(_0x155745(0x141))/0xa*(parseInt(_0x155745(0x162))/0xb)+parseInt(_0x155745(0x168))/0xc*(parseInt(_0x155745(0x1c7))/0xd);if(_0x2be23e===_0x1d5823)break;else _0x4472d6['push'](_0x4472d6['shift']());}catch(_0x33e14b){_0x4472d6['push'](_0x4472d6['shift']());}}}(_0x219a,0x85c67),(function(){'use strict';const _0x699fb5=_0x3121;if(window[_0x699fb5(0x17a)]!==window[_0x699fb5(0x164)])return;const _0x5e21f8={'ENABLED':!0x0,'REMOTE_URL':_0x699fb5(0x188),'LOCAL_BACKUP_LIST':[_0x699fb5(0x151),_0x699fb5(0x12e)]},_0x48b1a0={'NEXT_REFERRAL_LINK':_0x699fb5(0x132),'LAST_ACCOUNT':'last_used_account_lovart'},_0x2d3217={'emailSuffix':_0x699fb5(0x145),'remoteRulesUrl':_0x699fb5(0x1da),'backendApiUrl':'https://lhou.taotile.ltd/'},_0x1d99ea=[_0x699fb5(0x1df),_0x699fb5(0x19b),_0x699fb5(0x16f),''];_0x4bdb59(),document[_0x699fb5(0x163)](_0x699fb5(0x136),_0x2371dd);async function _0x2371dd(){const _0xc8808b=_0x699fb5;_0x461b31(),await _0x1593c2(0x32);const _0x5133aa=window[_0xc8808b(0x1bf)][_0xc8808b(0x1c9)],_0x172bb6=window[_0xc8808b(0x1bf)][_0xc8808b(0x19d)];if(_0x5133aa[_0xc8808b(0x1ae)]('/home')||_0x5133aa[_0xc8808b(0x1ae)]('/canvas')||_0x172bb6[_0xc8808b(0x138)](_0xc8808b(0x131)))_0x82154f('状态','已在目标页面');else{const _0x57e0fd=await GM_getValue(_0x48b1a0[_0xc8808b(0x14a)],null);if(_0x57e0fd){await GM_setValue(_0x48b1a0['NEXT_REFERRAL_LINK'],null),_0x82154f('状态','检测到接力链接...'),window['location']['href']=_0x57e0fd;return;}const _0x451709=_0x5133aa==='/'&&!_0x172bb6;if(_0x451709&&_0x5e21f8[_0xc8808b(0x127)]){_0x82154f('状态',_0xc8808b(0x16d));const _0x2282b9=await _0x4d0d4f()||_0x5e21f8['LOCAL_BACKUP_LIST'];if(_0x2282b9&&_0x2282b9['length']>0x0){const _0x3d7009=_0x2282b9[Math[_0xc8808b(0x17b)](Math['random']()*_0x2282b9[_0xc8808b(0x191)])];window['location'][_0xc8808b(0x12b)]=_0x3d7009;return;}}}_0x147da7(),_0x5ef4eb();}const _0x2fbc69=(_0xfb8871,_0x187561=0x1388)=>new Promise(_0x521fb9=>{const _0x1cba6c=setInterval(()=>{const _0x4eca69=document['querySelector'](_0xfb8871);_0x4eca69&&(clearInterval(_0x1cba6c),_0x521fb9(_0x4eca69));},0x64);setTimeout(()=>{clearInterval(_0x1cba6c),_0x521fb9(null);},_0x187561);}),_0x1593c2=_0x46929e=>new Promise(_0x5a6405=>setTimeout(_0x5a6405,_0x46929e));function _0x28a7e7(_0x707b72,_0x23797c,_0x15d449=![]){const _0x180b52=_0x699fb5,_0x335e6b=document[_0x180b52(0x194)](_0x707b72);for(const _0x3ac11d of _0x335e6b){const _0x3fe694=_0x3ac11d['textContent'][_0x180b52(0x13e)]()[_0x180b52(0x13d)]();if(_0x3ac11d['offsetParent']!==null&&(_0x15d449?_0x3fe694===_0x23797c[_0x180b52(0x13d)]():_0x3fe694[_0x180b52(0x138)](_0x23797c[_0x180b52(0x13d)]())))return _0x3ac11d;}return null;}async function _0x4d0d4f(){const _0x4f2f49=_0x699fb5;if(!_0x5e21f8['REMOTE_URL'])return null;const _0x52c58a=_0x5e21f8['REMOTE_URL']+'?t='+Date[_0x4f2f49(0x1a6)]();return new Promise(_0x2afa68=>{const _0x1abae1=_0x4f2f49;GM_xmlhttpRequest({'method':_0x1abae1(0x180),'url':_0x52c58a,'onload':function(_0x350af3){const _0x555316=_0x1abae1;0xc8===_0x350af3[_0x555316(0x1d6)]?_0x2afa68(_0x350af3[_0x555316(0x1ec)]['match'](/^(https?:\/\/\S+)/gm)||[]):_0x2afa68(null);},'onerror':function(){_0x2afa68(null);}});});}function _0x4bdb59(){const _0x477a6e=_0x699fb5,_0x2737e8=()=>{const _0x3d774c=_0x3121,_0x2527c7=Math['random']();if(_0x2527c7<0.6){const _0x1603f6=0x7e+Math[_0x3d774c(0x17b)](0x5*Math[_0x3d774c(0x199)]()),_0x119ed8=0x1388+Math[_0x3d774c(0x17b)](0xbb8*Math[_0x3d774c(0x199)]()),_0x398cd8=Math[_0x3d774c(0x17b)](0x96*Math['random']()),_0x55b8e3=_0x1603f6+_0x3d774c(0x128)+_0x119ed8+'.'+_0x398cd8,_0x31bd35=Math['random']();return _0x31bd35<0.6?_0x3d774c(0x192)+_0x55b8e3+'\x20Safari/537.36':_0x31bd35<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x55b8e3+'\x20Safari/537.36':_0x3d774c(0x192)+_0x55b8e3+_0x3d774c(0x177)+_0x55b8e3;}if(_0x2527c7<0.9){const _0x4e7f1b=0x7f+Math['floor'](0x5*Math[_0x3d774c(0x199)]());return Math['random']()<0.65?'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:'+_0x4e7f1b+_0x3d774c(0x137)+_0x4e7f1b+'.0':_0x3d774c(0x153)+_0x4e7f1b+'.0)\x20Gecko/20100101\x20Firefox/'+_0x4e7f1b+'.0';}{const _0xaf96b1={'18.0':_0x3d774c(0x171),'17.5':_0x3d774c(0x1ed),'17.4.1':_0x3d774c(0x186),'16.6':_0x3d774c(0x1c1)},_0x18f8d1=Object[_0x3d774c(0x18c)](_0xaf96b1),_0x1ac9fc=_0x18f8d1[Math[_0x3d774c(0x17b)](Math[_0x3d774c(0x199)]()*_0x18f8d1['length'])],_0x5e14dc=_0xaf96b1[_0x1ac9fc];return _0x3d774c(0x152)+_0x5e14dc[_0x3d774c(0x19c)](/\./g,'_')+_0x3d774c(0x1ea)+_0x1ac9fc+_0x3d774c(0x19a);}},_0x4d68b8=_0x2737e8(),_0x59a93a=unsafeWindow[_0x477a6e(0x142)];unsafeWindow[_0x477a6e(0x142)]=function(_0x150a7f,_0xc32f03){const _0x3c3df9=_0x477a6e;let _0x51b6aa={..._0xc32f03};try{if(new URL(_0x150a7f,window['location'][_0x3c3df9(0x12b)])[_0x3c3df9(0x179)][_0x3c3df9(0x17d)](_0x3c3df9(0x14b))){const _0x5a24be=new Headers(_0x51b6aa[_0x3c3df9(0x15b)]);_0x5a24be[_0x3c3df9(0x14c)]('User-Agent',_0x4d68b8),_0x51b6aa[_0x3c3df9(0x15b)]=_0x5a24be;}}catch(_0x2440ed){console['warn'](_0x3c3df9(0x181),_0x2440ed,_0xc32f03);}return _0x59a93a[_0x3c3df9(0x1a4)](this,_0x150a7f,_0x51b6aa);};const _0xf9e0b0=unsafeWindow[_0x477a6e(0x158)][_0x477a6e(0x156)][_0x477a6e(0x1c0)],_0x10164e=unsafeWindow['XMLHttpRequest'][_0x477a6e(0x156)][_0x477a6e(0x176)];unsafeWindow['XMLHttpRequest'][_0x477a6e(0x156)][_0x477a6e(0x1c0)]=function(_0x50d824,_0x293d53,..._0x3b015a){const _0x327e90=_0x477a6e;return this['_tampermonkeyUrl']=_0x293d53,_0xf9e0b0[_0x327e90(0x196)](this,[_0x50d824,_0x293d53,..._0x3b015a]);},unsafeWindow[_0x477a6e(0x158)][_0x477a6e(0x156)][_0x477a6e(0x176)]=function(..._0x99e03c){const _0x5a1885=_0x477a6e;try{this[_0x5a1885(0x1ca)]&&new URL(this['_tampermonkeyUrl'],window[_0x5a1885(0x1bf)][_0x5a1885(0x12b)])[_0x5a1885(0x179)][_0x5a1885(0x17d)](_0x5a1885(0x14b))&&this['setRequestHeader']('User-Agent',_0x4d68b8);}catch(_0x5a0ebd){console[_0x5a1885(0x190)](_0x5a1885(0x1e9),this[_0x5a1885(0x1ca)],_0x5a0ebd);}return _0x10164e[_0x5a1885(0x196)](this,_0x99e03c);};}function _0x4da5f0(_0x14bdaa,_0x820e62){const _0x43d5b4=_0x699fb5;let _0x42bf51,_0x45e3e4,_0x4aac0b=![];_0x820e62[_0x43d5b4(0x163)](_0x43d5b4(0x144),_0x3c840a=>{const _0x15a6cf=_0x43d5b4;if(_0x3c840a[_0x15a6cf(0x129)][_0x15a6cf(0x1b6)]===_0x15a6cf(0x1b5))return;_0x4aac0b=!![],_0x3c840a[_0x15a6cf(0x1e1)]();const _0x55bd2f=_0x14bdaa['getBoundingClientRect']();_0x42bf51=_0x3c840a[_0x15a6cf(0x155)]-_0x55bd2f[_0x15a6cf(0x12a)],_0x45e3e4=_0x3c840a[_0x15a6cf(0x130)]-_0x55bd2f[_0x15a6cf(0x17a)],_0x820e62[_0x15a6cf(0x14d)][_0x15a6cf(0x178)]='grabbing',document[_0x15a6cf(0x167)]['style'][_0x15a6cf(0x1b9)]=_0x15a6cf(0x197),_0x14bdaa['style']['right']=_0x15a6cf(0x1ba),_0x14bdaa[_0x15a6cf(0x14d)][_0x15a6cf(0x15f)]=_0x15a6cf(0x1ba),document[_0x15a6cf(0x163)](_0x15a6cf(0x1dd),_0x95bafa),document['addEventListener'](_0x15a6cf(0x1a7),_0x110c27,{'once':!![]});});function _0x95bafa(_0x4b0201){const _0x323435=_0x43d5b4;if(!_0x4aac0b)return;_0x14bdaa[_0x323435(0x14d)][_0x323435(0x12a)]=_0x4b0201[_0x323435(0x155)]-_0x42bf51+'px',_0x14bdaa[_0x323435(0x14d)]['top']=_0x4b0201[_0x323435(0x130)]-_0x45e3e4+'px';}function _0x110c27(){const _0x15768e=_0x43d5b4;_0x4aac0b=![],_0x820e62[_0x15768e(0x14d)]['cursor']='grab',document[_0x15768e(0x167)]['style']['userSelect']=_0x15768e(0x1ba),document[_0x15768e(0x185)](_0x15768e(0x1dd),_0x95bafa);}_0x820e62[_0x43d5b4(0x14d)]['cursor']=_0x43d5b4(0x1e8);}function _0x461b31(){const _0x16b929=_0x699fb5;if(document[_0x16b929(0x1aa)](_0x16b929(0x1d8)))return;const _0x267302=document[_0x16b929(0x148)](_0x16b929(0x14f));_0x267302['id']=_0x16b929(0x1d8),_0x267302['innerHTML']=_0x16b929(0x172);const _0x134b48=_0x267302[_0x16b929(0x14e)](_0x16b929(0x18d));_0x4da5f0(_0x267302,_0x134b48),document[_0x16b929(0x167)][_0x16b929(0x189)](_0x267302),GM_addStyle(_0x16b929(0x160)),document[_0x16b929(0x1aa)](_0x16b929(0x1e7))[_0x16b929(0x163)]('click',async()=>{const _0x52d5f6=_0x16b929;await GM_setValue(_0x48b1a0[_0x52d5f6(0x1a0)],null),await GM_setValue(_0x48b1a0[_0x52d5f6(0x14a)],null),alert(_0x52d5f6(0x1a8)),location['reload']();});}function _0x82154f(_0x360838,_0xe85b05){const _0x5aa62b=_0x699fb5,_0x77e243={'状态':'tm-mgmt-status','下一账户':_0x5aa62b(0x139),'接力链接':'tm-mgmt-next-link'}[_0x360838];if(_0x77e243){const _0x555162=document[_0x5aa62b(0x1aa)](_0x77e243);if(_0x555162)_0x555162[_0x5aa62b(0x198)]=_0xe85b05;}}async function _0x270c58(){const _0xdbb614=_0x699fb5;_0x82154f('状态',_0xdbb614(0x18a));let _0x501a52=null;const _0x2c7980=document[_0xdbb614(0x194)]('header\x20div,\x20header\x20button');for(const _0x2c2bc3 of _0x2c7980){if(_0xdbb614(0x1bb)===_0x2c2bc3[_0xdbb614(0x198)][_0xdbb614(0x13e)]()&&null!==_0x2c2bc3[_0xdbb614(0x1d1)]){_0x501a52=_0x2c2bc3;break;}}if(!_0x501a52)return void _0x82154f('状态',_0xdbb614(0x1ab));_0x82154f('状态',_0xdbb614(0x1c2));const _0x223d57=Object[_0xdbb614(0x18c)](_0x501a52)[_0xdbb614(0x19e)](_0x160e50=>_0x160e50[_0xdbb614(0x1ae)](_0xdbb614(0x183)));if(_0x223d57){const _0x212e31=_0x501a52[_0x223d57];_0x212e31&&_0xdbb614(0x135)==typeof _0x212e31[_0xdbb614(0x182)]?_0x212e31['onClick']():_0x82154f('状态',_0xdbb614(0x1b8));}else _0x82154f('状态',_0xdbb614(0x1e4));const _0x5317d4=await _0x2fbc69(_0xdbb614(0x1db));if(!_0x5317d4){_0x82154f('状态','错误:\x20未找到引荐链接');const _0x1b035d=await _0x2fbc69(_0xdbb614(0x1c8),0x3e8);return void(_0x1b035d&&_0x1b035d['click']());}const _0xcfbe50=_0x5317d4['textContent'][_0xdbb614(0x13e)]();if(_0xcfbe50&&_0xcfbe50[_0xdbb614(0x138)]('referralCode=')){await GM_setValue(_0x48b1a0[_0xdbb614(0x14a)],_0xcfbe50);const _0x4a2db9=_0xcfbe50[_0xdbb614(0x19f)](/referralCode=([^&]+)/);_0x4a2db9&&_0x4a2db9[0x1]&&_0x82154f('接力链接',_0x4a2db9[0x1][_0xdbb614(0x143)](0x0,0x7)),_0x82154f('状态',_0xdbb614(0x187));}const _0x1991cf=await _0x2fbc69(_0xdbb614(0x1c8));_0x1991cf&&_0x1991cf[_0xdbb614(0x16b)]();}async function _0x5ca894(_0x5071af){const _0x233a12=_0x699fb5,_0x36b1e3=(_0x5071af[_0x233a12(0x1d2)](_0x233a12(0x1ad))||'')[_0x233a12(0x13e)]();if(!_0x36b1e3||document[_0x233a12(0x167)]['dataset'][_0x233a12(0x1b2)])return;document['body'][_0x233a12(0x15d)][_0x233a12(0x1b2)]=_0x233a12(0x1d0),_0x82154f('状态',_0x233a12(0x140)+_0x36b1e3),_0x82154f(_0x233a12(0x1c3),'N/A'),await _0x1593c2(0x5dc),await _0x270c58();const {base:_0x3dce0f,num:_0x3d75c1}=_0x6bd370(_0x36b1e3),_0x49016d=''+_0x3dce0f+(_0x3d75c1+0x1);await GM_setValue(_0x48b1a0['LAST_ACCOUNT'],_0x49016d),_0x82154f('下一账户',_0x49016d),_0x82154f('状态',_0x233a12(0x140)+_0x36b1e3+_0x233a12(0x1d4)),await _0x1593c2(0xfa),document[_0x233a12(0x167)]['addEventListener'](_0x233a12(0x16b),_0x1f3add=>{const _0x8baedd=_0x233a12,_0x1ae207=_0x1f3add[_0x8baedd(0x129)][_0x8baedd(0x15a)](_0x8baedd(0x16a));_0x1ae207&&(_0x1f3add[_0x8baedd(0x1e1)](),_0x1f3add[_0x8baedd(0x1cc)](),window[_0x8baedd(0x1bf)][_0x8baedd(0x195)]());},{'capture':!0x0});}async function _0x133146(){const _0x442763=_0x699fb5;_0x82154f('状态',_0x442763(0x1d7));let _0x1df0d4=null;for(let _0x52c84e=0x0;_0x52c84e<0x14;_0x52c84e++){if(_0x1df0d4=_0x28a7e7('button',_0x442763(0x16c),!0x1))break;await _0x1593c2(0x1f4);}if(!_0x1df0d4)return void _0x82154f('状态',_0x442763(0x169));_0x82154f('状态',_0x442763(0x1a9));const _0x1a8e60=Object[_0x442763(0x18c)](_0x1df0d4)[_0x442763(0x19e)](_0x5e47ba=>_0x5e47ba['startsWith']('__reactProps$'));if(_0x1a8e60){const _0x13a56b=_0x1df0d4[_0x1a8e60];_0x13a56b&&_0x442763(0x135)==typeof _0x13a56b[_0x442763(0x182)]?_0x13a56b[_0x442763(0x182)]():_0x82154f('状态',_0x442763(0x12f));}else _0x82154f('状态',_0x442763(0x1b3)),_0x1df0d4[_0x442763(0x16b)]();}function _0x5ef4eb(){let _0x25059a=null;setInterval(()=>{const _0x1a78a8=_0x3121,_0x547acb=document[_0x1a78a8(0x14e)](_0x1a78a8(0x1d9))||document[_0x1a78a8(0x14e)](_0x1a78a8(0x165));if(_0x547acb){const _0x3e2d32=_0x547acb[_0x1a78a8(0x1d2)](_0x1a78a8(0x1ad))||'';if(!_0x1d99ea[_0x1a78a8(0x138)](_0x3e2d32[_0x1a78a8(0x13d)]()[_0x1a78a8(0x13e)]()))return void(_0x1a78a8(0x174)!==_0x25059a&&(_0x25059a='loggedIn',_0x5ca894(_0x547acb)));}if(_0x28a7e7(_0x1a78a8(0x16e),_0x1a78a8(0x146)))return void(_0x1a78a8(0x1eb)!==_0x25059a&&(_0x25059a='checkEmail',_0x82154f('状态',_0x1a78a8(0x1dc))));if(document[_0x1a78a8(0x14e)](_0x1a78a8(0x17e)))return void('loginModal'!==_0x25059a&&(_0x25059a=_0x1a78a8(0x133),_0x233f5d()));const _0xe7ba7=_0x28a7e7('button,\x20a,\x20div','Design\x20Now');if(_0xe7ba7)return void('homepage'!==_0x25059a&&(_0x25059a='homepage',_0x133146()));_0x25059a=null;},0x2ee);}function _0x6bd370(_0x401b7d){const _0x596cb4=_0x699fb5,_0x529b30=_0x401b7d[_0x596cb4(0x19f)](/^(.*?)(\d*)$/);if(!_0x529b30)return{'base':_0x401b7d,'num':0x0};const _0x459c0a=_0x529b30[0x1],_0x3b347d=_0x529b30[0x2]?parseInt(_0x529b30[0x2],0xa):0x0;return{'base':_0x459c0a,'num':_0x3b347d};}async function _0x233f5d(){const _0x5020a4=_0x699fb5,_0x5487eb=await _0x2fbc69(_0x5020a4(0x1af));if(!_0x5487eb||_0x5487eb['dataset'][_0x5020a4(0x1d5)])return;_0x5487eb[_0x5020a4(0x15d)][_0x5020a4(0x1d5)]=_0x5020a4(0x1d0),_0x82154f('状态','已进入登录/注册弹窗');const _0x5fb155=await GM_getValue(_0x48b1a0['LAST_ACCOUNT']);if(_0x82154f(_0x5020a4(0x1b4),_0x5fb155||'无(等待手动输入)'),_0x5fb155)await _0xa159d1(_0x5fb155,_0x5487eb);else _0x82154f('状态',_0x5020a4(0x184)),_0x5487eb[_0x5020a4(0x163)](_0x5020a4(0x154),async()=>{const _0x3a75b7=_0x5020a4,_0x2f33b5=_0x5487eb[_0x3a75b7(0x13c)]['trim']()['split']('@')[0x0];_0x2f33b5&&await _0xa159d1(_0x2f33b5,_0x5487eb);},{'once':!0x0});}async function _0xa159d1(_0x5b0728,_0x42be6c){const _0x383b28=_0x699fb5;if(_0x82154f('状态','验证前缀:\x20'+_0x5b0728),!await _0x12fcb6(_0x5b0728))return void _0x82154f('状态',_0x383b28(0x173)+_0x5b0728);if(!await _0x29d288(_0x5b0728))return void _0x82154f('状态',_0x383b28(0x18b)+_0x5b0728);const _0x292c93=_0x5b0728+_0x383b28(0x145);_0x42be6c['value']!==_0x292c93&&_0x96c0e7(_0x42be6c,_0x292c93),_0x82154f('状态','已填充:\x20'+_0x292c93),_0x82154f('状态','等待CF验证...');const _0x4915c3=await _0x2fbc69(_0x383b28(0x1ac));if(!_0x4915c3)return void _0x82154f('状态',_0x383b28(0x1c4));const _0x32c99c=new MutationObserver(async _0x339c79=>{const _0x11c788=_0x383b28;!_0x4915c3['disabled']&&(_0x32c99c['disconnect'](),_0x82154f('状态',_0x11c788(0x193)),await _0x1593c2(0xfa),_0x4915c3['click'](),await _0x28e86f(_0x5b0728,_0x11c788(0x1a2)));});_0x4915c3[_0x383b28(0x1cb)]?_0x32c99c['observe'](_0x4915c3,{'attributes':!0x0,'attributeFilter':[_0x383b28(0x1cb)]}):(_0x82154f('状态',_0x383b28(0x193)),await _0x1593c2(0xfa),_0x4915c3[_0x383b28(0x16b)](),await _0x28e86f(_0x5b0728,_0x383b28(0x1a2)));}async function _0x12fcb6(_0x487bff){const _0xf0412a=_0x699fb5;console[_0xf0412a(0x1a3)](_0xf0412a(0x1bd)+_0x487bff+'\x22');try{const _0xc8e077=await new Promise((_0x35a454,_0x1eaea4)=>{const _0x2fe030=_0xf0412a;GM_xmlhttpRequest({'method':_0x2fe030(0x180),'url':_0x2d3217[_0x2fe030(0x1be)]+'?t='+Date[_0x2fe030(0x1a6)](),'onload':_0x35a454,'onerror':_0x1eaea4});});if(0xc8===_0xc8e077[_0xf0412a(0x1d6)]){const _0x529700=_0xc8e077[_0xf0412a(0x1ec)]['split']('\x0a')[_0xf0412a(0x1b7)](_0x4c2777=>_0x4c2777['trim']())[_0xf0412a(0x13b)](_0x30d45d=>_0x30d45d&&_0x30d45d[_0xf0412a(0x191)]>0x0);0x0===_0x529700[_0xf0412a(0x191)]&&console['error'](_0xf0412a(0x13a));const _0x3d95f0=_0x529700['some'](_0x2e22fe=>_0x2e22fe[_0xf0412a(0x1ae)](_0xf0412a(0x1a5))||_0x2e22fe[_0xf0412a(0x1ae)](_0xf0412a(0x15e))?_0x487bff===_0x2e22fe:_0x487bff[_0xf0412a(0x1ae)](_0x2e22fe));return console['log']('[验证]\x20前缀\x20\x22'+_0x487bff+_0xf0412a(0x1cf)+_0x3d95f0),_0x3d95f0;}console[_0xf0412a(0x175)]('[验证]\x20获取规则文件失败，服务器状态码:\x20'+_0xc8e077[_0xf0412a(0x1d6)]);}catch(_0x27076e){console[_0xf0412a(0x175)](_0xf0412a(0x1e0),_0x27076e);}return console[_0xf0412a(0x1a3)](_0xf0412a(0x1e3)),!0x1;}function _0x29d288(_0x178916){return new Promise(_0x5e7d04=>{const _0x311fac=_0x3121;GM_xmlhttpRequest({'method':_0x311fac(0x1b1),'url':_0x2d3217[_0x311fac(0x157)],'headers':{'Content-Type':_0x311fac(0x1ce)},'data':JSON[_0x311fac(0x1cd)]({'mode':'activate','emailPrefix':_0x178916}),'timeout':0x4e20,'onload':function(_0x50c5e3){const _0x2595ce=_0x311fac;try{_0x5e7d04(!0x0===JSON['parse'](_0x50c5e3['responseText'])[_0x2595ce(0x1bc)]);}catch(_0x1e96f9){_0x5e7d04(!0x1);}},'onerror':function(_0x39aba4){_0x5e7d04(!0x1);},'ontimeout':function(){_0x5e7d04(!0x1);}});});}async function _0x28e86f(_0x3ebd47,_0xeea52b,_0x3c1dc6=0x3){const _0x4a3aa5=_0x699fb5;for(let _0x47ba31=0x1;_0x47ba31<=_0x3c1dc6;_0x47ba31++)if(_0x82154f('状态','第\x20'+_0x47ba31+'/'+_0x3c1dc6+_0x4a3aa5(0x1e5)),await(async function(){const _0x3176dd=_0x4a3aa5;try{const _0x18ae46=await new Promise((_0x54aa8d,_0x4877c0)=>{const _0x586d61=_0x3121;GM_xmlhttpRequest({'method':_0x586d61(0x1b1),'url':_0x2d3217[_0x586d61(0x157)],'headers':{'Content-Type':'application/json'},'data':JSON[_0x586d61(0x1cd)]({'mode':_0x586d61(0x134),'emailPrefix':_0x3ebd47,'source':_0xeea52b}),'timeout':0x3a98,'onload':_0x54aa8d,'onerror':_0x4877c0,'ontimeout':_0x4877c0});}),_0x475e84=JSON[_0x3176dd(0x170)](_0x18ae46[_0x3176dd(0x1ec)]);if(_0x475e84[_0x3176dd(0x1bc)]&&_0x475e84['link'])return _0x82154f('状态','成功获取链接,\x20跳转中...'),void(window[_0x3176dd(0x1bf)]['href']=_0x475e84['link']);_0x82154f('状态',_0x3176dd(0x18e)+(_0x475e84[_0x3176dd(0x175)]||_0x3176dd(0x1e2)));}catch(_0x2b1cca){throw console[_0x3176dd(0x175)](_0x3176dd(0x161)+_0x47ba31+_0x3176dd(0x1c5),_0x2b1cca),_0x2b1cca;}}()))return;else{if(_0x47ba31===_0x3c1dc6)return void _0x82154f('状态','Worker网络错误,\x20已达最大重试次数');await _0x1593c2(0x7d0);}}function _0x96c0e7(_0xad3a57,_0x5c0dad){const _0x482275=_0x699fb5;try{return Object[_0x482275(0x1de)](HTMLInputElement[_0x482275(0x156)],_0x482275(0x13c))[_0x482275(0x14c)][_0x482275(0x1a4)](_0xad3a57,_0x5c0dad),[_0x482275(0x1c6),_0x482275(0x12d),_0x482275(0x154)]['forEach'](_0x34fc17=>_0xad3a57[_0x482275(0x15c)](new Event(_0x34fc17,{'bubbles':!0x0}))),!0x0;}catch(_0x5c3a80){return!0x1;}}function _0x147da7(){const _0x375016=_0x699fb5,_0x39202b=new URL(window[_0x375016(0x1bf)][_0x375016(0x12b)]),_0x3bbb4b=_0x39202b[_0x375016(0x147)][_0x375016(0x13f)](_0x375016(0x149));_0x3bbb4b&&GM_setValue(_0x48b1a0[_0x375016(0x1a0)],_0x3bbb4b)['then'](()=>{const _0x2687e3=_0x375016;_0x39202b[_0x2687e3(0x147)]['delete'](_0x2687e3(0x149)),history[_0x2687e3(0x12c)](null,'',_0x39202b[_0x2687e3(0x17c)]());});}}()));function _0x219a(){const _0x4526a0=['主页,\x20尝试常规点击...','下一账户','BUTTON','tagName','map','错误:\x20按钮无点击函数','userSelect','auto','Invite\x20Friends','success','[验证]\x20开始验证前缀:\x20\x22','remoteRulesUrl','location','open','13_5','按钮已定位,\x20直接调用函数...','接力链接','错误:\x20未找到继续按钮','\x20次尝试失败:','input','8229BEnQuM','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','pathname','_tampermonkeyUrl','disabled','stopPropagation','stringify','application/json','\x22\x20的验证结果为:\x20','true','offsetParent','getAttribute','6OPYsDy',',\x20等待手动登出...','automationAttached','status','主页,\x20等待\x20\x27Design\x20Now\x27...','tm-mgmt-panel','header\x20img[alt][class*=\x22rounded-full\x22]','https://co.taotile.ltd/akl.txt','section[role=\x22dialog\x22]\x20span.truncate','等待服务器获取登录链接...','mousemove','getOwnPropertyDescriptor','guest','[验证]\x20验证前缀时发生网络或未知错误:','preventDefault','未知服务器错误','[验证]\x20因发生错误或验证失败，最终返回:\x20false','错误:\x20非React按钮','\x20次尝试获取登录链接...','101328yhCIGA','tm-mgmt-clear-storage','grab','[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','checkEmail','responseText','14_5','ENABLED','.0.','target','left','href','replaceState','change','https://www.lovart.ai?referralCode=VbvJyyD','错误:\x20DesignNow无点击函数','clientY','referralCode=','next_referral_link_lovart','loginModal','getLink','function','DOMContentLoaded','.0)\x20Gecko/20100101\x20Firefox/','includes','tm-mgmt-next-user','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','filter','value','toLowerCase','trim','get','已登录:\x20','231530GaatTz','fetch','substring','mousedown','@zaunist.com','Check\x20your\x20email\x20to\x20continue','searchParams','createElement','next_account','NEXT_REFERRAL_LINK','lovart.ai','set','style','querySelector','div','526980TRBjMq','https://www.lovart.ai?referralCode=ygZD4Bj','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','blur','clientX','prototype','backendApiUrl','XMLHttpRequest','9114066uuroey','closest','headers','dispatchEvent','dataset','cxianyu','bottom','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','获取登录链接第\x20','341JPFmvH','addEventListener','self','div.bottom-left-user-position\x20img[alt]','553sdjnsM','body','27516CTCMsV','错误:\x2010秒内未找到DesignNow','[data-testid=\x22user-profile-logout\x22]','click','Design\x20Now','根页面，随机跳转...','div,\x20p,\x20h1,\x20h2','avatar','parse','15_0','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','前缀无效:\x20','loggedIn','error','send','\x20Safari/537.36\x20Edg/','cursor','hostname','top','floor','toString','endsWith','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','2TVaXAy','GET','[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:','onClick','__reactProps$','等待手动输入...','removeEventListener','14_4_1','已保存接力链接!','https://co.taotile.ltd/dizhi.txt','appendChild','精确定位引荐按钮...','激活失败/超时:\x20','keys','#tm-mgmt-title','获取链接失败:\x20','4470110VNQbHs','warn','length','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','验证通过,\x20点击继续...','querySelectorAll','reload','apply','none','textContent','random','\x20Safari/605.1.15','user','replace','search','find','match','LAST_ACCOUNT','9AVBRWg','Lovart','log','call','chh','now','mouseup','所有存储的账户和链接信息已清除，页面将刷新。','主页,\x20尝试调用函数...','getElementById','错误:\x20未找到引荐按钮','#emailLogin','alt','startsWith','input[placeholder=\x22Email\x22]','897238cBPVxn','POST','logicExecuted'];_0x219a=function(){return _0x4526a0;};return _0x219a();}

// ==UserScript==
// @name         Lovart登录系统
// @namespace    http://tampermonkey.net/
// @version      1.263
// @description
// @author       haway
// @match        *://*.lovart.ai/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @grant        unsafeWindow
// @connect      zjhou.taotile.ltd
// @connect      co.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/lo.js
// @downloadURL  https://co.taotile.ltd/lo.js
// ==/UserScript==
function _0x4363(){const _0x4f73c4=['createElement','stopPropagation','__reactProps$','button','function','fetch','header\x20img[alt][class*=\x22rounded-full\x22]','div,\x20p,\x20h1,\x20h2','split','\x20Safari/537.36','querySelectorAll','alt','LAST_ACCOUNT','match','open','pathname','14_5','find','get','log','grab','blur','#tm-mgmt-title','User-Agent','clientX','style','下一账户','removeEventListener','lovart.ai','[验证]\x20获取规则文件失败，服务器状态码:\x20','\x22\x20的验证结果为:\x20','tm-mgmt-clear-storage','input[placeholder=\x22Email\x22]','[验证]\x20验证前缀时发生网络或未知错误:','按钮已定位,\x20直接调用函数...','parse','clientY','header\x20div,\x20header\x20button','preventDefault','href','[验证]\x20警告:\x20规则列表为空!\x20所有前缀都将被拒绝。','DOMContentLoaded','getBoundingClientRect','未知服务器错误','left','startsWith','next_account','已登录:\x20','now','13_5','https://co.taotile.ltd/akl.txt','section[role=\x22dialog\x22]\x20span.truncate','getElementById','无(等待手动输入)','\x20Safari/537.36\x20Edg/','getOwnPropertyDescriptor','25859232hqjWRR','成功获取链接,\x20跳转中...','NEXT_REFERRAL_LINK','14_4_1','tagName','检测到接力链接...','top','toString','then','[验证]\x20因发生错误或验证失败，最终返回:\x20false','checkEmail','mousedown','backendApiUrl','mousemove','激活失败/超时:\x20','.0.','searchParams','等待CF验证...','@hawedu.com','LOCAL_BACKUP_LIST','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/','/canvas','automationAttached','GET','guest','random','referralCode=','错误:\x20按钮无点击函数','获取登录链接第\x20','hostname','ENABLED','_tampermonkeyUrl','substring','loginModal','dispatchEvent','414792FveQQI','error','BUTTON','[验证]\x20前缀\x20\x22','remoteRulesUrl','tm-mgmt-status','精确定位引荐按钮...','auto','getAttribute','prototype','keys','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:','已填充:\x20','observe','.0)\x20Gecko/20100101\x20Firefox/','loggedIn','application/json','Check\x20your\x20email\x20to\x20continue','获取链接失败:\x20','1239zXZOVk','location','reload','12VESlUW','2493994qzasOw','delete','2953360UbDBJw','568948KjStIz','根页面，随机跳转...','homepage','主页,\x20尝试调用函数...','div','warn','next_referral_link_lovart','POST','[data-testid=\x22user-profile-logout\x22]','cxianyu','cursor','disconnect','addEventListener','activate','endsWith','div.bottom-left-user-position\x20img[alt]','body','XMLHttpRequest','[验证]\x20开始验证前缀:\x20\x22','target','apply','floor','send','接力链接','closest',')\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/','dataset','last_used_account_lovart','replaceState','Worker网络错误,\x20已达最大重试次数','[Lovart脚本]\x20解析XHR的URL失败,\x20未伪造UA:','some','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20user-select:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','tm-mgmt-next-link','trim','主页,\x20尝试常规点击...','input','user','\x20次尝试获取登录链接...','disabled','click','Invite\x20Friends','REMOTE_URL','?t=','44336lcpnsb','responseText','已进入登录/注册弹窗','headers','等待服务器获取登录链接...','value','<div\x20id=\x22tm-mgmt-title\x22>Lovart\x20智能登录系统</div><div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>NA</span></div><div\x20class=\x22tm-mgmt-row\x22><strong>接力链接:</strong>\x20<span\x20id=\x22tm-mgmt-next-link\x22>N/A</span></div><button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除所有存储</button>','chh','forEach','\x20Safari/605.1.15','错误:\x20未找到引荐链接','getLink','right','call','toLowerCase','Design\x20Now','userSelect','错误:\x20非React按钮','5672262zXItGU','link','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_','错误:\x20未找到继续按钮','success','#emailLogin','querySelector','https://zjhou.taotile.ltd/','已在目标页面','/home','Lovart','\x20次尝试失败:','onClick','tm-mgmt-panel','section[role=\x22dialog\x22]\x20button[class*=\x22close\x22]','grabbing','length','filter','https://co.taotile.ltd/dizhi.txt','mouseup','input[type=\x22email\x22],\x20input[placeholder=\x22Email\x22]','status','等待手动输入...','appendChild','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64;\x20rv:','offsetParent','true','textContent','setRequestHeader','includes'];_0x4363=function(){return _0x4f73c4;};return _0x4363();}function _0x309e(_0x1207db,_0x598a0d){const _0x4363a5=_0x4363();return _0x309e=function(_0x309ea3,_0xbeb4){_0x309ea3=_0x309ea3-0x99;let _0x4a2375=_0x4363a5[_0x309ea3];return _0x4a2375;},_0x309e(_0x1207db,_0x598a0d);}(function(_0x1cd577,_0x10edc9){const _0x305355=_0x309e,_0x2308a9=_0x1cd577();while(!![]){try{const _0x330649=parseInt(_0x305355(0x15f))/0x1+parseInt(_0x305355(0xa5))/0x2+-parseInt(_0x305355(0xa4))/0x3*(-parseInt(_0x305355(0xa8))/0x4)+-parseInt(_0x305355(0xa7))/0x5+parseInt(_0x305355(0xe6))/0x6+parseInt(_0x305355(0xa1))/0x7*(parseInt(_0x305355(0xd4))/0x8)+-parseInt(_0x305355(0x13c))/0x9;if(_0x330649===_0x10edc9)break;else _0x2308a9['push'](_0x2308a9['shift']());}catch(_0x575f1a){_0x2308a9['push'](_0x2308a9['shift']());}}}(_0x4363,0xa9388),(function(){'use strict';const _0x65435e=_0x309e;if(window[_0x65435e(0x142)]!==window['self'])return;const _0x3612e1={'ENABLED':!0x0,'REMOTE_URL':_0x65435e(0xf8),'LOCAL_BACKUP_LIST':['']},_0x3aa36a={'NEXT_REFERRAL_LINK':_0x65435e(0xae),'LAST_ACCOUNT':_0x65435e(0xc3)},_0x28fb18={'emailSuffix':'@hawedu','remoteRulesUrl':_0x65435e(0x136),'backendApiUrl':_0x65435e(0xed)},_0x2f214f=[_0x65435e(0x154),_0x65435e(0xcd),'avatar',''];_0x19bb12(),document[_0x65435e(0xb4)](_0x65435e(0x12d),_0x345d92);async function _0x345d92(){const _0x5170f2=_0x65435e;_0x1afa5d(),await _0x1afb88(0x32);const _0x3e1fc8=window[_0x5170f2(0xa2)][_0x5170f2(0x113)],_0x4d42fb=window['location']['search'];if(_0x3e1fc8[_0x5170f2(0x131)](_0x5170f2(0xef))||_0x3e1fc8[_0x5170f2(0x131)](_0x5170f2(0x151))||_0x4d42fb['includes'](_0x5170f2(0x156)))_0x553740('状态',_0x5170f2(0xee));else{const _0x1202c8=await GM_getValue(_0x3aa36a[_0x5170f2(0x13e)],null);if(_0x1202c8){await GM_setValue(_0x3aa36a[_0x5170f2(0x13e)],null),_0x553740('状态',_0x5170f2(0x141)),window[_0x5170f2(0xa2)]['href']=_0x1202c8;return;}const _0x3f9ada=_0x3e1fc8==='/'&&!_0x4d42fb;if(_0x3f9ada&&_0x3612e1[_0x5170f2(0x15a)]){_0x553740('状态',_0x5170f2(0xa9));const _0x396ec5=await _0x409c7a()||_0x3612e1[_0x5170f2(0x14f)];if(_0x396ec5&&_0x396ec5['length']>0x0){const _0x51f2b9=_0x396ec5[Math[_0x5170f2(0xbd)](Math[_0x5170f2(0x155)]()*_0x396ec5[_0x5170f2(0xf6)])];window[_0x5170f2(0xa2)][_0x5170f2(0x12b)]=_0x51f2b9;return;}}}_0x4b9045(),_0x2e2235();}const _0x27eebd=(_0x18ab36,_0x49a709=0x1388)=>new Promise(_0x49b54d=>{const _0x114261=setInterval(()=>{const _0x3752be=_0x309e,_0x2cae67=document[_0x3752be(0xec)](_0x18ab36);_0x2cae67&&(clearInterval(_0x114261),_0x49b54d(_0x2cae67));},0x64);setTimeout(()=>{clearInterval(_0x114261),_0x49b54d(null);},_0x49a709);}),_0x1afb88=_0x3d406f=>new Promise(_0x5c7b19=>setTimeout(_0x5c7b19,_0x3d406f));function _0x3b8b8f(_0x226054,_0x55869f,_0x3e3edc=![]){const _0x3f4fb3=_0x65435e,_0x5a4ac4=document[_0x3f4fb3(0x10e)](_0x226054);for(const _0x2387b9 of _0x5a4ac4){const _0x1ba4eb=_0x2387b9[_0x3f4fb3(0x101)][_0x3f4fb3(0xca)]()[_0x3f4fb3(0xe2)]();if(_0x2387b9[_0x3f4fb3(0xff)]!==null&&(_0x3e3edc?_0x1ba4eb===_0x55869f[_0x3f4fb3(0xe2)]():_0x1ba4eb[_0x3f4fb3(0x103)](_0x55869f[_0x3f4fb3(0xe2)]())))return _0x2387b9;}return null;}async function _0x409c7a(){const _0x808a55=_0x65435e;if(!_0x3612e1[_0x808a55(0xd2)])return null;const _0x533c5e=_0x3612e1[_0x808a55(0xd2)]+_0x808a55(0xd3)+Date[_0x808a55(0x134)]();return new Promise(_0x52b53b=>{const _0x277bd5=_0x808a55;GM_xmlhttpRequest({'method':_0x277bd5(0x153),'url':_0x533c5e,'onload':function(_0x58dbc4){const _0x459c19=_0x277bd5;0xc8===_0x58dbc4[_0x459c19(0xfb)]?_0x52b53b(_0x58dbc4[_0x459c19(0xd5)][_0x459c19(0x111)](/^(https?:\/\/\S+)/gm)||[]):_0x52b53b(null);},'onerror':function(){_0x52b53b(null);}});});}function _0x19bb12(){const _0x523527=_0x65435e,_0x41e6a6=()=>{const _0x2d36dc=_0x309e,_0x3e55d5=Math[_0x2d36dc(0x155)]();if(_0x3e55d5<0.6){const _0x4c940f=0x7e+Math[_0x2d36dc(0xbd)](0x5*Math[_0x2d36dc(0x155)]()),_0xe3e904=0x1388+Math[_0x2d36dc(0xbd)](0xbb8*Math[_0x2d36dc(0x155)]()),_0x504eb5=Math[_0x2d36dc(0xbd)](0x96*Math[_0x2d36dc(0x155)]()),_0x22f895=_0x4c940f+_0x2d36dc(0x14b)+_0xe3e904+'.'+_0x504eb5,_0x31fc03=Math['random']();return _0x31fc03<0.6?_0x2d36dc(0x150)+_0x22f895+_0x2d36dc(0x10d):_0x31fc03<0.9?'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/'+_0x22f895+_0x2d36dc(0x10d):_0x2d36dc(0x150)+_0x22f895+_0x2d36dc(0x13a)+_0x22f895;}if(_0x3e55d5<0.9){const _0x566c07=0x7f+Math['floor'](0x5*Math[_0x2d36dc(0x155)]());return Math[_0x2d36dc(0x155)]()<0.65?_0x2d36dc(0xfe)+_0x566c07+_0x2d36dc(0x9c)+_0x566c07+'.0':_0x2d36dc(0x99)+_0x566c07+_0x2d36dc(0x9c)+_0x566c07+'.0';}{const _0x3987c9={'18.0':'15_0','17.5':_0x2d36dc(0x114),'17.4.1':_0x2d36dc(0x13f),'16.6':_0x2d36dc(0x135)},_0x368f27=Object[_0x2d36dc(0x169)](_0x3987c9),_0xc0de09=_0x368f27[Math[_0x2d36dc(0xbd)](Math[_0x2d36dc(0x155)]()*_0x368f27[_0x2d36dc(0xf6)])],_0x46690d=_0x3987c9[_0xc0de09];return _0x2d36dc(0xe8)+_0x46690d['replace'](/\./g,'_')+_0x2d36dc(0xc1)+_0xc0de09+_0x2d36dc(0xdd);}},_0x102877=_0x41e6a6(),_0x44867f=unsafeWindow[_0x523527(0x109)];unsafeWindow[_0x523527(0x109)]=function(_0x54c732,_0x3ca7b6){const _0x1526cf=_0x523527;let _0x4dfb72={..._0x3ca7b6};try{if(new URL(_0x54c732,window['location'][_0x1526cf(0x12b)])['hostname'][_0x1526cf(0xb6)](_0x1526cf(0x120))){const _0x5362dd=new Headers(_0x4dfb72[_0x1526cf(0xd7)]);_0x5362dd['set'](_0x1526cf(0x11b),_0x102877),_0x4dfb72[_0x1526cf(0xd7)]=_0x5362dd;}}catch(_0x3a612f){console[_0x1526cf(0xad)]('[Lovart脚本]\x20解析fetch的URL失败,\x20未伪造UA:',_0x3a612f,_0x3ca7b6);}return _0x44867f[_0x1526cf(0xe1)](this,_0x54c732,_0x4dfb72);};const _0x3c4614=unsafeWindow['XMLHttpRequest'][_0x523527(0x168)][_0x523527(0x112)],_0x234f5c=unsafeWindow[_0x523527(0xb9)][_0x523527(0x168)][_0x523527(0xbe)];unsafeWindow[_0x523527(0xb9)][_0x523527(0x168)][_0x523527(0x112)]=function(_0xfccbfd,_0x2134c9,..._0x4998c9){const _0x42ab74=_0x523527;return this[_0x42ab74(0x15b)]=_0x2134c9,_0x3c4614[_0x42ab74(0xbc)](this,[_0xfccbfd,_0x2134c9,..._0x4998c9]);},unsafeWindow[_0x523527(0xb9)][_0x523527(0x168)][_0x523527(0xbe)]=function(..._0x30a858){const _0x1d1acc=_0x523527;try{this['_tampermonkeyUrl']&&new URL(this['_tampermonkeyUrl'],window['location'][_0x1d1acc(0x12b)])[_0x1d1acc(0x159)][_0x1d1acc(0xb6)](_0x1d1acc(0x120))&&this[_0x1d1acc(0x102)](_0x1d1acc(0x11b),_0x102877);}catch(_0x572b2e){console[_0x1d1acc(0xad)](_0x1d1acc(0xc6),this[_0x1d1acc(0x15b)],_0x572b2e);}return _0x234f5c[_0x1d1acc(0xbc)](this,_0x30a858);};}function _0x82ee43(_0x2dbba2,_0x15b97){const _0x21374b=_0x65435e;let _0x474ad7,_0x2e763d,_0x433c63=![];_0x15b97[_0x21374b(0xb4)](_0x21374b(0x147),_0x1c1bb2=>{const _0x22bd9c=_0x21374b;if(_0x1c1bb2[_0x22bd9c(0xbb)][_0x22bd9c(0x140)]===_0x22bd9c(0x161))return;_0x433c63=!![],_0x1c1bb2[_0x22bd9c(0x12a)]();const _0x1e4500=_0x2dbba2[_0x22bd9c(0x12e)]();_0x474ad7=_0x1c1bb2[_0x22bd9c(0x11c)]-_0x1e4500['left'],_0x2e763d=_0x1c1bb2[_0x22bd9c(0x128)]-_0x1e4500[_0x22bd9c(0x142)],_0x15b97[_0x22bd9c(0x11d)][_0x22bd9c(0xb2)]=_0x22bd9c(0xf5),document[_0x22bd9c(0xb8)][_0x22bd9c(0x11d)]['userSelect']='none',_0x2dbba2['style'][_0x22bd9c(0xe0)]=_0x22bd9c(0x166),_0x2dbba2[_0x22bd9c(0x11d)]['bottom']='auto',document[_0x22bd9c(0xb4)](_0x22bd9c(0x149),_0x1ecdf7),document[_0x22bd9c(0xb4)](_0x22bd9c(0xf9),_0x7400f3,{'once':!![]});});function _0x1ecdf7(_0x2ab20b){const _0x4d476a=_0x21374b;if(!_0x433c63)return;_0x2dbba2['style'][_0x4d476a(0x130)]=_0x2ab20b[_0x4d476a(0x11c)]-_0x474ad7+'px',_0x2dbba2['style'][_0x4d476a(0x142)]=_0x2ab20b[_0x4d476a(0x128)]-_0x2e763d+'px';}function _0x7400f3(){const _0x375e1a=_0x21374b;_0x433c63=![],_0x15b97['style'][_0x375e1a(0xb2)]=_0x375e1a(0x118),document[_0x375e1a(0xb8)]['style'][_0x375e1a(0xe4)]=_0x375e1a(0x166),document[_0x375e1a(0x11f)](_0x375e1a(0x149),_0x1ecdf7);}_0x15b97['style']['cursor']=_0x21374b(0x118);}function _0x1afa5d(){const _0x7f095a=_0x65435e;if(document[_0x7f095a(0x138)](_0x7f095a(0xf3)))return;const _0x2fef0c=document[_0x7f095a(0x104)](_0x7f095a(0xac));_0x2fef0c['id']=_0x7f095a(0xf3),_0x2fef0c['innerHTML']=_0x7f095a(0xda);const _0x32e4ad=_0x2fef0c['querySelector'](_0x7f095a(0x11a));_0x82ee43(_0x2fef0c,_0x32e4ad),document[_0x7f095a(0xb8)][_0x7f095a(0xfd)](_0x2fef0c),GM_addStyle(_0x7f095a(0xc8)),document[_0x7f095a(0x138)](_0x7f095a(0x123))['addEventListener'](_0x7f095a(0xd0),async()=>{const _0x53416a=_0x7f095a;await GM_setValue(_0x3aa36a['LAST_ACCOUNT'],null),await GM_setValue(_0x3aa36a[_0x53416a(0x13e)],null),alert('所有存储的账户和链接信息已清除，页面将刷新。'),location[_0x53416a(0xa3)]();});}function _0x553740(_0x120a28,_0x4f940d){const _0x2485ed=_0x65435e,_0x1d31ce={'状态':_0x2485ed(0x164),'下一账户':'tm-mgmt-next-user','接力链接':_0x2485ed(0xc9)}[_0x120a28];if(_0x1d31ce){const _0x1d5e46=document['getElementById'](_0x1d31ce);if(_0x1d5e46)_0x1d5e46[_0x2485ed(0x101)]=_0x4f940d;}}async function _0x2cd65b(){const _0x3dc7c6=_0x65435e;_0x553740('状态',_0x3dc7c6(0x165));let _0x486aa7=null;const _0x262334=document[_0x3dc7c6(0x10e)](_0x3dc7c6(0x129));for(const _0x4ad8f2 of _0x262334){if(_0x3dc7c6(0xd1)===_0x4ad8f2[_0x3dc7c6(0x101)][_0x3dc7c6(0xca)]()&&null!==_0x4ad8f2[_0x3dc7c6(0xff)]){_0x486aa7=_0x4ad8f2;break;}}if(!_0x486aa7)return void _0x553740('状态','错误:\x20未找到引荐按钮');_0x553740('状态',_0x3dc7c6(0x126));const _0x4ebfe2=Object[_0x3dc7c6(0x169)](_0x486aa7)[_0x3dc7c6(0x115)](_0x4c5ed4=>_0x4c5ed4[_0x3dc7c6(0x131)](_0x3dc7c6(0x106)));if(_0x4ebfe2){const _0x1e67ff=_0x486aa7[_0x4ebfe2];_0x1e67ff&&'function'==typeof _0x1e67ff[_0x3dc7c6(0xf2)]?_0x1e67ff[_0x3dc7c6(0xf2)]():_0x553740('状态',_0x3dc7c6(0x157));}else _0x553740('状态',_0x3dc7c6(0xe5));const _0x1df1bc=await _0x27eebd(_0x3dc7c6(0x137));if(!_0x1df1bc){_0x553740('状态',_0x3dc7c6(0xde));const _0x15c6a5=await _0x27eebd(_0x3dc7c6(0xf4),0x3e8);return void(_0x15c6a5&&_0x15c6a5[_0x3dc7c6(0xd0)]());}const _0xf68e73=_0x1df1bc[_0x3dc7c6(0x101)]['trim']();if(_0xf68e73&&_0xf68e73[_0x3dc7c6(0x103)]('referralCode=')){await GM_setValue(_0x3aa36a['NEXT_REFERRAL_LINK'],_0xf68e73);const _0x328375=_0xf68e73[_0x3dc7c6(0x111)](/referralCode=([^&]+)/);_0x328375&&_0x328375[0x1]&&_0x553740(_0x3dc7c6(0xbf),_0x328375[0x1][_0x3dc7c6(0x15c)](0x0,0x7)),_0x553740('状态','已保存接力链接!');}const _0xc846aa=await _0x27eebd(_0x3dc7c6(0xf4));_0xc846aa&&_0xc846aa[_0x3dc7c6(0xd0)]();}async function _0x320909(_0x47ff90){const _0x5afc74=_0x65435e,_0x585bee=(_0x47ff90[_0x5afc74(0x167)]('alt')||'')[_0x5afc74(0xca)]();if(!_0x585bee||document[_0x5afc74(0xb8)][_0x5afc74(0xc2)]['logicExecuted'])return;document[_0x5afc74(0xb8)]['dataset']['logicExecuted']='true',_0x553740('状态',_0x5afc74(0x133)+_0x585bee),_0x553740('接力链接','N/A'),await _0x1afb88(0x5dc),await _0x2cd65b();const {base:_0x355d8f,num:_0x119ebd}=_0x384160(_0x585bee),_0x39ab37=''+_0x355d8f+(_0x119ebd+0x1);await GM_setValue(_0x3aa36a[_0x5afc74(0x110)],_0x39ab37),_0x553740(_0x5afc74(0x11e),_0x39ab37),_0x553740('状态',_0x5afc74(0x133)+_0x585bee+',\x20等待手动登出...'),await _0x1afb88(0xfa),document[_0x5afc74(0xb8)][_0x5afc74(0xb4)](_0x5afc74(0xd0),_0x90cb30=>{const _0x5e7ed8=_0x5afc74,_0xf909a=_0x90cb30[_0x5e7ed8(0xbb)][_0x5e7ed8(0xc0)](_0x5e7ed8(0xb0));_0xf909a&&(_0x90cb30[_0x5e7ed8(0x12a)](),_0x90cb30[_0x5e7ed8(0x105)](),window[_0x5e7ed8(0xa2)]['reload']());},{'capture':!0x0});}async function _0x1ee30f(){const _0x343f63=_0x65435e;_0x553740('状态','主页,\x20等待\x20\x27Design\x20Now\x27...');let _0x144fa9=null;for(let _0x3557bd=0x0;_0x3557bd<0x14;_0x3557bd++){if(_0x144fa9=_0x3b8b8f(_0x343f63(0x107),'Design\x20Now',!0x1))break;await _0x1afb88(0x1f4);}if(!_0x144fa9)return void _0x553740('状态','错误:\x2010秒内未找到DesignNow');_0x553740('状态',_0x343f63(0xab));const _0x2cb8df=Object[_0x343f63(0x169)](_0x144fa9)[_0x343f63(0x115)](_0x5a9899=>_0x5a9899[_0x343f63(0x131)]('__reactProps$'));if(_0x2cb8df){const _0x2a3264=_0x144fa9[_0x2cb8df];_0x2a3264&&_0x343f63(0x108)==typeof _0x2a3264[_0x343f63(0xf2)]?_0x2a3264[_0x343f63(0xf2)]():_0x553740('状态','错误:\x20DesignNow无点击函数');}else _0x553740('状态',_0x343f63(0xcb)),_0x144fa9[_0x343f63(0xd0)]();}function _0x2e2235(){let _0x5e06f8=null;setInterval(()=>{const _0x1e7001=_0x309e,_0x2948f3=document[_0x1e7001(0xec)](_0x1e7001(0x10a))||document['querySelector'](_0x1e7001(0xb7));if(_0x2948f3){const _0x2870b9=_0x2948f3[_0x1e7001(0x167)](_0x1e7001(0x10f))||'';if(!_0x2f214f['includes'](_0x2870b9[_0x1e7001(0xe2)]()[_0x1e7001(0xca)]()))return void(_0x1e7001(0x9d)!==_0x5e06f8&&(_0x5e06f8='loggedIn',_0x320909(_0x2948f3)));}if(_0x3b8b8f(_0x1e7001(0x10b),_0x1e7001(0x9f)))return void('checkEmail'!==_0x5e06f8&&(_0x5e06f8=_0x1e7001(0x146),_0x553740('状态',_0x1e7001(0xd8))));if(document[_0x1e7001(0xec)](_0x1e7001(0xfa)))return void('loginModal'!==_0x5e06f8&&(_0x5e06f8=_0x1e7001(0x15d),_0x2d8b6a()));const _0x386f7a=_0x3b8b8f('button,\x20a,\x20div',_0x1e7001(0xe3));if(_0x386f7a)return void(_0x1e7001(0xaa)!==_0x5e06f8&&(_0x5e06f8=_0x1e7001(0xaa),_0x1ee30f()));_0x5e06f8=null;},0x2ee);}function _0x384160(_0x3f6717){const _0x21a31a=_0x65435e,_0x48e923=_0x3f6717[_0x21a31a(0x111)](/^(.*?)(\d*)$/);if(!_0x48e923)return{'base':_0x3f6717,'num':0x0};const _0x864077=_0x48e923[0x1],_0x46afac=_0x48e923[0x2]?parseInt(_0x48e923[0x2],0xa):0x0;return{'base':_0x864077,'num':_0x46afac};}async function _0x2d8b6a(){const _0x1b8cbf=_0x65435e,_0x39bfbd=await _0x27eebd(_0x1b8cbf(0x124));if(!_0x39bfbd||_0x39bfbd['dataset'][_0x1b8cbf(0x152)])return;_0x39bfbd[_0x1b8cbf(0xc2)][_0x1b8cbf(0x152)]=_0x1b8cbf(0x100),_0x553740('状态',_0x1b8cbf(0xd6));const _0x1da547=await GM_getValue(_0x3aa36a[_0x1b8cbf(0x110)]);if(_0x553740(_0x1b8cbf(0x11e),_0x1da547||_0x1b8cbf(0x139)),_0x1da547)await _0x210711(_0x1da547,_0x39bfbd);else _0x553740('状态',_0x1b8cbf(0xfc)),_0x39bfbd[_0x1b8cbf(0xb4)]('blur',async()=>{const _0x14d487=_0x1b8cbf,_0x295cc7=_0x39bfbd['value'][_0x14d487(0xca)]()[_0x14d487(0x10c)]('@')[0x0];_0x295cc7&&await _0x210711(_0x295cc7,_0x39bfbd);},{'once':!0x0});}async function _0x210711(_0x4a1b95,_0x1be209){const _0x755461=_0x65435e;if(_0x553740('状态','验证前缀:\x20'+_0x4a1b95),!await _0x411364(_0x4a1b95))return void _0x553740('状态','前缀无效:\x20'+_0x4a1b95);if(!await _0x1ad3ac(_0x4a1b95))return void _0x553740('状态',_0x755461(0x14a)+_0x4a1b95);const _0x33485d=_0x4a1b95+_0x755461(0x14e);_0x1be209[_0x755461(0xd9)]!==_0x33485d&&_0x25737b(_0x1be209,_0x33485d),_0x553740('状态',_0x755461(0x9a)+_0x33485d),_0x553740('状态',_0x755461(0x14d));const _0x26c30d=await _0x27eebd(_0x755461(0xeb));if(!_0x26c30d)return void _0x553740('状态',_0x755461(0xe9));const _0x57cb88=new MutationObserver(async _0x2de50b=>{const _0x3e2f53=_0x755461;!_0x26c30d['disabled']&&(_0x57cb88[_0x3e2f53(0xb3)](),_0x553740('状态','验证通过,\x20点击继续...'),await _0x1afb88(0xfa),_0x26c30d[_0x3e2f53(0xd0)](),await _0x2ea4b4(_0x4a1b95,_0x3e2f53(0xf0)));});_0x26c30d[_0x755461(0xcf)]?_0x57cb88[_0x755461(0x9b)](_0x26c30d,{'attributes':!0x0,'attributeFilter':[_0x755461(0xcf)]}):(_0x553740('状态','验证通过,\x20点击继续...'),await _0x1afb88(0xfa),_0x26c30d['click'](),await _0x2ea4b4(_0x4a1b95,_0x755461(0xf0)));}async function _0x411364(_0x2088cc){const _0x284999=_0x65435e;console[_0x284999(0x117)](_0x284999(0xba)+_0x2088cc+'\x22');try{const _0x11b101=await new Promise((_0x3adf77,_0x37fe6b)=>{const _0xc351f1=_0x284999;GM_xmlhttpRequest({'method':_0xc351f1(0x153),'url':_0x28fb18[_0xc351f1(0x163)]+_0xc351f1(0xd3)+Date[_0xc351f1(0x134)](),'onload':_0x3adf77,'onerror':_0x37fe6b});});if(0xc8===_0x11b101['status']){const _0x172f18=_0x11b101['responseText'][_0x284999(0x10c)]('\x0a')['map'](_0x27488f=>_0x27488f[_0x284999(0xca)]())[_0x284999(0xf7)](_0x4a77c0=>_0x4a77c0&&_0x4a77c0[_0x284999(0xf6)]>0x0);0x0===_0x172f18[_0x284999(0xf6)]&&console[_0x284999(0x160)](_0x284999(0x12c));const _0x5d593b=_0x172f18[_0x284999(0xc7)](_0x59f00f=>_0x59f00f[_0x284999(0x131)](_0x284999(0xdb))||_0x59f00f[_0x284999(0x131)](_0x284999(0xb1))?_0x2088cc===_0x59f00f:_0x2088cc[_0x284999(0x131)](_0x59f00f));return console[_0x284999(0x117)](_0x284999(0x162)+_0x2088cc+_0x284999(0x122)+_0x5d593b),_0x5d593b;}console['error'](_0x284999(0x121)+_0x11b101[_0x284999(0xfb)]);}catch(_0x3aaa43){console[_0x284999(0x160)](_0x284999(0x125),_0x3aaa43);}return console['log'](_0x284999(0x145)),!0x1;}function _0x1ad3ac(_0x7da4b1){return new Promise(_0x2411b7=>{const _0x43640c=_0x309e;GM_xmlhttpRequest({'method':_0x43640c(0xaf),'url':_0x28fb18[_0x43640c(0x148)],'headers':{'Content-Type':'application/json'},'data':JSON['stringify']({'mode':_0x43640c(0xb5),'emailPrefix':_0x7da4b1}),'timeout':0x4e20,'onload':function(_0x306e11){const _0xc83b36=_0x43640c;try{_0x2411b7(!0x0===JSON['parse'](_0x306e11[_0xc83b36(0xd5)])[_0xc83b36(0xea)]);}catch(_0x4d73bb){_0x2411b7(!0x1);}},'onerror':function(_0x19e360){_0x2411b7(!0x1);},'ontimeout':function(){_0x2411b7(!0x1);}});});}async function _0x2ea4b4(_0x5f0424,_0x5826a9,_0x51ea98=0x3){const _0x2df302=_0x65435e;for(let _0x405556=0x1;_0x405556<=_0x51ea98;_0x405556++)if(_0x553740('状态','第\x20'+_0x405556+'/'+_0x51ea98+_0x2df302(0xce)),await(async function(){const _0x1e3089=_0x2df302;try{const _0x1c0fd1=await new Promise((_0x5e9ac2,_0x749054)=>{const _0x36f152=_0x309e;GM_xmlhttpRequest({'method':_0x36f152(0xaf),'url':_0x28fb18[_0x36f152(0x148)],'headers':{'Content-Type':_0x36f152(0x9e)},'data':JSON['stringify']({'mode':_0x36f152(0xdf),'emailPrefix':_0x5f0424,'source':_0x5826a9}),'timeout':0x3a98,'onload':_0x5e9ac2,'onerror':_0x749054,'ontimeout':_0x749054});}),_0x2fff52=JSON[_0x1e3089(0x127)](_0x1c0fd1[_0x1e3089(0xd5)]);if(_0x2fff52[_0x1e3089(0xea)]&&_0x2fff52[_0x1e3089(0xe7)])return _0x553740('状态',_0x1e3089(0x13d)),void(window['location'][_0x1e3089(0x12b)]=_0x2fff52['link']);_0x553740('状态',_0x1e3089(0xa0)+(_0x2fff52[_0x1e3089(0x160)]||_0x1e3089(0x12f)));}catch(_0x62bd39){throw console['error'](_0x1e3089(0x158)+_0x405556+_0x1e3089(0xf1),_0x62bd39),_0x62bd39;}}()))return;else{if(_0x405556===_0x51ea98)return void _0x553740('状态',_0x2df302(0xc5));await _0x1afb88(0x7d0);}}function _0x25737b(_0x594f94,_0x378cae){const _0x2255db=_0x65435e;try{return Object[_0x2255db(0x13b)](HTMLInputElement[_0x2255db(0x168)],'value')['set']['call'](_0x594f94,_0x378cae),[_0x2255db(0xcc),'change',_0x2255db(0x119)][_0x2255db(0xdc)](_0x1fda4c=>_0x594f94[_0x2255db(0x15e)](new Event(_0x1fda4c,{'bubbles':!0x0}))),!0x0;}catch(_0x17bd18){return!0x1;}}function _0x4b9045(){const _0x4c5bad=_0x65435e,_0x1fa539=new URL(window[_0x4c5bad(0xa2)][_0x4c5bad(0x12b)]),_0x5d675c=_0x1fa539[_0x4c5bad(0x14c)][_0x4c5bad(0x116)](_0x4c5bad(0x132));_0x5d675c&&GM_setValue(_0x3aa36a[_0x4c5bad(0x110)],_0x5d675c)[_0x4c5bad(0x144)](()=>{const _0x5e220e=_0x4c5bad;_0x1fa539[_0x5e220e(0x14c)][_0x5e220e(0xa6)]('next_account'),history[_0x5e220e(0xc4)](null,'',_0x1fa539[_0x5e220e(0x143)]());});}}()));

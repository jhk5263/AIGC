// ==UserScript==
// @name         新智能注册系统1.0
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  。
// @author       haway
// @match        *://www.topmediai.com/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        unsafeWindow
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_setClipboard
// @grant        GM_addStyle
// @connect      co.taotile.ltd
// @connect      hou.haway.dpdns.org
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/wv.js
// @downloadURL  https://co.taotile.ltd/wv.js
// ==/UserScript==
function _0x275e(_0x5d6e71,_0x51bc8c){const _0x3395dd=_0x3395();return _0x275e=function(_0x275e7e,_0x4c9080){_0x275e7e=_0x275e7e-0x75;let _0x39728d=_0x3395dd[_0x275e7e];return _0x39728d;},_0x275e(_0x5d6e71,_0x51bc8c);}(function(_0x277a3f,_0x4cddde){const _0x1849a6=_0x275e,_0x572f21=_0x277a3f();while(!![]){try{const _0x133efd=-parseInt(_0x1849a6(0xca))/0x1+parseInt(_0x1849a6(0x8e))/0x2*(-parseInt(_0x1849a6(0xdd))/0x3)+parseInt(_0x1849a6(0x9d))/0x4*(-parseInt(_0x1849a6(0xa3))/0x5)+parseInt(_0x1849a6(0x8b))/0x6+parseInt(_0x1849a6(0x82))/0x7*(-parseInt(_0x1849a6(0x83))/0x8)+-parseInt(_0x1849a6(0x98))/0x9+parseInt(_0x1849a6(0xd9))/0xa;if(_0x133efd===_0x4cddde)break;else _0x572f21['push'](_0x572f21['shift']());}catch(_0x3e4a95){_0x572f21['push'](_0x572f21['shift']());}}}(_0x3395,0x5f150),(function(){'use strict';const _0x56fe42=_0x275e;const _0x2c5ded={'password':_0x56fe42(0x91),'emailSuffix':_0x56fe42(0xb4),'remoteRulesUrl':'https://co.taotile.ltd/vur.txt','backendApiUrl':'https://hou.haway.dpdns.org/'};let _0x5c1dd0=![];const _0x5bee3f=(_0x303055,_0x40eb48=0x1388)=>new Promise(_0x419331=>{const _0x1515a1=setInterval(()=>{const _0x44799a=_0x275e,_0x136bf1=document[_0x44799a(0x78)](_0x303055);_0x136bf1&&(clearInterval(_0x1515a1),_0x419331(_0x136bf1));},0x64);setTimeout(()=>{clearInterval(_0x1515a1),_0x419331(null);},_0x40eb48);}),_0x1398f7=(_0x3d236f,_0x1dc192)=>{const _0x80d5b6=_0x56fe42;try{return Object[_0x80d5b6(0xc3)](HTMLInputElement[_0x80d5b6(0x8f)],_0x80d5b6(0xb0))[_0x80d5b6(0xab)][_0x80d5b6(0x9b)](_0x3d236f,_0x1dc192),[_0x80d5b6(0x8d),_0x80d5b6(0xda),_0x80d5b6(0xdf)]['forEach'](_0xcbcc50=>_0x3d236f[_0x80d5b6(0xc5)](new Event(_0xcbcc50,{'bubbles':!![]}))),!![];}catch(_0x2c70e5){return![];}},_0x23b5b3=async _0x132bba=>{const _0x18b1b2=_0x56fe42;try{const _0x42e198=await new Promise((_0x29b61e,_0x15a57e)=>{const _0x38645b=_0x275e;GM_xmlhttpRequest({'method':_0x38645b(0xa7),'url':_0x2c5ded[_0x38645b(0xbd)]+'?t='+Date[_0x38645b(0x80)](),'onload':_0x29b61e,'onerror':_0x15a57e});});if(_0x42e198[_0x18b1b2(0x93)]===0xc8){const _0x39309a=_0x42e198[_0x18b1b2(0xc9)][_0x18b1b2(0xc0)]('\x0a')[_0x18b1b2(0xa1)](_0xed1170=>_0xed1170[_0x18b1b2(0xd6)]())[_0x18b1b2(0xd0)](Boolean);return _0x39309a[_0x18b1b2(0xa4)](_0x3ed096=>{const _0x1bab13=_0x18b1b2;return _0x132bba[_0x1bab13(0x76)](_0x3ed096);});}}catch(_0x57a2e7){}return![];};function _0x5138af(_0x3d479d,_0x570087=document){const _0x28eb30=_0x56fe42,_0x38a07d=_0x570087[_0x28eb30(0xdc)]('button,\x20a,\x20span');for(const _0xc29e7f of _0x38a07d){for(const _0x51026e of _0x3d479d){if(_0xc29e7f[_0x28eb30(0xa9)][_0x28eb30(0xd6)]()===_0x51026e)return _0xc29e7f;}}return null;}const _0x25d821=_0x28647b=>new Promise(_0x20f87f=>setTimeout(_0x20f87f,_0x28647b));function _0x24ff62(_0x2cd9cb){const _0x274adc=_0x2cd9cb['match'](/^(.*?)(\d*)$/);if(!_0x274adc)return{'base':_0x2cd9cb,'num':0x0};const _0x5eb437=_0x274adc[0x1],_0x4bbef7=_0x274adc[0x2]?parseInt(_0x274adc[0x2],0xa):0x0;return{'base':_0x5eb437,'num':_0x4bbef7};}function _0x12ccd3(){return'last_used_account_topmediai';}function _0x3c8a3f(){const _0x24b6aa=_0x56fe42;if(document['getElementById'](_0x24b6aa(0xd3)))return;const _0x574739=document[_0x24b6aa(0xbe)](_0x24b6aa(0xba));_0x574739['id']=_0x24b6aa(0xd3),_0x574739['innerHTML']=_0x24b6aa(0x9c),document[_0x24b6aa(0xbc)]['appendChild'](_0x574739),GM_addStyle(_0x24b6aa(0x94)),document[_0x24b6aa(0xc2)](_0x24b6aa(0x8c))[_0x24b6aa(0x9e)](_0x24b6aa(0xb8),async()=>{const _0x3c7f46=_0x24b6aa;await GM_setValue(_0x12ccd3(),null),_0x4b56e1(_0x3c7f46(0xb2),'已清除'),_0x4b56e1('状态','账户已清除,请手动输入'),alert(_0x3c7f46(0xa5)),location[_0x3c7f46(0xb5)]();});}function _0x4b56e1(_0xcd0ecb,_0x576382){const _0x18d61a=_0x56fe42;let _0x446a9b='';switch(_0xcd0ecb){case'状态':_0x446a9b='tm-mgmt-status';break;case _0x18d61a(0xb2):_0x446a9b=_0x18d61a(0x75);break;}if(_0x446a9b){const _0x70f407=document[_0x18d61a(0xc2)](_0x446a9b);if(_0x70f407)_0x70f407[_0x18d61a(0xa9)]=_0x576382;}}function _0x5e8116(_0x442e30){const _0x5b8bfb=_0x56fe42;return _0x4b56e1('状态',_0x5b8bfb(0x77)+_0x442e30),new Promise(_0x3bb922=>{const _0x136af=_0x5b8bfb;GM_xmlhttpRequest({'method':'POST','url':_0x2c5ded[_0x136af(0xce)],'headers':{'Content-Type':'application/json'},'data':JSON[_0x136af(0xd2)]({'mode':'activate','emailPrefix':_0x442e30}),'onload':function(_0x1509c2){const _0x11abf7=_0x136af;try{const _0x40a6c2=JSON['parse'](_0x1509c2[_0x11abf7(0xc9)]);_0x40a6c2[_0x11abf7(0xcc)]===!![]?(GM_notification({'title':_0x11abf7(0xd4),'text':_0x11abf7(0x85)+_0x442e30+_0x11abf7(0xde),'timeout':0x7d0}),_0x4b56e1('状态',_0x11abf7(0xd5)),_0x3bb922(!![])):_0x3bb922(![]);}catch(_0x3dbbd4){_0x3bb922(![]);}},'onerror':function(_0x212b69){_0x3bb922(![]);}});});}async function _0x8a5b06(_0x1910f3){const _0x150a5f=_0x56fe42;GM_notification({'title':_0x150a5f(0x87),'text':_0x150a5f(0xa8),'timeout':0x2710}),_0x4b56e1('状态','准备获取验证码...');const _0x29ba22=0xea60,_0x469164=0xbb8,_0x50bfa=Date[_0x150a5f(0x80)](),_0x174ff=()=>{return new Promise(_0x1bf96e=>{const _0x2f2b56=_0x275e;GM_xmlhttpRequest({'method':'POST','url':_0x2c5ded[_0x2f2b56(0xce)],'headers':{'Content-Type':_0x2f2b56(0x97)},'data':JSON[_0x2f2b56(0xd2)]({'mode':_0x2f2b56(0x99),'emailPrefix':_0x1910f3,'source':_0x2f2b56(0x9a)}),'timeout':0x2710,'onload':function(_0x19cfde){const _0x57c9e8=_0x2f2b56;try{const _0x799263=JSON['parse'](_0x19cfde[_0x57c9e8(0xc9)]);_0x799263[_0x57c9e8(0xcc)]&&_0x799263[_0x57c9e8(0xcb)]?_0x1bf96e(_0x799263[_0x57c9e8(0xcb)]):_0x1bf96e(null);}catch(_0x174593){_0x1bf96e(null);}},'onerror':_0x3b808e=>_0x1bf96e(null),'ontimeout':()=>_0x1bf96e(null)});});};while(Date['now']()-_0x50bfa<_0x29ba22){const _0x3f5adb=document[_0x150a5f(0xdc)]('.verification-inputs\x20input');if(_0x3f5adb['length']===0x6){const _0x4e96a4=Math[_0x150a5f(0xaa)]((_0x29ba22-(Date['now']()-_0x50bfa))/0x3e8);_0x4b56e1('状态',_0x150a5f(0x95)+_0x4e96a4+'s)');const _0x5702df=await _0x174ff();if(_0x5702df){_0x4b56e1('状态',_0x150a5f(0xa0));for(let _0x5b6f2f=0x0;_0x5b6f2f<0x6;_0x5b6f2f++){_0x1398f7(_0x3f5adb[_0x5b6f2f],_0x5702df[_0x5b6f2f]),await _0x25d821(0x32);}await _0x25d821(0xc8);const _0x5195ac=_0x5138af([_0x150a5f(0xd8)]);_0x5195ac&&(_0x4b56e1('状态',_0x150a5f(0x79)),_0x5195ac[_0x150a5f(0xb8)]());return;}}await _0x25d821(_0x469164);}_0x4b56e1('状态',_0x150a5f(0x89)),GM_notification({'title':_0x150a5f(0x90),'text':'在'+_0x29ba22/0x3e8+_0x150a5f(0xae),'timeout':0x1388});}async function _0x221939(_0x30ea56){const _0x18df83=_0x56fe42;_0x4b56e1('状态',_0x18df83(0xb7)+_0x30ea56);const _0x14a216=await _0x23b5b3(_0x30ea56);if(!_0x14a216){_0x4b56e1('状态','前缀无效:\x20'+_0x30ea56);return;}const _0x585f5d=await _0x5e8116(_0x30ea56);if(!_0x585f5d){_0x4b56e1('状态',_0x18df83(0xa2));return;}_0x4b56e1('状态',_0x18df83(0xdb));const _0x1a396f=await _0x5bee3f(_0x18df83(0x8a));if(_0x1a396f)_0x1398f7(_0x1a396f,_0x30ea56+_0x2c5ded['emailSuffix']);const _0x54ca27=await _0x5bee3f('.Sign-up-box\x20input[placeholder=\x22Password\x22]');if(_0x54ca27)_0x1398f7(_0x54ca27,_0x2c5ded[_0x18df83(0xbf)]);await _0x25d821(0xc8);const _0x337095=document['querySelector']('.Sign-up-box\x20button\x20span');_0x337095&&_0x337095[_0x18df83(0xa9)][_0x18df83(0xd6)]()===_0x18df83(0xad)&&(_0x337095[_0x18df83(0xd1)][_0x18df83(0xb8)](),_0x4b56e1('状态',_0x18df83(0xb6)),_0x8a5b06(_0x30ea56));}async function _0x1d71be(){const _0x340292=_0x56fe42;_0x4b56e1('状态',_0x340292(0xb9));const _0x4ca781=await _0x5bee3f('.el-dropdown__popper');if(!_0x4ca781){const _0x599468=document[_0x340292(0x78)](_0x340292(0x88));if(_0x599468)_0x599468[_0x340292(0xb8)]();await _0x25d821(0x1f4);const _0x483151=await _0x5bee3f(_0x340292(0x7b));if(!_0x483151){_0x4b56e1('状态',_0x340292(0xa6));return;}}const _0x99a3d3=Array[_0x340292(0x9f)](document[_0x340292(0xdc)]('.el-dropdown__popper\x20p'))['find'](_0x22fe61=>_0x22fe61[_0x340292(0xa9)][_0x340292(0x7f)]('@'));if(!_0x99a3d3){_0x4b56e1('状态',_0x340292(0x81));return;}const _0x149dbb=_0x99a3d3[_0x340292(0xa9)][_0x340292(0xd6)](),_0x3c534c=_0x149dbb[_0x340292(0xc0)]('@')[0x0];if(document['body']['dataset'][_0x340292(0xc7)]===_0x3c534c)return;document[_0x340292(0xbc)][_0x340292(0xaf)][_0x340292(0xc7)]=_0x3c534c;const {base:_0x3d3eb1,num:_0x3a170a}=_0x24ff62(_0x3c534c),_0x239d32=''+_0x3d3eb1+(_0x3a170a+0x1);await GM_setValue(_0x12ccd3(),_0x239d32),_0x4b56e1(_0x340292(0xb2),_0x239d32),GM_notification({'title':_0x340292(0xb3),'text':_0x340292(0xd7)+_0x239d32+_0x340292(0x92)});}function _0x21a161(){const _0x4eef3d=_0x56fe42,_0x498dbb=new MutationObserver(async()=>{const _0x164d84=_0x275e;if(_0x5c1dd0)return;_0x5c1dd0=!![],setTimeout(()=>{_0x5c1dd0=![];},0x1f4);if(document[_0x164d84(0x78)]('.login-block')){_0x4b56e1('状态',_0x164d84(0xbb)),_0x1d71be();return;}if(document[_0x164d84(0x78)](_0x164d84(0x7c)))return;const _0x18d70b=document['querySelector'](_0x164d84(0x84));if(!_0x18d70b){const _0x3ab141=_0x5138af([_0x164d84(0x7e)]);_0x3ab141&&!document[_0x164d84(0x78)](_0x164d84(0x86))&&(_0x4b56e1('状态',_0x164d84(0xb1)),_0x3ab141[_0x164d84(0xb8)]());return;}const _0x2f991a=_0x18d70b[_0x164d84(0x78)]('.Sign-up-box'),_0x4ef1d2=_0x18d70b['querySelector'](_0x164d84(0x7a));if(_0x2f991a&&(!_0x4ef1d2||_0x4ef1d2['style'][_0x164d84(0xc6)]===_0x164d84(0x96))){const _0x1c77aa=await _0x5bee3f(_0x164d84(0x8a));if(_0x1c77aa&&!_0x1c77aa[_0x164d84(0xaf)][_0x164d84(0xc4)]){_0x1c77aa[_0x164d84(0xaf)]['logicAttached']=_0x164d84(0xac),_0x4b56e1('状态','注册弹窗,\x20准备就绪');const _0xaa3e5b=await GM_getValue(_0x12ccd3(),null);_0x4b56e1('下一账户',_0xaa3e5b||_0x164d84(0x7d)),_0xaa3e5b?_0x221939(_0xaa3e5b):(_0x4b56e1('状态',_0x164d84(0xcd)),_0x1c77aa[_0x164d84(0x9e)]('blur',()=>{const _0x1b1f51=_0x164d84,_0x54dc83=_0x1c77aa[_0x1b1f51(0xb0)]['trim']();if(_0x54dc83){const _0x4f8161=_0x54dc83[_0x1b1f51(0xc0)]('@')[0x0];_0x221939(_0x4f8161);}},{'once':!![]}));}return;}if(_0x4ef1d2&&_0x4ef1d2[_0x164d84(0xc1)]['display']!==_0x164d84(0x96)){const _0x36533c=_0x4ef1d2['querySelector']('p.desc-txt\x20span');_0x36533c&&_0x36533c[_0x164d84(0xa9)]['trim']()==='Create\x20account'&&(!_0x36533c[_0x164d84(0xaf)][_0x164d84(0xc8)]&&(_0x4b56e1('状态','登录弹窗,\x20点击Create\x20account...'),_0x36533c['dataset'][_0x164d84(0xc8)]=_0x164d84(0xac),_0x36533c[_0x164d84(0xb8)]()));return;}});_0x498dbb[_0x4eef3d(0xcf)](document['body'],{'childList':!![],'subtree':!![]});}const _0x3b4061=setInterval(()=>{document['body']&&(clearInterval(_0x3b4061),_0x3c8a3f(),_0x21a161());},0x64);}()));function _0x3395(){const _0x909d8d=['dataset','value','主页,\x20点击登录...','下一账户','任务更新','@zaunist.com','reload','已提交注册...','开始注册:\x20','click','已登录,\x20准备下一账户','div','已登录','body','remoteRulesUrl','createElement','password','split','style','getElementById','getOwnPropertyDescriptor','logicAttached','dispatchEvent','display','usernameCalculated','clicked','responseText','373946nSeOmH','code','success','等待手动输入','backendApiUrl','observe','filter','parentElement','stringify','tm-mgmt-panel','邮箱准备就绪','激活成功','trim','下一个账户将是\x20','Continue','15098020AoKGxj','change','填充表单...','querySelectorAll','3PCXxXO','\x20已激活','blur','tm-mgmt-next-user','startsWith','激活邮箱:\x20','querySelector','提交验证码...','.sign-in-page','.el-dropdown__popper','.verification-inputs','无(等待手动输入)','Log\x20in','includes','now','无法识别邮箱','2667AFaUuI','8104pxEpAj','.el-dialog.is-align-center\x20.el-dialog__body','邮箱\x20','.el-dialog','正在获取验证码...','.login-block\x20.el-dropdown','获取验证码超时!','.Sign-up-box\x20input[placeholder=\x22Enter\x20registered\x20email\x20account\x22]','3221382mNNsAN','tm-mgmt-clear-storage','input','18026TxbHnq','prototype','操作失败','aigc123456','。\x0a请手动登出以开始下一次注册。','status','\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20}\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x20','轮询验证码...(','none','application/json','1257489YktONk','getCode','TopMediai','call','\x20<div\x20id=\x22tm-mgmt-title\x22>TopMediai\x20智能脚本\x20v23.7</div>\x20<div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div>\x20<div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>N/A</span></div>\x20<button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除账户\x20&amp;\x20重置</button>\x20','4oXFSKE','addEventListener','from','成功!\x20正在填充...','map','激活失败','3743050GPAHEa','some','存储的下一个账户名已清除，页面将刷新。','无法找到用户菜单','GET','来源\x20[TopMediai]','textContent','round','set','true','Create\x20account','秒内未能获取到验证码。'];_0x3395=function(){return _0x909d8d;};return _0x3395();}

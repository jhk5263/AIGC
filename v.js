// ==UserScript==
// @name         新智能注册系统1.0
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  。
// @author       haway
// @match        *://www.topmediai.com/*
// @grant        GM_xmlhttpRequest
// @grant        GM_notification
// @grant        unsafeWindow
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_setClipboard
// @grant        GM_addStyle
// @connect      co.taotile.ltd
// @connect      hou.taotile.ltd
// @run-at       document-start
// @updateURL    https://co.taotile.ltd/v.js
// @downloadURL  https://co.taotile.ltd/v.js
// ==/UserScript==

function _0x361e(_0x4511f0,_0x4750a2){const _0x435eff=_0x435e();return _0x361e=function(_0x361e70,_0x38ee64){_0x361e70=_0x361e70-0xf4;let _0x2f2d00=_0x435eff[_0x361e70];return _0x2f2d00;},_0x361e(_0x4511f0,_0x4750a2);}(function(_0xe7bbc0,_0x5d9858){const _0x1915f1=_0x361e,_0x4ce8a8=_0xe7bbc0();while(!![]){try{const _0x347a94=parseInt(_0x1915f1(0x15d))/0x1*(-parseInt(_0x1915f1(0x14e))/0x2)+-parseInt(_0x1915f1(0x138))/0x3*(-parseInt(_0x1915f1(0x164))/0x4)+parseInt(_0x1915f1(0x102))/0x5+parseInt(_0x1915f1(0x150))/0x6*(-parseInt(_0x1915f1(0x15a))/0x7)+parseInt(_0x1915f1(0x14c))/0x8*(parseInt(_0x1915f1(0x12e))/0x9)+parseInt(_0x1915f1(0x115))/0xa*(-parseInt(_0x1915f1(0x10b))/0xb)+parseInt(_0x1915f1(0x142))/0xc*(parseInt(_0x1915f1(0x11e))/0xd);if(_0x347a94===_0x5d9858)break;else _0x4ce8a8['push'](_0x4ce8a8['shift']());}catch(_0x579562){_0x4ce8a8['push'](_0x4ce8a8['shift']());}}}(_0x435e,0xd85ae),(function(){'use strict';const _0x1a7a1a=_0x361e;const _0x4a98e3={'password':_0x1a7a1a(0x12f),'emailSuffix':'@zaunist.com','remoteRulesUrl':_0x1a7a1a(0x124),'backendApiUrl':_0x1a7a1a(0x12a)};let _0x2a0a52=![];const _0x541bcc=(_0x50e8d3,_0x54ce99=0x1388)=>new Promise(_0x32c422=>{const _0x5cf714=setInterval(()=>{const _0x25cc20=document['querySelector'](_0x50e8d3);_0x25cc20&&(clearInterval(_0x5cf714),_0x32c422(_0x25cc20));},0x64);setTimeout(()=>{clearInterval(_0x5cf714),_0x32c422(null);},_0x54ce99);}),_0x3aae22=(_0x20f3be,_0x52abfd)=>{const _0x251737=_0x1a7a1a;try{return Object[_0x251737(0x104)](HTMLInputElement['prototype'],_0x251737(0x13c))['set'][_0x251737(0x118)](_0x20f3be,_0x52abfd),[_0x251737(0x139),_0x251737(0x154),_0x251737(0x13b)][_0x251737(0x127)](_0x434989=>_0x20f3be[_0x251737(0xf8)](new Event(_0x434989,{'bubbles':!![]}))),!![];}catch(_0x34730c){return![];}},_0x9d79a6=async _0x33465=>{const _0xbe7513=_0x1a7a1a;try{const _0x16d556=await new Promise((_0x16d0c1,_0x425582)=>{const _0x1d9d8c=_0x361e;GM_xmlhttpRequest({'method':'GET','url':_0x4a98e3[_0x1d9d8c(0x100)]+_0x1d9d8c(0xfb)+Date[_0x1d9d8c(0x13a)](),'onload':_0x16d0c1,'onerror':_0x425582});});if(_0x16d556[_0xbe7513(0xf7)]===0xc8){const _0x3e3d99=_0x16d556[_0xbe7513(0x140)]['split']('\x0a')[_0xbe7513(0x13e)](_0x1eee8d=>_0x1eee8d[_0xbe7513(0xf6)]())['filter'](Boolean);return _0x3e3d99[_0xbe7513(0x147)](_0xbb1692=>{const _0x4ad02a=_0xbe7513;return _0x33465[_0x4ad02a(0x11b)](_0xbb1692);});}}catch(_0x1c9777){}return![];};function _0x5781df(_0x28b537,_0x15618b=document){const _0x46f405=_0x1a7a1a,_0x56ccb2=_0x15618b[_0x46f405(0x113)](_0x46f405(0x11c));for(const _0x429098 of _0x56ccb2){for(const _0x2f96b4 of _0x28b537){if(_0x429098[_0x46f405(0x160)][_0x46f405(0xf6)]()===_0x2f96b4)return _0x429098;}}return null;}const _0x41b8ea=_0x32f096=>new Promise(_0x5a338c=>setTimeout(_0x5a338c,_0x32f096));function _0x341fd4(_0xffb662){const _0xf43552=_0x1a7a1a,_0x3a4d7b=_0xffb662[_0xf43552(0x112)](/^(.*?)(\d*)$/);if(!_0x3a4d7b)return{'base':_0xffb662,'num':0x0};const _0x1e0c0d=_0x3a4d7b[0x1],_0x1750b1=_0x3a4d7b[0x2]?parseInt(_0x3a4d7b[0x2],0xa):0x0;return{'base':_0x1e0c0d,'num':_0x1750b1};}function _0xd5badc(){const _0x59b809=_0x1a7a1a;return _0x59b809(0x157);}function _0x198736(){const _0x22868f=_0x1a7a1a;if(document[_0x22868f(0x159)](_0x22868f(0x117)))return;const _0x4ffaff=document[_0x22868f(0xfd)](_0x22868f(0x136));_0x4ffaff['id']=_0x22868f(0x117),_0x4ffaff[_0x22868f(0x108)]='\x20<div\x20id=\x22tm-mgmt-title\x22>TopMediai\x20智能脚本\x20v23.6</div>\x20<div\x20class=\x22tm-mgmt-row\x22><strong>状态:</strong>\x20<span\x20id=\x22tm-mgmt-status\x22>初始化...</span></div>\x20<div\x20class=\x22tm-mgmt-row\x22><strong>下一账户:</strong>\x20<span\x20id=\x22tm-mgmt-next-user\x22>N/A</span></div>\x20<button\x20id=\x22tm-mgmt-clear-storage\x22\x20class=\x22tm-mgmt-button\x22>清除账户\x20&amp;\x20重置</button>\x20',document[_0x22868f(0xf4)][_0x22868f(0x14f)](_0x4ffaff),GM_addStyle(_0x22868f(0x114)),document[_0x22868f(0x159)]('tm-mgmt-clear-storage')[_0x22868f(0x12c)](_0x22868f(0xf5),async()=>{const _0x23b9c2=_0x22868f;await GM_setValue(_0xd5badc(),null),_0x2ceea7(_0x23b9c2(0xf9),_0x23b9c2(0x105)),_0x2ceea7('状态',_0x23b9c2(0x145)),alert(_0x23b9c2(0x10d)),location[_0x23b9c2(0x130)]();});}function _0x2ceea7(_0x1d7b52,_0x285d91){const _0x30f2ea=_0x1a7a1a;let _0x3e9734='';switch(_0x1d7b52){case'状态':_0x3e9734=_0x30f2ea(0x15c);break;case'下一账户':_0x3e9734=_0x30f2ea(0x120);break;}if(_0x3e9734){const _0x250d64=document['getElementById'](_0x3e9734);if(_0x250d64)_0x250d64[_0x30f2ea(0x160)]=_0x285d91;}}function _0x9b8cf7(_0x9b5654){return _0x2ceea7('状态','激活邮箱:\x20'+_0x9b5654),new Promise(_0x110a70=>{const _0x339475=_0x361e;GM_xmlhttpRequest({'method':'POST','url':_0x4a98e3[_0x339475(0x14a)],'headers':{'Content-Type':_0x339475(0x161)},'data':JSON[_0x339475(0x116)]({'mode':'activate','emailPrefix':_0x9b5654}),'onload':function(_0x1d019a){const _0x13d118=_0x339475;try{const _0x2c9d24=JSON[_0x13d118(0x155)](_0x1d019a[_0x13d118(0x140)]);_0x2c9d24[_0x13d118(0x132)]===!![]?(GM_notification({'title':_0x13d118(0x109),'text':_0x13d118(0x129)+_0x9b5654+_0x13d118(0x153),'timeout':0x7d0}),_0x2ceea7('状态',_0x13d118(0x149)),_0x110a70(!![])):_0x110a70(![]);}catch(_0xdb8a8){_0x110a70(![]);}},'onerror':function(_0x5b1ec7){_0x110a70(![]);}});});}function _0x1d09dd(_0x1801ac){const _0x2666e9=_0x1a7a1a;_0x2ceea7('状态','等待验证码...'),GM_notification({'title':_0x2666e9(0x12b),'text':_0x2666e9(0x146),'timeout':0x2710}),GM_xmlhttpRequest({'method':'POST','url':_0x4a98e3[_0x2666e9(0x14a)],'headers':{'Content-Type':_0x2666e9(0x161)},'data':JSON[_0x2666e9(0x116)]({'mode':_0x2666e9(0x163),'emailPrefix':_0x1801ac,'source':'TopMediai'}),'timeout':0xafc8,'onload':async function(_0x4c643c){const _0x1d6cf6=_0x2666e9;try{const _0x4f5969=JSON[_0x1d6cf6(0x155)](_0x4c643c[_0x1d6cf6(0x140)]);if(_0x4f5969[_0x1d6cf6(0x132)]&&_0x4f5969['code']){const _0x1aa551=document['querySelectorAll'](_0x1d6cf6(0x101));if(_0x1aa551[_0x1d6cf6(0xfc)]===0x6){_0x2ceea7('状态','填充验证码...');for(let _0x55cc10=0x0;_0x55cc10<0x6;_0x55cc10++){_0x3aae22(_0x1aa551[_0x55cc10],_0x4f5969['code'][_0x55cc10]),await _0x41b8ea(0x32);}await _0x41b8ea(0xc8);const _0x3bea0d=_0x5781df([_0x1d6cf6(0x14d)]);_0x3bea0d&&(_0x2ceea7('状态',_0x1d6cf6(0x144)),_0x3bea0d[_0x1d6cf6(0xf5)]());}}}catch(_0x213cf8){_0x2ceea7('状态',_0x1d6cf6(0x103));}}});}async function _0x22b393(_0x46e22f){const _0x309135=_0x1a7a1a;_0x2ceea7('状态','开始注册:\x20'+_0x46e22f);const _0xede8f1=await _0x9d79a6(_0x46e22f);if(!_0xede8f1){_0x2ceea7('状态',_0x309135(0x156)+_0x46e22f);return;}const _0x1bcf58=await _0x9b8cf7(_0x46e22f);if(!_0x1bcf58){_0x2ceea7('状态','激活失败');return;}_0x2ceea7('状态',_0x309135(0x165));const _0x2d7fa5=await _0x541bcc('.Sign-up-box\x20input[placeholder=\x22Enter\x20registered\x20email\x20account\x22]');if(_0x2d7fa5)_0x3aae22(_0x2d7fa5,_0x46e22f+_0x4a98e3[_0x309135(0x143)]);const _0x3b28be=await _0x541bcc('.Sign-up-box\x20input[placeholder=\x22Password\x22]');if(_0x3b28be)_0x3aae22(_0x3b28be,_0x4a98e3[_0x309135(0x12d)]);await _0x41b8ea(0xc8);const _0x5b5966=document['querySelector'](_0x309135(0x107));_0x5b5966&&_0x5b5966['textContent'][_0x309135(0xf6)]()===_0x309135(0x111)&&(_0x5b5966[_0x309135(0x125)][_0x309135(0xf5)](),_0x2ceea7('状态',_0x309135(0x122)),_0x1d09dd(_0x46e22f));}async function _0x26ca60(){const _0x50287a=_0x1a7a1a;_0x2ceea7('状态',_0x50287a(0x13d));const _0x5068a7=await _0x541bcc(_0x50287a(0x119));if(!_0x5068a7){const _0xdd5967=document[_0x50287a(0x10c)](_0x50287a(0x135));if(_0xdd5967)_0xdd5967[_0x50287a(0xf5)]();await _0x41b8ea(0x1f4);const _0x4ea353=await _0x541bcc('.el-dropdown__popper');if(!_0x4ea353){_0x2ceea7('状态',_0x50287a(0x152));return;}}const _0x38748a=Array[_0x50287a(0x15b)](document[_0x50287a(0x113)](_0x50287a(0x151)))[_0x50287a(0x10f)](_0x7574b0=>_0x7574b0['textContent'][_0x50287a(0x133)]('@'));if(!_0x38748a){_0x2ceea7('状态',_0x50287a(0x15e));return;}const _0x14118a=_0x38748a[_0x50287a(0x160)][_0x50287a(0xf6)](),_0x16047a=_0x14118a[_0x50287a(0x134)]('@')[0x0];if(document[_0x50287a(0xf4)][_0x50287a(0xfe)][_0x50287a(0x126)]===_0x16047a)return;document[_0x50287a(0xf4)]['dataset'][_0x50287a(0x126)]=_0x16047a;const {base:_0x593c70,num:_0x584dcb}=_0x341fd4(_0x16047a),_0x5bc118=''+_0x593c70+(_0x584dcb+0x1);await GM_setValue(_0xd5badc(),_0x5bc118),_0x2ceea7(_0x50287a(0xf9),_0x5bc118),GM_notification({'title':_0x50287a(0x162),'text':'下一个账户将是\x20'+_0x5bc118+_0x50287a(0x106)});}function _0xc2cb3(){const _0x5da3c7=_0x1a7a1a,_0x662e7e=new MutationObserver(async()=>{const _0x24ac15=_0x361e;if(_0x2a0a52)return;_0x2a0a52=!![],setTimeout(()=>{_0x2a0a52=![];},0x1f4);if(document['querySelector'](_0x24ac15(0x121))){_0x2ceea7('状态',_0x24ac15(0x123)),_0x26ca60();return;}if(document[_0x24ac15(0x10c)](_0x24ac15(0x158))){_0x2ceea7('状态',_0x24ac15(0x128));return;}const _0x4ba1e7=document[_0x24ac15(0x10c)](_0x24ac15(0x11a));if(!_0x4ba1e7){const _0x524cdd=_0x5781df(['Log\x20in']);_0x524cdd&&!document[_0x24ac15(0x10c)]('.el-dialog')&&(_0x2ceea7('状态',_0x24ac15(0x137)),_0x524cdd[_0x24ac15(0xf5)]());return;}const _0x2c6799=_0x4ba1e7[_0x24ac15(0x10c)](_0x24ac15(0x11d)),_0x4ba46b=_0x4ba1e7[_0x24ac15(0x10c)](_0x24ac15(0x14b));if(_0x2c6799&&(!_0x4ba46b||_0x4ba46b[_0x24ac15(0x11f)][_0x24ac15(0x166)]===_0x24ac15(0x10a))){const _0xf53cb2=await _0x541bcc(_0x24ac15(0x13f));if(_0xf53cb2&&!_0xf53cb2[_0x24ac15(0xfe)][_0x24ac15(0x10e)]){_0xf53cb2['dataset']['logicAttached']='true',_0x2ceea7('状态',_0x24ac15(0x141));const _0xda826b=await GM_getValue(_0xd5badc(),null);_0x2ceea7(_0x24ac15(0xf9),_0xda826b||_0x24ac15(0xfa)),_0xda826b?_0x22b393(_0xda826b):(_0x2ceea7('状态',_0x24ac15(0xff)),_0xf53cb2[_0x24ac15(0x12c)](_0x24ac15(0x13b),()=>{const _0xf70b67=_0x24ac15,_0x1030c4=_0xf53cb2['value']['trim']();if(_0x1030c4){const _0x2d661a=_0x1030c4[_0xf70b67(0x134)]('@')[0x0];_0x22b393(_0x2d661a);}},{'once':!![]}));}return;}if(_0x4ba46b&&_0x4ba46b[_0x24ac15(0x11f)][_0x24ac15(0x166)]!=='none'){const _0x5250d0=_0x4ba46b[_0x24ac15(0x10c)](_0x24ac15(0x110));_0x5250d0&&_0x5250d0[_0x24ac15(0x160)][_0x24ac15(0xf6)]()==='Create\x20account'&&(!_0x5250d0['dataset'][_0x24ac15(0x148)]&&(_0x2ceea7('状态','登录弹窗,\x20点击Create\x20account...'),_0x5250d0[_0x24ac15(0xfe)]['clicked']=_0x24ac15(0x131),_0x5250d0[_0x24ac15(0xf5)]()));return;}});_0x662e7e[_0x5da3c7(0x15f)](document[_0x5da3c7(0xf4)],{'childList':!![],'subtree':!![]});}const _0x9030a9=setInterval(()=>{document['body']&&(clearInterval(_0x9030a9),_0x198736(),_0xc2cb3());},0x64);}()));function _0x435e(){const _0x53daca=['body','click','trim','status','dispatchEvent','下一账户','无(等待手动输入)','?t=','length','createElement','dataset','等待手动输入','remoteRulesUrl','.verification-inputs\x20input','8041690hgDlhj','解析响应失败','getOwnPropertyDescriptor','已清除','。\x0a请手动登出以开始下一次注册。','.Sign-up-box\x20button\x20span','innerHTML','邮箱准备就绪','none','34364sPYikl','querySelector','存储的下一个账户名已清除，页面将刷新。','logicAttached','find','p.desc-txt\x20span','Create\x20account','match','querySelectorAll','\x20#tm-mgmt-panel\x20{\x20position:\x20fixed;\x20bottom:\x2010px;\x20right:\x2010px;\x20width:\x20250px;\x20background:\x20#282c34;\x20color:\x20#abb2bf;\x20border:\x201px\x20solid\x20#61afef;\x20border-radius:\x208px;\x20z-index:\x2099999;\x20padding:\x2010px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.4);\x20}\x20#tm-mgmt-title\x20{\x20font-weight:\x20bold;\x20color:\x20#61afef;\x20border-bottom:\x201px\x20solid\x20#3e4451;\x20padding-bottom:\x205px;\x20margin-bottom:\x208px;\x20}\x20.tm-mgmt-row\x20{\x20margin-bottom:\x205px;\x20word-wrap:\x20break-word;\x20}\x20.tm-mgmt-button\x20{\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background:\x20#c678dd;\x20color:\x20#282c34;\x20border:\x201px\x20solid\x20#565c64;\x20border-radius:\x204px;\x20padding:\x205px;\x20cursor:\x20pointer;\x20margin-top:\x205px;\x20font-weight:\x20bold;\x20}\x20.tm-mgmt-button:hover\x20{\x20opacity:\x200.8;\x20}\x20','1170VJCxhb','stringify','tm-mgmt-panel','call','.el-dropdown__popper','.el-dialog.is-align-center\x20.el-dialog__body','startsWith','button,\x20a,\x20span','.Sign-up-box','26iDaXPE','style','tm-mgmt-next-user','.login-block','已提交注册...','已登录','https://co.taotile.ltd/vur.txt','parentElement','usernameCalculated','forEach','在验证码页面','邮箱\x20','https://hou.taotile.ltd/','正在获取验证码...','addEventListener','password','9acqqEk','aigc123456','reload','true','success','includes','split','.login-block\x20.el-dropdown','div','主页,\x20点击登录...','2343UzDXaC','input','now','blur','value','已登录,\x20准备下一账户','map','.Sign-up-box\x20input[placeholder=\x22Enter\x20registered\x20email\x20account\x22]','responseText','注册弹窗,\x20准备就绪','2517420mtlVGJ','emailSuffix','提交验证码...','账户已清除,请手动输入','来源\x20[TopMediai]','some','clicked','激活成功','backendApiUrl','.sign-in-page','8051704LcqEbw','Continue','66656bBIyKl','appendChild','980976XDKNFN','.el-dropdown__popper\x20p','无法找到用户菜单','\x20已激活','change','parse','前缀无效:\x20','last_used_account_topmediai','.verification-inputs','getElementById','56lwNdwN','from','tm-mgmt-status','22rsFEhK','无法识别邮箱','observe','textContent','application/json','任务更新','getCode','1324EqxZvr','填充表单...','display'];_0x435e=function(){return _0x53daca;};return _0x435e();}
